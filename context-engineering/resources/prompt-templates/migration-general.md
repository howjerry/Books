# 任務：程式碼遷移

## 情境

需要將專案中的 [來源框架/庫/語法] 遷移至 [目標框架/庫/語法]。

遷移範圍：
[描述要遷移的範圍，例如：src/ 目錄下所有 .ts 檔案]

遷移說明：
[描述來源與目標的差異，例如 API 名稱變更、語法差異等]

## 目標

1. 將所有 [來源] 的使用改為 [目標]
2. 確保功能完全等價
3. 確保所有測試通過
4. 移除不再需要的依賴

## 約束

- 一次只處理一個檔案
- 每次修改後執行測試驗證
- 保持 commit 粒度適中（每個檔案一個 commit）
- 不進行與遷移無關的重構

## 完成條件

當以下所有條件都滿足時，此任務視為完成：

1. [ ] 程式碼中沒有 [來源] 的 import 語句
   - 驗證：`grep -r "import.*from '[來源]'" src/` 無輸出
2. [ ] 所有測試通過：`npm test` 返回 exit code 0
3. [ ] 專案能成功建構：`npm run build` 返回 exit code 0
4. [ ] package.json 中移除 [來源] 依賴

## 工作流程

1. **掃描現狀**
   ```bash
   # 找出所有需要遷移的檔案
   grep -r "import.*from '[來源]'" src/ --include="*.ts"
   ```

2. **逐檔遷移**
   對於每個檔案：
   a. 讀取檔案內容
   b. 替換 import 語句
   c. 替換 API 呼叫
   d. 執行測試驗證

3. **清理依賴**
   - 從 package.json 移除舊依賴
   - 執行 `npm install` 確認

4. **最終驗證**
   - 執行完整測試套件
   - 執行建構流程

## API 對照表

| 來源 | 目標 | 備註 |
|------|------|------|
| `oldApi()` | `newApi()` | 參數相同 |
| `oldHook()` | `newHook()` | 回傳值格式不同 |

## 注意事項

- 某些 API 可能沒有直接對應，需要額外處理
- 注意異步行為的差異
- 留意類型定義的變化
- 如遇到無法自動遷移的情況，標記 TODO 並繼續
