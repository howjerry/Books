# 任務：Bug 修復

## 情境

專案中存在一個已知的 bug，需要定位根本原因並修復。

錯誤描述：
[在此描述 bug 的症狀、重現步驟、錯誤訊息等]

相關檔案（如已知）：
[列出可能相關的檔案路徑]

## 目標

1. 定位導致此 bug 的根本原因
2. 實作修復方案
3. 確保修復不引入新的問題
4. 如有相關測試，確保測試通過

## 約束

- 只修改必要的檔案，避免無關變更
- 保持現有的程式碼風格
- 不新增額外依賴（除非絕對必要）
- 不重構與 bug 無關的程式碼

## 完成條件

當以下所有條件都滿足時，此任務視為完成：

1. [ ] Bug 症狀不再出現（可通過特定操作驗證）
2. [ ] 所有現有測試通過：`npm test` 返回 exit code 0
3. [ ] 沒有 TypeScript 編譯錯誤：`tsc --noEmit` 無輸出
4. [ ] 沒有 Linting 錯誤：`npm run lint` 返回 exit code 0

## 工作流程

1. **理解問題**
   - 閱讀錯誤描述
   - 如有錯誤訊息，搜尋相關程式碼

2. **定位原因**
   - 使用 Search Tool 搜尋相關關鍵字
   - 閱讀可能相關的檔案
   - 追蹤程式碼執行路徑

3. **設計修復**
   - 確定最小影響的修復方案
   - 考慮邊界條件

4. **實作修復**
   - 修改相關檔案
   - 如需要，新增測試案例

5. **驗證修復**
   - 執行測試套件
   - 確認 bug 症狀消失

## 注意事項

- 不要只處理表面症狀，要找出根本原因
- 如果修復涉及多個檔案，確保它們的改動一致
- 如果不確定某個修改的影響，執行測試確認
- 避免「大規模重構順便修 bug」的誘惑
