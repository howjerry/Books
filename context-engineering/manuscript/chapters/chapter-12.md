# ç¬¬ 12 ç« ï¼šæœªä¾†å±•æœ›ï¼šSubagents èˆ‡ KTLO è‡ªå‹•åŒ–

> Roomba å¤¢æƒ³ï¼šæˆåƒä¸Šè¬çš„ AI æ©Ÿå™¨äººè‡ªå‹•ç¶­è­·ç¨‹å¼ç¢¼

---

## æœ¬ç« å­¸ç¿’ç›®æ¨™

å®Œæˆæœ¬ç« å¾Œï¼Œä½ å°‡èƒ½å¤ ï¼š

- ç†è§£ Subagents æ¶æ§‹å¦‚ä½•è§£æ±º Context æº¢å‡ºå•é¡Œ
- æè¿° KTLOï¼ˆKeep The Lights Onï¼‰è‡ªå‹•åŒ–çš„é¡˜æ™¯
- å€åˆ† Human-in-the-Loop èˆ‡ Human-on-the-Loop çš„å·®ç•°
- è¦åŠƒæœªä¾† 2-3 å¹´çš„æŠ€è¡“å­¸ç¿’è·¯å¾‘
- è©•ä¼° AI ç·¨ç¢¼å·¥å…·çš„é•·æœŸç™¼å±•è¶¨å‹¢

---

## 12.1 Context æº¢å‡ºçš„æ ¹æœ¬å›°å¢ƒ

### 12.1.1 å•é¡Œçš„æœ¬è³ª

å›åˆ°ç¬¬ 2 ç« æˆ‘å€‘è¨è«–çš„ Context Window æ¦‚å¿µâ€”â€”é€™æ˜¯ä¸€å€‹å›ºå®šå¤§å°çš„è¨˜æ†¶é«”é™£åˆ—ã€‚ç„¡è«–å»£å‘Šå®£å‚³çš„å®¹é‡æœ‰å¤šå¤§ï¼ˆ200K Tokenã€1M Tokenã€ç”šè‡³ 10M Tokenï¼‰ï¼Œå®ƒçµ‚ç©¶æ˜¯æœ‰é™çš„ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Context æº¢å‡ºçš„å›°å¢ƒ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ç•¶ä»»å‹™è¦æ¨¡è¶…é Context Window æ™‚æœƒç™¼ç”Ÿä»€éº¼ï¼Ÿ                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  å ´æ™¯ï¼šé‡æ§‹ä¸€å€‹ 100 è¬è¡Œçš„ç¨‹å¼ç¢¼åº«                        â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  ç¨‹å¼ç¢¼å¤§å°ï¼š~20M Token                                  â”‚    â”‚
â”‚  â”‚  Context Windowï¼š200K Token                              â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  å³ä½¿æ˜¯æœ€å¤§çš„ Context Windowï¼Œä¹Ÿåªèƒ½å®¹ç´ 1% çš„ç¨‹å¼ç¢¼ï¼    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  å‚³çµ±è§£æ±ºæ–¹æ¡ˆçš„å±€é™ï¼š                                            â”‚
â”‚                                                                  â”‚
â”‚  âŒ å¢åŠ  Context Window                                         â”‚
â”‚     â€¢ æˆæœ¬å‘ˆäºŒæ¬¡æ–¹å¢é•·ï¼ˆAttention æ©Ÿåˆ¶çš„é™åˆ¶ï¼‰                  â”‚
â”‚     â€¢ ã€ŒLost in the Middleã€ç¾è±¡æ›´åš´é‡                          â”‚
â”‚     â€¢ æ¨è«–é€Ÿåº¦å¤§å¹…ä¸‹é™                                          â”‚
â”‚                                                                  â”‚
â”‚  âŒ æ‘˜è¦æ­·å²å°è©±                                                â”‚
â”‚     â€¢ è³‡è¨Šæå¤±ä¸å¯é¿å…                                          â”‚
â”‚     â€¢ ç„¡æ³•ç²¾ç¢ºå›æº¯åˆ°ç‰¹å®šæ±ºç­–é»                                  â”‚
â”‚     â€¢ æ‘˜è¦æœ¬èº«ä¹Ÿæ¶ˆè€— Context                                    â”‚
â”‚                                                                  â”‚
â”‚  âŒ RAGï¼ˆæª¢ç´¢å¢å¼·ç”Ÿæˆï¼‰                                         â”‚
â”‚     â€¢ æª¢ç´¢ç²¾åº¦æœ‰é™                                              â”‚
â”‚     â€¢ ç„¡æ³•ç†è§£å…¨å±€æ¶æ§‹                                          â”‚
â”‚     â€¢ è·¨æª”æ¡ˆä¾è³´é›£ä»¥è™•ç†                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.1.2 ç‚ºä»€éº¼æ›´å¤§çš„ Context ä¸æ˜¯è§£æ±ºæ–¹æ¡ˆï¼Ÿ

é€™æ˜¯ä¸€å€‹åç›´è¦ºçš„çµè«–ï¼Œä½†æœ‰å …å¯¦çš„æ•¸å­¸åŸºç¤ï¼š

**Attention æ©Ÿåˆ¶çš„è¤‡é›œåº¦åˆ†æ**

åœ¨æ¨™æº– Transformer æ¶æ§‹ä¸­ï¼ŒSelf-Attention çš„è¨ˆç®—è¤‡é›œåº¦æ˜¯ï¼š

```
æ™‚é–“è¤‡é›œåº¦ï¼šO(nÂ²Â·d)
ç©ºé–“è¤‡é›œåº¦ï¼šO(nÂ² + nÂ·d)

å…¶ä¸­ï¼š
n = åºåˆ—é•·åº¦ï¼ˆToken æ•¸é‡ï¼‰
d = æ¨¡å‹ç¶­åº¦
```

é€™æ„å‘³è‘—ï¼š
- å¦‚æœ Context å¾ 100K å¢åŠ åˆ° 1Mï¼ˆ10 å€ï¼‰ï¼Œè¨ˆç®—æˆæœ¬å¢åŠ  100 å€
- è¨˜æ†¶é«”éœ€æ±‚ä¹Ÿå¢åŠ  100 å€
- æ¯ Token çš„æ¨è«–æˆæœ¬éš¨ Context é•·åº¦ç·šæ€§å¢åŠ 

**ã€ŒLost in the Middleã€ç¾è±¡**

2023 å¹´ Stanford å’Œ UC Berkeley çš„ç ”ç©¶ï¼ˆ"Lost in the Middle: How Language Models Use Long Contexts"ï¼‰ç™¼ç¾ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Attention åˆ†å¸ƒå¯¦é©—çµæœ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  åœ¨é•· Context ä¸­ï¼Œæ¨¡å‹å°ä¸åŒä½ç½®è³‡è¨Šçš„æ³¨æ„åŠ›åˆ†å¸ƒï¼š               â”‚
â”‚                                                                  â”‚
â”‚  æ³¨æ„åŠ› â”‚ â—â—â—â—                                    â—â—â—â—â—         â”‚
â”‚   å¼·åº¦  â”‚    â—â—                               â—â—                â”‚
â”‚         â”‚      â—â—                          â—â—                   â”‚
â”‚         â”‚        â—â—â—â—                  â—â—â—â—                     â”‚
â”‚         â”‚            â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—                         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º      â”‚
â”‚           é–‹é ­                ä¸­é–“                çµå°¾            â”‚
â”‚                                                                  â”‚
â”‚  è§€å¯Ÿçµæœï¼š                                                      â”‚
â”‚  â€¢ é–‹é ­å’Œçµå°¾çš„è³‡è¨Šè¢«é«˜åº¦é—œæ³¨ï¼ˆPrimacy & Recency Biasï¼‰         â”‚
â”‚  â€¢ ä¸­é–“çš„è³‡è¨Šç¶“å¸¸è¢«ã€Œéºå¿˜ã€                                      â”‚
â”‚  â€¢ Context è¶Šé•·ï¼Œä¸­é–“è¢«éºå¿˜çš„æ¯”ä¾‹è¶Šé«˜                           â”‚
â”‚                                                                  â”‚
â”‚  å¯¦é©—æ•¸æ“šï¼š                                                      â”‚
â”‚  â€¢ 20K Contextï¼šæº–ç¢ºç‡ ~85%                                     â”‚
â”‚  â€¢ 100K Contextï¼šæº–ç¢ºç‡ ~65%                                    â”‚
â”‚  â€¢ 200K Contextï¼šæº–ç¢ºç‡ ~50%                                    â”‚
â”‚                                                                  â”‚
â”‚  çµè«–ï¼šæ›´é•·çš„ Context ä¸ç­‰æ–¼æ›´å¥½çš„ç†è§£                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12.2 Subagents æ¶æ§‹

### 12.2.1 åˆ†è€Œæ²»ä¹‹çš„å“²å­¸

è§£æ±º Context æº¢å‡ºçš„æ­£ç¢ºæ–¹æ³•ä¸æ˜¯å¢åŠ å–®ä¸€ Context çš„å®¹é‡ï¼Œè€Œæ˜¯**åˆ†æ•£ä»»å‹™åˆ°å¤šå€‹ç¨ç«‹çš„ Agent**ã€‚

é€™å€‹æƒ³æ³•æºè‡ªé›»è…¦ç§‘å­¸ä¸­å¤è€çš„ã€Œåˆ†è€Œæ²»ä¹‹ã€ï¼ˆDivide and Conquerï¼‰ç­–ç•¥ï¼š

```
åˆ†è€Œæ²»ä¹‹åŸå‰‡ï¼š
1. Divideï¼šå°‡å¤§å•é¡Œåˆ†è§£æˆå°å•é¡Œ
2. Conquerï¼šç¨ç«‹è§£æ±ºæ¯å€‹å°å•é¡Œ
3. Combineï¼šåˆä½µå°å•é¡Œçš„è§£ç­”

åœ¨ AI Agent æƒ…å¢ƒä¸­ï¼š
1. ä¸» Agent è¦åŠƒä»»å‹™ï¼Œåˆ†è§£æˆå­ä»»å‹™
2. Subagents å„è‡ªè™•ç†å­ä»»å‹™ï¼ˆç¨ç«‹ Contextï¼‰
3. ä¸» Agent æ”¶é›†çµæœï¼Œæ•´åˆæˆæœ€çµ‚è§£ç­”
```

### 12.2.2 æ¶æ§‹è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Subagents æ¶æ§‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                    â”‚   ä¸»å”èª¿ Agent       â”‚                      â”‚
â”‚                    â”‚   (Orchestrator)     â”‚                      â”‚
â”‚                    â”‚                      â”‚                      â”‚
â”‚                    â”‚   Context: ~50K      â”‚                      â”‚
â”‚                    â”‚   è·è²¬ï¼š             â”‚                      â”‚
â”‚                    â”‚   â€¢ ä»»å‹™è¦åŠƒ         â”‚                      â”‚
â”‚                    â”‚   â€¢ å­ä»»å‹™åˆ†æ´¾       â”‚                      â”‚
â”‚                    â”‚   â€¢ çµæœæ•´åˆ         â”‚                      â”‚
â”‚                    â”‚   â€¢ è¡çªè§£æ±º         â”‚                      â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                               â”‚                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚                â”‚                â”‚                â”‚
â”‚              â–¼                â–¼                â–¼                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚     â”‚  Subagent A    â”‚ â”‚  Subagent B    â”‚ â”‚  Subagent C    â”‚   â”‚
â”‚     â”‚                â”‚ â”‚                â”‚ â”‚                â”‚   â”‚
â”‚     â”‚  Context: 100K â”‚ â”‚  Context: 100K â”‚ â”‚  Context: 100K â”‚   â”‚
â”‚     â”‚                â”‚ â”‚                â”‚ â”‚                â”‚   â”‚
â”‚     â”‚  å°ˆç²¾ï¼š        â”‚ â”‚  å°ˆç²¾ï¼š        â”‚ â”‚  å°ˆç²¾ï¼š        â”‚   â”‚
â”‚     â”‚  èªè­‰æ¨¡çµ„      â”‚ â”‚  æ”¯ä»˜æ¨¡çµ„      â”‚ â”‚  ç”¨æˆ¶æ¨¡çµ„      â”‚   â”‚
â”‚     â”‚                â”‚ â”‚                â”‚ â”‚                â”‚   â”‚
â”‚     â”‚  çŸ¥è­˜ï¼š        â”‚ â”‚  çŸ¥è­˜ï¼š        â”‚ â”‚  çŸ¥è­˜ï¼š        â”‚   â”‚
â”‚     â”‚  â€¢ auth/*.ts   â”‚ â”‚  â€¢ payment/*   â”‚ â”‚  â€¢ users/*     â”‚   â”‚
â”‚     â”‚  â€¢ JWT è¦ç¯„    â”‚ â”‚  â€¢ Stripe API  â”‚ â”‚  â€¢ CRUD æ¨¡å¼   â”‚   â”‚
â”‚     â”‚  â€¢ å®‰å…¨æœ€ä½³    â”‚ â”‚  â€¢ PCI åˆè¦    â”‚ â”‚  â€¢ æ¬Šé™ç³»çµ±    â”‚   â”‚
â”‚     â”‚    å¯¦è¸        â”‚ â”‚                â”‚ â”‚                â”‚   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  å„ªå‹¢ï¼š                                                          â”‚
â”‚  â€¢ æ¯å€‹ Subagent å¯ä»¥å®Œæ•´ç†è§£è‡ªå·±è² è²¬çš„æ¨¡çµ„                      â”‚
â”‚  â€¢ ç¸½ Context å®¹é‡ = ä¸» Agent + Î£ Subagents                     â”‚
â”‚  â€¢ Subagents å¯ä»¥ä¸¦è¡Œé‹è¡Œï¼Œæé«˜æ•ˆç‡                              â”‚
â”‚  â€¢ å°ˆæ¥­åŒ–åˆ†å·¥ï¼Œæ¸›å°‘éŒ¯èª¤                                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2.3 Subagents é€šè¨Šå”è­°

```go
package subagents

import (
    "context"
    "encoding/json"
    "sync"
)

// â€¹1â€º ä»»å‹™è¨Šæ¯
type TaskMessage struct {
    ID          string                 `json:"id"`
    Type        TaskType               `json:"type"`
    Priority    int                    `json:"priority"`
    Context     string                 `json:"context"`      // ä»»å‹™æè¿°
    Constraints []string               `json:"constraints"`  // ç´„æŸæ¢ä»¶
    Metadata    map[string]interface{} `json:"metadata"`
}

type TaskType string

const (
    TaskTypeAnalyze  TaskType = "analyze"   // åˆ†æä»»å‹™
    TaskTypeRefactor TaskType = "refactor"  // é‡æ§‹ä»»å‹™
    TaskTypeTest     TaskType = "test"      // æ¸¬è©¦ä»»å‹™
    TaskTypeDocument TaskType = "document"  // æ–‡ä»¶ä»»å‹™
)

// â€¹2â€º çµæœè¨Šæ¯
type ResultMessage struct {
    TaskID      string                 `json:"task_id"`
    Status      ResultStatus           `json:"status"`
    Output      string                 `json:"output"`       // ä¸»è¦è¼¸å‡º
    Artifacts   []Artifact             `json:"artifacts"`    // ç”¢å‡ºç‰©
    Metadata    map[string]interface{} `json:"metadata"`
    TokensUsed  int64                  `json:"tokens_used"`
}

type ResultStatus string

const (
    StatusSuccess    ResultStatus = "success"
    StatusFailed     ResultStatus = "failed"
    StatusPartial    ResultStatus = "partial"  // éƒ¨åˆ†å®Œæˆ
    StatusNeedsInput ResultStatus = "needs_input"
)

// â€¹3â€º Artifactï¼ˆç”¢å‡ºç‰©ï¼‰
type Artifact struct {
    Type    string `json:"type"`    // file, code, suggestion
    Path    string `json:"path"`    // æª”æ¡ˆè·¯å¾‘ï¼ˆå¦‚é©ç”¨ï¼‰
    Content string `json:"content"` // å…§å®¹
}

// â€¹4â€º Subagent ä»‹é¢
type Subagent interface {
    // è™•ç†ä»»å‹™
    Process(ctx context.Context, task TaskMessage) ResultMessage

    // ç²å–èƒ½åŠ›æè¿°
    GetCapabilities() []string

    // ç²å–ç•¶å‰è² è¼‰
    GetLoad() float64
}

// â€¹5â€º å”èª¿å™¨
type Orchestrator struct {
    mu          sync.RWMutex
    subagents   map[string]Subagent
    taskQueue   chan TaskMessage
    resultQueue chan ResultMessage
}

// â€¹6â€º åˆ†æ´¾ä»»å‹™
func (o *Orchestrator) Dispatch(ctx context.Context, task TaskMessage) (ResultMessage, error) {
    // æ ¹æ“šä»»å‹™é¡å‹å’Œå…§å®¹é¸æ“‡æœ€é©åˆçš„ Subagent
    agent := o.selectAgent(task)
    if agent == nil {
        return ResultMessage{
            TaskID: task.ID,
            Status: StatusFailed,
            Output: "no suitable subagent found",
        }, nil
    }

    // ç™¼é€ä»»å‹™åˆ° Subagent
    result := agent.Process(ctx, task)

    // é©—è­‰çµæœ
    if err := o.validateResult(task, result); err != nil {
        result.Status = StatusFailed
        result.Metadata["validation_error"] = err.Error()
    }

    return result, nil
}

// â€¹7â€º ä¸¦è¡Œè™•ç†å¤šå€‹ä»»å‹™
func (o *Orchestrator) ProcessBatch(ctx context.Context, tasks []TaskMessage) []ResultMessage {
    results := make([]ResultMessage, len(tasks))
    var wg sync.WaitGroup

    for i, task := range tasks {
        wg.Add(1)
        go func(idx int, t TaskMessage) {
            defer wg.Done()
            result, _ := o.Dispatch(ctx, t)
            results[idx] = result
        }(i, task)
    }

    wg.Wait()
    return results
}

// â€¹8â€º é¸æ“‡ Agent
func (o *Orchestrator) selectAgent(task TaskMessage) Subagent {
    o.mu.RLock()
    defer o.mu.RUnlock()

    var bestAgent Subagent
    var bestScore float64

    for _, agent := range o.subagents {
        score := o.calculateMatchScore(agent, task)
        load := agent.GetLoad()

        // è€ƒæ…®åŒ¹é…åº¦å’Œè² è¼‰
        adjustedScore := score * (1 - load*0.5)

        if adjustedScore > bestScore {
            bestScore = adjustedScore
            bestAgent = agent
        }
    }

    return bestAgent
}

// â€¹9â€º è¨ˆç®—åŒ¹é…åˆ†æ•¸
func (o *Orchestrator) calculateMatchScore(agent Subagent, task TaskMessage) float64 {
    capabilities := agent.GetCapabilities()

    // ç°¡åŒ–ç‰ˆå¯¦ç¾ - å¯¦éš›æ‡‰è©²ä½¿ç”¨èªç¾©ç›¸ä¼¼åº¦
    var matchCount int
    for _, cap := range capabilities {
        if containsKeyword(task.Context, cap) {
            matchCount++
        }
    }

    if len(capabilities) == 0 {
        return 0
    }

    return float64(matchCount) / float64(len(capabilities))
}
```

### 12.2.4 Multi-Agent ç³»çµ±çš„å­¸è¡“åŸºç¤

Subagents æ¶æ§‹å€Ÿé‘’äº†åˆ†æ•£å¼ç³»çµ±å’Œ Multi-Agent Systems (MAS) çš„ç ”ç©¶æˆæœï¼š

**1. BDI æ¶æ§‹ï¼ˆBelief-Desire-Intentionï¼‰**

é€™æ˜¯ AI Agent ç ”ç©¶ä¸­çš„ç¶“å…¸æ¶æ§‹ï¼ˆRao & Georgeff, 1995ï¼‰ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BDI æ¶æ§‹                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Beliefï¼ˆä¿¡å¿µï¼‰                                                  â”‚
â”‚  â€¢ Agent å°ä¸–ç•Œçš„èªçŸ¥                                           â”‚
â”‚  â€¢ ä¾‹ï¼šã€Œç•¶å‰ç¨‹å¼ç¢¼æœ‰ 47 å€‹ TypeScript éŒ¯èª¤ã€                   â”‚
â”‚                                                                  â”‚
â”‚  Desireï¼ˆæ…¾æœ›ï¼‰                                                  â”‚
â”‚  â€¢ Agent æƒ³è¦é”æˆçš„ç›®æ¨™                                         â”‚
â”‚  â€¢ ä¾‹ï¼šã€Œæ¶ˆé™¤æ‰€æœ‰ TypeScript éŒ¯èª¤ã€                             â”‚
â”‚                                                                  â”‚
â”‚  Intentionï¼ˆæ„åœ–ï¼‰                                               â”‚
â”‚  â€¢ Agent æ­£åœ¨åŸ·è¡Œçš„è¨ˆåŠƒ                                         â”‚
â”‚  â€¢ ä¾‹ï¼šã€Œé€ä¸€ä¿®å¾©éŒ¯èª¤ï¼Œå¾æœ€ç°¡å–®çš„é–‹å§‹ã€                         â”‚
â”‚                                                                  â”‚
â”‚  æ¨ç†å¾ªç’°ï¼š                                                      â”‚
â”‚  while (true) {                                                  â”‚
â”‚      perceive()        // æ„ŸçŸ¥ç’°å¢ƒï¼Œæ›´æ–° Beliefs                â”‚
â”‚      deliberate()      // è€ƒæ…®é¸é …ï¼Œæ›´æ–° Desires                â”‚
â”‚      plan()            // åˆ¶å®šè¨ˆåŠƒï¼Œå½¢æˆ Intentions              â”‚
â”‚      execute()         // åŸ·è¡Œè¡Œå‹•                              â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. Contract Net Protocol**

é€™æ˜¯ Multi-Agent ç³»çµ±ä¸­ä»»å‹™åˆ†é…çš„æ¨™æº–å”è­°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Contract Net Protocol                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Manager Agent                        Contractor Agents          â”‚
â”‚       â”‚                                   A    B    C            â”‚
â”‚       â”‚                                   â”‚    â”‚    â”‚            â”‚
â”‚       â”‚â”€â”€ 1. ä»»å‹™å…¬å‘Š (CFP) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â—„â”€â”€â–ºâ”‚â—„â”€â”€â–ºâ”‚            â”‚
â”‚       â”‚   ã€Œéœ€è¦é‡æ§‹èªè­‰æ¨¡çµ„ã€             â”‚    â”‚    â”‚            â”‚
â”‚       â”‚                                   â”‚    â”‚    â”‚            â”‚
â”‚       â”‚â—„â”€ 2. æŠ•æ¨™ (Bid) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚    â”‚            â”‚
â”‚       â”‚   ã€Œæˆ‘æ“…é•·èªè­‰ï¼Œé è¨ˆ 50 æ¬¡è¿­ä»£ã€  â”‚    â”‚    â”‚            â”‚
â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”‚    â”‚            â”‚
â”‚       â”‚   ã€Œæˆ‘ä¹Ÿå¯ä»¥ï¼Œä½†éœ€è¦ 100 æ¬¡è¿­ä»£ã€ â”‚    â”‚    â”‚            â”‚
â”‚       â”‚                                   â”‚    â”‚    â”‚            â”‚
â”‚       â”‚â”€â”€ 3. æˆæ¨™ (Award) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    â”‚    â”‚            â”‚
â”‚       â”‚   ã€Œä»»å‹™åˆ†é…çµ¦ä½ ã€                 â”‚    â”‚    â”‚            â”‚
â”‚       â”‚                                   â”‚    â”‚    â”‚            â”‚
â”‚       â”‚â—„â”€ 4. çµæœå ±å‘Š (Report) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚    â”‚            â”‚
â”‚       â”‚   ã€Œä»»å‹™å®Œæˆï¼Œé€™æ˜¯çµæœã€           â”‚    â”‚    â”‚            â”‚
â”‚       â”‚                                   â”‚    â”‚    â”‚            â”‚
â”‚                                                                  â”‚
â”‚  å„ªé»ï¼š                                                          â”‚
â”‚  â€¢ å»ä¸­å¿ƒåŒ–æ±ºç­–                                                 â”‚
â”‚  â€¢ å‹•æ…‹è² è¼‰å¹³è¡¡                                                 â”‚
â”‚  â€¢ å®¹éŒ¯æ€§å¼·                                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12.3 KTLO è‡ªå‹•åŒ–é¡˜æ™¯

### 12.3.1 ä»€éº¼æ˜¯ KTLOï¼Ÿ

KTLOï¼ˆKeep The Lights Onï¼‰æŒ‡ç¶­æŒç³»çµ±æ­£å¸¸é‹ä½œæ‰€éœ€çš„æ—¥å¸¸ç¶­è­·å·¥ä½œã€‚é€™äº›å·¥ä½œé€šå¸¸ï¼š

- **é‡è¤‡æ€§é«˜**ï¼šæ¯é€±æˆ–æ¯æœˆéƒ½è¦åš
- **åƒ¹å€¼æ„Ÿä½**ï¼šä¸å‰µé€ æ–°åŠŸèƒ½ï¼Œåªæ˜¯ç¶­è­·
- **æ¶ˆè€—ç²¾åŠ›**ï¼šä½”ç”¨é–‹ç™¼è€…å¤§é‡æ™‚é–“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å…¸å‹çš„ KTLO ä»»å‹™                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ä¾è³´ç®¡ç†                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  â€¢ npm/yarn/pip æ›´æ–°                                            â”‚
â”‚  â€¢ å®‰å…¨æ¼æ´ä¿®è£œ                                                 â”‚
â”‚  â€¢ æ£„ç”¨å¥—ä»¶é·ç§»                                                 â”‚
â”‚  â€¢ ç‰ˆæœ¬è¡çªè§£æ±º                                                 â”‚
â”‚                                                                  â”‚
â”‚  ç¨‹å¼ç¢¼å“è³ª                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  â€¢ Linting éŒ¯èª¤ä¿®å¾©                                             â”‚
â”‚  â€¢ å‹åˆ¥éŒ¯èª¤ä¿®å¾©                                                 â”‚
â”‚  â€¢ æ¸¬è©¦è¦†è“‹ç‡ç¶­è­·                                               â”‚
â”‚  â€¢ ç¨‹å¼ç¢¼é¢¨æ ¼çµ±ä¸€                                               â”‚
â”‚                                                                  â”‚
â”‚  æŠ€è¡“å‚µå‹™                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  â€¢ TODO/FIXME æ¸…ç†                                              â”‚
â”‚  â€¢ æ£„ç”¨ API é·ç§»                                                â”‚
â”‚  â€¢ æ­»ç¢¼ç§»é™¤                                                     â”‚
â”‚  â€¢ é‡è¤‡ç¨‹å¼ç¢¼æ•´åˆ                                               â”‚
â”‚                                                                  â”‚
â”‚  æ–‡ä»¶ç¶­è­·                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  â€¢ API æ–‡ä»¶æ›´æ–°                                                 â”‚
â”‚  â€¢ README åŒæ­¥                                                  â”‚
â”‚  â€¢ ç¨‹å¼ç¢¼è¨»è§£ç¶­è­·                                               â”‚
â”‚  â€¢ è®Šæ›´æ—¥èªŒç”Ÿæˆ                                                 â”‚
â”‚                                                                  â”‚
â”‚  æ™‚é–“ä¼°è¨ˆï¼ˆä¸­å‹åœ˜éšŠï¼‰ï¼š                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚  æ¯ä½é–‹ç™¼è€…æ¯é€±èŠ±è²»ï¼š4-8 å°æ™‚åœ¨ KTLO ä»»å‹™                       â”‚
â”‚  10 äººåœ˜éšŠæ¯æœˆï¼š160-320 å°æ™‚ = $16,000-$32,000                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.3.2 Roomba å¤¢æƒ³

Geoffrey Huntley æå‡ºçš„ã€ŒRoomba å¤¢æƒ³ã€æ˜¯ KTLO è‡ªå‹•åŒ–çš„çµ‚æ¥µé¡˜æ™¯ï¼š

> æƒ³åƒæˆåƒä¸Šè¬çš„å°å‹ AI Agent åƒ Roomba å¸å¡µå™¨ä¸€æ¨£ï¼Œåœ¨ä½ çš„ç¨‹å¼ç¢¼åº«ä¸­é»˜é»˜å·¥ä½œâ€”â€”ä¿®å¾©å°å•é¡Œã€æ›´æ–°ä¾è³´ã€ä¿æŒç¨‹å¼ç¢¼æ•´æ½”ã€‚ä½ ä¸éœ€è¦æŒ‡æ´¾ä»»å‹™çµ¦å®ƒå€‘ï¼Œå®ƒå€‘æœƒè‡ªå‹•ç™¼ç¾éœ€è¦åšçš„äº‹æƒ…ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Roomba å¤¢æƒ³æ¶æ§‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ç¨‹å¼ç¢¼åº«                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚  â”‚ R â”‚   â”‚ R â”‚   â”‚ R â”‚   â”‚ R â”‚   â”‚ R â”‚   â”‚ R â”‚  ...      â”‚  â”‚
â”‚  â”‚  â””â”€â”¬â”€â”˜   â””â”€â”¬â”€â”˜   â””â”€â”¬â”€â”˜   â””â”€â”¬â”€â”˜   â””â”€â”¬â”€â”˜   â””â”€â”¬â”€â”˜          â”‚  â”‚
â”‚  â”‚    â”‚       â”‚       â”‚       â”‚       â”‚       â”‚             â”‚  â”‚
â”‚  â”‚    â”‚       â”‚       â”‚       â”‚       â”‚       â”‚             â”‚  â”‚
â”‚  â”‚  Lint    Deps    Types   Tests  Docs    Security        â”‚  â”‚
â”‚  â”‚  Agent   Agent   Agent   Agent  Agent   Agent           â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  æ¯å€‹ Agent å°ˆæ³¨æ–¼ä¸€ç¨®ç¶­è­·ä»»å‹™                            â”‚  â”‚
â”‚  â”‚  æŒçºŒç›£æ§ï¼Œè‡ªå‹•ä¿®å¾©                                       â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  é‹ä½œæ¨¡å¼ï¼š                                                      â”‚
â”‚                                                                  â”‚
â”‚  1. æŒçºŒç›£æ§                                                     â”‚
â”‚     â€¢ æ¯éš” N åˆ†é˜æƒæç¨‹å¼ç¢¼åº«                                   â”‚
â”‚     â€¢ è­˜åˆ¥ç¬¦åˆè‡ªå·±å°ˆæ¥­çš„å•é¡Œ                                    â”‚
â”‚                                                                  â”‚
â”‚  2. è‡ªå‹•ä¿®å¾©                                                     â”‚
â”‚     â€¢ å°æ–¼ç°¡å–®ã€ä½é¢¨éšªçš„å•é¡Œï¼Œç›´æ¥ä¿®å¾©                          â”‚
â”‚     â€¢ å»ºç«‹ commitï¼ŒåŒ…å«æ¸…æ™°çš„èªªæ˜                               â”‚
â”‚                                                                  â”‚
â”‚  3. æè­°ä¿®å¾©                                                     â”‚
â”‚     â€¢ å°æ–¼è¤‡é›œæˆ–é«˜é¢¨éšªçš„å•é¡Œï¼Œå»ºç«‹ PR                           â”‚
â”‚     â€¢ ç­‰å¾…äººå·¥å¯©æŸ¥                                               â”‚
â”‚                                                                  â”‚
â”‚  4. å­¸ç¿’æ”¹é€²                                                     â”‚
â”‚     â€¢ å¾å¯©æŸ¥å›é¥‹ä¸­å­¸ç¿’                                          â”‚
â”‚     â€¢ èª¿æ•´ä¿®å¾©ç­–ç•¥                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.3.3 å¯¦ç¾ Roomba Agent

```go
package roomba

import (
    "context"
    "log"
    "time"
)

// â€¹1â€º Roomba Agent ä»‹é¢
type RoombaAgent interface {
    // æƒæç¨‹å¼ç¢¼åº«ï¼Œæ‰¾å‡ºéœ€è¦è™•ç†çš„å•é¡Œ
    Scan(ctx context.Context) ([]Issue, error)

    // å˜—è©¦ä¿®å¾©å•é¡Œ
    Fix(ctx context.Context, issue Issue) (FixResult, error)

    // ç²å– Agent é¡å‹
    GetType() string

    // ç²å–é¢¨éšªç­‰ç´šï¼ˆæ±ºå®šæ˜¯å¦éœ€è¦äººå·¥å¯©æŸ¥ï¼‰
    GetRiskLevel() RiskLevel
}

type RiskLevel int

const (
    RiskLow    RiskLevel = iota // å¯ä»¥è‡ªå‹•åˆä½µ
    RiskMedium                   // éœ€è¦å¿«é€Ÿå¯©æŸ¥
    RiskHigh                     // éœ€è¦è©³ç´°å¯©æŸ¥
)

// â€¹2â€º å•é¡Œå®šç¾©
type Issue struct {
    ID          string
    Type        string
    File        string
    Line        int
    Description string
    Severity    string
    AutoFixable bool
}

// â€¹3â€º ä¿®å¾©çµæœ
type FixResult struct {
    IssueID   string
    Success   bool
    Changes   []FileChange
    Message   string
    NeedsReview bool
}

type FileChange struct {
    Path     string
    OldLines []string
    NewLines []string
}

// â€¹4â€º Lint Roomba Agent
type LintRoombaAgent struct {
    projectRoot string
    lintCommand string
}

func NewLintRoombaAgent(root, cmd string) *LintRoombaAgent {
    return &LintRoombaAgent{
        projectRoot: root,
        lintCommand: cmd,
    }
}

func (a *LintRoombaAgent) Scan(ctx context.Context) ([]Issue, error) {
    // åŸ·è¡Œ lint å‘½ä»¤ï¼Œè§£æè¼¸å‡º
    // è¿”å›ç™¼ç¾çš„å•é¡Œåˆ—è¡¨
    return nil, nil
}

func (a *LintRoombaAgent) Fix(ctx context.Context, issue Issue) (FixResult, error) {
    // å˜—è©¦è‡ªå‹•ä¿®å¾© lint å•é¡Œ
    // ä½¿ç”¨ --fix é¸é …æˆ– AI ç”Ÿæˆä¿®å¾©
    return FixResult{}, nil
}

func (a *LintRoombaAgent) GetType() string {
    return "lint"
}

func (a *LintRoombaAgent) GetRiskLevel() RiskLevel {
    return RiskLow // Lint ä¿®å¾©é€šå¸¸ä½é¢¨éšª
}

// â€¹5â€º Roomba å”èª¿å™¨
type RoombaCoordinator struct {
    agents      []RoombaAgent
    scanInterval time.Duration
    maxConcurrent int
}

func NewRoombaCoordinator(interval time.Duration) *RoombaCoordinator {
    return &RoombaCoordinator{
        agents:       make([]RoombaAgent, 0),
        scanInterval: interval,
        maxConcurrent: 3,
    }
}

// â€¹6â€º è¨»å†Š Agent
func (c *RoombaCoordinator) Register(agent RoombaAgent) {
    c.agents = append(c.agents, agent)
}

// â€¹7â€º å•Ÿå‹• Roomba å¾ªç’°
func (c *RoombaCoordinator) Start(ctx context.Context) {
    ticker := time.NewTicker(c.scanInterval)
    defer ticker.Stop()

    for {
        select {
        case <-ctx.Done():
            return
        case <-ticker.C:
            c.runCycle(ctx)
        }
    }
}

// â€¹8â€º åŸ·è¡Œä¸€å€‹å¾ªç’°
func (c *RoombaCoordinator) runCycle(ctx context.Context) {
    log.Println("Roomba cycle started")

    for _, agent := range c.agents {
        // æƒæå•é¡Œ
        issues, err := agent.Scan(ctx)
        if err != nil {
            log.Printf("Agent %s scan failed: %v", agent.GetType(), err)
            continue
        }

        log.Printf("Agent %s found %d issues", agent.GetType(), len(issues))

        // è™•ç†å¯è‡ªå‹•ä¿®å¾©çš„å•é¡Œ
        for _, issue := range issues {
            if !issue.AutoFixable {
                continue
            }

            result, err := agent.Fix(ctx, issue)
            if err != nil {
                log.Printf("Fix failed: %v", err)
                continue
            }

            if result.Success {
                c.handleFixResult(agent, result)
            }
        }
    }

    log.Println("Roomba cycle completed")
}

// â€¹9â€º è™•ç†ä¿®å¾©çµæœ
func (c *RoombaCoordinator) handleFixResult(agent RoombaAgent, result FixResult) {
    risk := agent.GetRiskLevel()

    switch risk {
    case RiskLow:
        // ç›´æ¥æäº¤
        c.commitAndPush(result)
    case RiskMedium:
        // å»ºç«‹ PRï¼Œè¨­å®šè‡ªå‹•åˆä½µ
        c.createPRWithAutoMerge(result)
    case RiskHigh:
        // å»ºç«‹ PRï¼Œç­‰å¾…å¯©æŸ¥
        c.createPRForReview(result)
    }
}
```

---

## 12.4 Human-in-the-Loop vs Human-on-the-Loop

### 12.4.1 æ¦‚å¿µæ¯”è¼ƒ

é€™æ˜¯ AI ç³»çµ±è¨­è¨ˆä¸­çš„å…©ç¨®ä¸åŒäººæ©Ÿå”ä½œæ¨¡å¼ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    äººæ©Ÿå”ä½œæ¨¡å¼æ¯”è¼ƒ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Human-in-the-Loopï¼ˆäººåœ¨è¿´åœˆä¸­ï¼‰                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
â”‚                                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚     â”‚ AI åˆ†æ â”‚                                                 â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                 â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚     â”‚ äººå¯©æ‰¹  â”‚â—„â”€â”€â”€ æ¯ä¸€æ­¥éƒ½éœ€è¦äººçš„æ±ºå®š                        â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                 â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚     â”‚ AI åŸ·è¡Œ â”‚                                                 â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                 â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚     â”‚ äººå¯©æ‰¹  â”‚â—„â”€â”€â”€ æ¯ä¸€æ­¥éƒ½éœ€è¦äººçš„æ±ºå®š                        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                  â”‚
â”‚  ç‰¹é»ï¼š                                                          â”‚
â”‚  â€¢ äººé¡æ·±åº¦åƒèˆ‡æ¯å€‹æ±ºç­–                                         â”‚
â”‚  â€¢ å®‰å…¨æ€§é«˜ï¼ŒéŒ¯èª¤å¯åŠæ™‚ç™¼ç¾                                     â”‚
â”‚  â€¢ æ•ˆç‡ä½ï¼Œäººæˆç‚ºç“¶é ¸                                           â”‚
â”‚  â€¢ é©åˆï¼šé«˜é¢¨éšªæ±ºç­–ã€æ–°ä»»å‹™é¡å‹                                 â”‚
â”‚                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                  â”‚
â”‚  Human-on-the-Loopï¼ˆäººåœ¨è¿´åœˆä¸Šï¼‰                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
â”‚                                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚     â”‚ AI åˆ†æ â”‚â”€â”€â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚         â”‚                                 â”‚
â”‚          â”‚          â”‚  äººç›£ç£  â”‚â—„â”€â”€â”€ äººåªç›£ç£ï¼Œä¸åƒèˆ‡æ¯æ­¥æ±ºç­–   â”‚
â”‚          â–¼          â”‚         â”‚                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  ç•°å¸¸æ™‚  â”‚                                 â”‚
â”‚     â”‚ AI æ±ºç­– â”‚     â”‚  ä»‹å…¥    â”‚                                 â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚         â”‚                                 â”‚
â”‚          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚          â–¼                                                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚     â”‚ AI åŸ·è¡Œ â”‚                                                 â”‚
â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                 â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚     â”‚ AI é©—è­‰ â”‚                                                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                  â”‚
â”‚  ç‰¹é»ï¼š                                                          â”‚
â”‚  â€¢ AI è‡ªä¸»é‹è¡Œï¼Œäººåªåœ¨ä¾‹å¤–æ™‚ä»‹å…¥                                â”‚
â”‚  â€¢ æ•ˆç‡é«˜ï¼Œå¯å¤§è¦æ¨¡é‹è¡Œ                                         â”‚
â”‚  â€¢ éœ€è¦å®Œå–„çš„ç›£æ§å’Œå‘Šè­¦ç³»çµ±                                     â”‚
â”‚  â€¢ é©åˆï¼šä½é¢¨éšªä»»å‹™ã€å·²é©—è­‰çš„ä»»å‹™é¡å‹                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.4.2 æ¼¸é€²å¼ä¿¡ä»»æ¨¡å‹

å¾ Human-in-the-Loop åˆ° Human-on-the-Loop çš„è½‰è®Šä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œè€Œæ˜¯åŸºæ–¼**æ¼¸é€²å¼ä¿¡ä»»**çš„ç´¯ç©ï¼š

```go
// â€¹1â€º ä¿¡ä»»ç­‰ç´š
type TrustLevel int

const (
    TrustNone      TrustLevel = iota // å®Œå…¨ä¸ä¿¡ä»»ï¼Œæ¯æ­¥å¯©æ‰¹
    TrustLow                          // ä½ä¿¡ä»»ï¼Œæ‰¹é‡å¯©æ‰¹
    TrustMedium                       // ä¸­ä¿¡ä»»ï¼ŒæŠ½æ¨£å¯©æ‰¹
    TrustHigh                         // é«˜ä¿¡ä»»ï¼Œåªåœ¨ç•°å¸¸æ™‚å¯©æ‰¹
    TrustFull                         // å®Œå…¨ä¿¡ä»»ï¼Œè‡ªå‹•åˆä½µ
)

// â€¹2â€º ä¿¡ä»»ç®¡ç†å™¨
type TrustManager struct {
    taskTypeStats map[string]*TaskStats
}

type TaskStats struct {
    TotalAttempts   int
    SuccessCount    int
    FailureCount    int
    HumanOverrides  int  // äººé¡æ¨ç¿» AI æ±ºç­–çš„æ¬¡æ•¸
    CurrentTrust    TrustLevel
}

// â€¹3â€º è¨ˆç®—ä¿¡ä»»ç­‰ç´š
func (m *TrustManager) CalculateTrust(taskType string) TrustLevel {
    stats := m.taskTypeStats[taskType]
    if stats == nil {
        return TrustNone
    }

    // æˆåŠŸç‡
    if stats.TotalAttempts < 10 {
        return TrustNone // æ¨£æœ¬å¤ªå°‘
    }

    successRate := float64(stats.SuccessCount) / float64(stats.TotalAttempts)
    overrideRate := float64(stats.HumanOverrides) / float64(stats.TotalAttempts)

    // åŸºæ–¼çµ±è¨ˆæ•¸æ“šæ±ºå®šä¿¡ä»»ç­‰ç´š
    if successRate >= 0.99 && overrideRate < 0.01 && stats.TotalAttempts >= 100 {
        return TrustFull
    }
    if successRate >= 0.95 && overrideRate < 0.05 && stats.TotalAttempts >= 50 {
        return TrustHigh
    }
    if successRate >= 0.90 && overrideRate < 0.10 {
        return TrustMedium
    }
    if successRate >= 0.80 {
        return TrustLow
    }

    return TrustNone
}

// â€¹4â€º æ±ºå®šå¯©æ‰¹æµç¨‹
func (m *TrustManager) DetermineApprovalProcess(taskType string) ApprovalProcess {
    trust := m.CalculateTrust(taskType)

    switch trust {
    case TrustFull:
        return ApprovalProcess{
            AutoMerge:     true,
            ReviewRequired: false,
        }
    case TrustHigh:
        return ApprovalProcess{
            AutoMerge:     true,
            ReviewRequired: true,
            ReviewType:    "async",  // éåŒæ­¥å¯©æŸ¥ï¼ˆåˆä½µå¾Œï¼‰
        }
    case TrustMedium:
        return ApprovalProcess{
            AutoMerge:     false,
            ReviewRequired: true,
            ReviewType:    "sampling",  // æŠ½æ¨£å¯©æŸ¥
            SampleRate:    0.2,         // 20% æŠ½æ¨£
        }
    case TrustLow:
        return ApprovalProcess{
            AutoMerge:     false,
            ReviewRequired: true,
            ReviewType:    "batch",  // æ‰¹é‡å¯©æŸ¥
        }
    default:
        return ApprovalProcess{
            AutoMerge:     false,
            ReviewRequired: true,
            ReviewType:    "full",  // å®Œæ•´å¯©æŸ¥
        }
    }
}

type ApprovalProcess struct {
    AutoMerge      bool
    ReviewRequired bool
    ReviewType     string
    SampleRate     float64
}
```

---

## 12.5 2027 å¹´çš„æŠ€è¡“åœ°åœ–

### 12.5.1 é æ¸¬æ™‚é–“ç·š

åŸºæ–¼ç›®å‰çš„æŠ€è¡“ç™¼å±•è¶¨å‹¢ï¼Œä»¥ä¸‹æ˜¯å°æœªä¾† 2-3 å¹´çš„é æ¸¬ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    2025-2027 æŠ€è¡“é æ¸¬                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  2025 å¹´ï¼ˆç¾åœ¨ï¼‰                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚  âœ… Ralph Loop æˆç‚ºå°çœ¾ä½†æœ‰æ•ˆçš„å¯¦è¸                             â”‚
â”‚  âœ… Claude Code ç­‰å·¥å…·æ—¥è¶¨æˆç†Ÿ                                  â”‚
â”‚  âœ… Context Window é”åˆ° 200K-1M Token                           â”‚
â”‚  â³ Subagents æ¶æ§‹é–‹å§‹å‡ºç¾åœ¨ç ”ç©¶è«–æ–‡ä¸­                          â”‚
â”‚  â³ ä¼æ¥­é–‹å§‹è©¦é©—å¤œé–“å·¥å» æ¨¡å¼                                    â”‚
â”‚                                                                  â”‚
â”‚  2026 å¹´                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  ğŸ“ˆ Ralph Loop æˆç‚ºä¸»æµæœ€ä½³å¯¦è¸                                 â”‚
â”‚  ğŸ“ˆ Subagents æ¶æ§‹æ¨™æº–åŒ–ï¼ˆé¡ä¼¼ MCPï¼‰                            â”‚
â”‚  ğŸ“ˆ Human-on-the-Loop æ¨¡å¼åœ¨ KTLO ä»»å‹™ä¸­æ™®åŠ                    â”‚
â”‚  ğŸ”® é¦–æ‰¹ Roomba Agent ç”¢å“ä¸Šå¸‚                                   â”‚
â”‚  ğŸ”® AI ç”Ÿæˆç¨‹å¼ç¢¼ä½”æ–°ç¨‹å¼ç¢¼çš„ 30%+                              â”‚
â”‚                                                                  â”‚
â”‚  2027 å¹´                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  ğŸš€ KTLO è‡ªå‹•åŒ–åˆæ­¥å¯¦ç¾ï¼ˆ40-60% çš„ç¶­è­·ä»»å‹™è‡ªå‹•åŒ–ï¼‰              â”‚
â”‚  ğŸš€ Multi-Agent ç³»çµ±è™•ç†å¤§è¦æ¨¡é‡æ§‹                              â”‚
â”‚  ğŸš€ ã€ŒAI å·¥ç¨‹å¸«ã€æˆç‚ºæ­£å¼è·ä½                                   â”‚
â”‚  ğŸ”® Context å•é¡Œé€šé Subagents æ¶æ§‹æ ¹æœ¬è§£æ±º                     â”‚
â”‚  ğŸ”® é–‹ç™¼è€…è§’è‰²å¾ã€Œå¯«ç¨‹å¼ç¢¼ã€è½‰å‘ã€ŒæŒ‡å° AIã€                     â”‚
â”‚                                                                  â”‚
â”‚  âœ… = å·²å¯¦ç¾  â³ = é€²è¡Œä¸­  ğŸ“ˆ = é è¨ˆå¯¦ç¾  ğŸš€ = é‡å¤§çªç ´         â”‚
â”‚  ğŸ”® = ä¸ç¢ºå®šä½†å¯èƒ½                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.5.2 é–‹ç™¼è€…è§’è‰²çš„æ¼”è®Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é–‹ç™¼è€…è§’è‰²æ¼”è®Š                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  å‚³çµ±é–‹ç™¼è€…ï¼ˆ2020 å¹´ä¹‹å‰ï¼‰                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚  ä¸»è¦æ´»å‹•ï¼š                                                      â”‚
â”‚  â€¢ æ‰‹å‹•ç·¨å¯«ç¨‹å¼ç¢¼                    80%                        â”‚
â”‚  â€¢ é–±è®€æ–‡ä»¶å’Œå­¸ç¿’                    10%                        â”‚
â”‚  â€¢ ç¨‹å¼ç¢¼å¯©æŸ¥å’Œæºé€š                  10%                        â”‚
â”‚                                                                  â”‚
â”‚  AI è¼”åŠ©é–‹ç™¼è€…ï¼ˆ2023-2025ï¼‰                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚  ä¸»è¦æ´»å‹•ï¼š                                                      â”‚
â”‚  â€¢ èˆ‡ AI å”ä½œç·¨å¯«ç¨‹å¼ç¢¼              50%                        â”‚
â”‚  â€¢ å¯©æŸ¥ AI ç”Ÿæˆçš„ç¨‹å¼ç¢¼              25%                        â”‚
â”‚  â€¢ è¨­è¨ˆå’Œæ¶æ§‹æ±ºç­–                    15%                        â”‚
â”‚  â€¢ å­¸ç¿’å’Œæ¢ç´¢                        10%                        â”‚
â”‚                                                                  â”‚
â”‚  AI æ™‚ä»£é–‹ç™¼è€…ï¼ˆ2026-2027+ï¼‰                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚  ä¸»è¦æ´»å‹•ï¼š                                                      â”‚
â”‚  â€¢ è¨­è¨ˆ PROMPT.md å’Œæ”¶æ–‚æ¢ä»¶         30%                        â”‚
â”‚  â€¢ æ¶æ§‹å’Œç³»çµ±è¨­è¨ˆ                    25%                        â”‚
â”‚  â€¢ å¯©æŸ¥å’Œå“è³ªæŠŠé—œ                    20%                        â”‚
â”‚  â€¢ è™•ç† AI ç„¡æ³•è§£æ±ºçš„è¤‡é›œå•é¡Œ        15%                        â”‚
â”‚  â€¢ å­¸ç¿’æ–°å·¥å…·å’ŒæŠ€è¡“                  10%                        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  é—œéµæ´å¯Ÿ                                                â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  ã€Œä½ çš„åŒäº‹æœƒå–ä»£ä½ çš„å·¥ä½œï¼Œä¸æ˜¯ AIã€‚ã€                   â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  çœŸæ­£çš„é¢¨éšªä¸æ˜¯ AI å–ä»£é–‹ç™¼è€…ï¼Œè€Œæ˜¯ï¼š                    â”‚    â”‚
â”‚  â”‚  â€¢ æŒæ¡ AI å·¥å…·çš„é–‹ç™¼è€… vs ä¸æŒæ¡çš„é–‹ç™¼è€…                â”‚    â”‚
â”‚  â”‚  â€¢ æ•ˆç‡å·®è·å¯èƒ½é”åˆ° 5-10 å€                              â”‚    â”‚
â”‚  â”‚  â€¢ é€™æœƒæ”¹è®Šåœ˜éšŠçµ„æˆå’Œè–ªè³‡çµæ§‹                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12.6 æŒçºŒå­¸ç¿’è·¯å¾‘

### 12.6.1 åˆ†å±¤å­¸ç¿’è¨ˆåŠƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æŒçºŒå­¸ç¿’è·¯å¾‘                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  åŸºç¤å±¤ï¼ˆç«‹å³é–‹å§‹ï¼‰                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚                                                                  â”‚
â”‚  [ ] æŒæ¡æœ¬æ›¸ä»‹ç´¹çš„æ ¸å¿ƒæ¦‚å¿µ                                     â”‚
â”‚      â€¢ Context Window çš„æœ¬è³ª                                    â”‚
â”‚      â€¢ æ¨è«–è¿´åœˆçš„é‹ä½œæ–¹å¼                                       â”‚
â”‚      â€¢ äº”å¤§æ ¸å¿ƒå·¥å…·                                             â”‚
â”‚                                                                  â”‚
â”‚  [ ] å¯¦ä½œè‡³å°‘ä¸€å€‹ Ralph Loop å°ˆæ¡ˆ                               â”‚
â”‚      â€¢ é¸æ“‡ä¸€å€‹å¯æ©Ÿå™¨é©—è­‰çš„ä»»å‹™                                 â”‚
â”‚      â€¢ å¾ç°¡å–®çš„ Lint ä¿®å¾©é–‹å§‹                                   â”‚
â”‚      â€¢ è¨˜éŒ„è¿­ä»£æ¬¡æ•¸å’Œæˆæœ¬                                       â”‚
â”‚                                                                  â”‚
â”‚  [ ] å»ºç«‹å€‹äººçš„ PROMPT.md æ¨¡æ¿åº«                                â”‚
â”‚      â€¢ Bug ä¿®å¾©æ¨¡æ¿                                             â”‚
â”‚      â€¢ åŠŸèƒ½å¯¦ä½œæ¨¡æ¿                                             â”‚
â”‚      â€¢ é‡æ§‹æ¨¡æ¿                                                 â”‚
â”‚                                                                  â”‚
â”‚  é€²éšå±¤ï¼ˆ6-12 å€‹æœˆï¼‰                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚                                                                  â”‚
â”‚  [ ] æ·±å…¥å­¸ç¿’ Subagents æ¶æ§‹                                    â”‚
â”‚      â€¢ é–±è®€ Anthropic çš„ Multi-Agent è«–æ–‡                      â”‚
â”‚      â€¢ å¯¦é©— Claude çš„ Tool Use åŠŸèƒ½                            â”‚
â”‚      â€¢ å˜—è©¦å»ºæ§‹ç°¡å–®çš„å”èª¿å™¨                                     â”‚
â”‚                                                                  â”‚
â”‚  [ ] æ¢ç´¢ MCP å·¥å…·ç”Ÿæ…‹ç³»çµ±                                      â”‚
â”‚      â€¢ ä½¿ç”¨ç¾æœ‰çš„ MCP ä¼ºæœå™¨                                    â”‚
â”‚      â€¢ é–‹ç™¼è‡ªå·±çš„ MCP å·¥å…·                                      â”‚
â”‚      â€¢ ç†è§£ JSON-RPC å”è­°                                       â”‚
â”‚                                                                  â”‚
â”‚  [ ] åƒèˆ‡é–‹æº AI å·¥å…·å°ˆæ¡ˆ                                       â”‚
â”‚      â€¢ Claude Code ç›¸é—œå°ˆæ¡ˆ                                     â”‚
â”‚      â€¢ LangChain / LlamaIndex                                   â”‚
â”‚      â€¢ AutoGPT / AgentGPT                                       â”‚
â”‚                                                                  â”‚
â”‚  å‰æ²¿å±¤ï¼ˆæŒçºŒè¿½è¹¤ï¼‰                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚                                                                  â”‚
â”‚  [ ] é—œæ³¨ä¸»è¦ AI å…¬å¸çš„ç™¼å±•                                     â”‚
â”‚      â€¢ Anthropic: claude.ai/news                                â”‚
â”‚      â€¢ OpenAI: openai.com/blog                                  â”‚
â”‚      â€¢ Google DeepMind: deepmind.com/research                   â”‚
â”‚                                                                  â”‚
â”‚  [ ] ç ”ç©¶ Agentic AI çš„å­¸è¡“è«–æ–‡                                 â”‚
â”‚      â€¢ arXiv cs.AI, cs.CL åˆ†é¡                                  â”‚
â”‚      â€¢ ACL, NeurIPS, ICML æœƒè­°è«–æ–‡                              â”‚
â”‚                                                                  â”‚
â”‚  [ ] å¯¦é©—æ–°èˆˆçš„ AI ç·¨ç¢¼å·¥å…·                                     â”‚
â”‚      â€¢ ä¿æŒå°æ–°å·¥å…·çš„å¥½å¥‡å¿ƒ                                     â”‚
â”‚      â€¢ ä½†ä¸è¦ç›²ç›®è¿½æ–°                                           â”‚
â”‚      â€¢ ç†è§£åº•å±¤åŸç†æ¯”æœƒç”¨å·¥å…·æ›´é‡è¦                             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.6.2 æ¨è–¦è³‡æº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å­¸ç¿’è³‡æºæ¨è–¦                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  æ›¸ç±                                                            â”‚
â”‚  â”€â”€â”€â”€â”€                                                          â”‚
â”‚  â€¢ "Attention Is All You Need" - åŸå§‹ Transformer è«–æ–‡          â”‚
â”‚  â€¢ "Natural Language Processing with Transformers" (2022)       â”‚
â”‚  â€¢ "Designing Machine Learning Systems" (2022)                  â”‚
â”‚                                                                  â”‚
â”‚  ç·šä¸Šèª²ç¨‹                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚  â€¢ Stanford CS224N: NLP with Deep Learning                      â”‚
â”‚  â€¢ Anthropic's Constitutional AI æŠ€è¡“å ±å‘Š                       â”‚
â”‚  â€¢ fast.ai: Practical Deep Learning                             â”‚
â”‚                                                                  â”‚
â”‚  ç¤¾ç¾¤                                                            â”‚
â”‚  â”€â”€â”€â”€â”€                                                          â”‚
â”‚  â€¢ Hacker News (AI ç›¸é—œè¨è«–)                                    â”‚
â”‚  â€¢ Reddit: r/LocalLLaMA, r/MachineLearning                      â”‚
â”‚  â€¢ Twitter/X: @anthropiccorp, @sama, @ylecun                    â”‚
â”‚                                                                  â”‚
â”‚  æ’­å®¢                                                            â”‚
â”‚  â”€â”€â”€â”€â”€                                                          â”‚
â”‚  â€¢ Latent Space: AI Engineering                                 â”‚
â”‚  â€¢ Practical AI                                                 â”‚
â”‚  â€¢ The TWIML AI Podcast                                         â”‚
â”‚                                                                  â”‚
â”‚  å¯¦è¸å°ˆæ¡ˆ                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚  â€¢ å»ºç«‹è‡ªå·±çš„ Coding Agentï¼ˆä½¿ç”¨ Claude APIï¼‰                   â”‚
â”‚  â€¢ é–‹ç™¼ MCP ä¼ºæœå™¨ï¼ˆæ•´åˆè‡ªå·±å¸¸ç”¨çš„å·¥å…·ï¼‰                        â”‚
â”‚  â€¢ è²¢ç»é–‹æºå°ˆæ¡ˆï¼ˆClaude Code ç”Ÿæ…‹ç³»çµ±ï¼‰                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12.7 çµèªï¼šGo Forward and Build

æˆ‘å€‘åœ¨é€™æœ¬æ›¸çš„æ—…ç¨‹å³å°‡çµæŸï¼Œä½†ä½ çš„æ—…ç¨‹æ‰å‰›é–‹å§‹ã€‚

### 12.7.1 å›é¡§æˆ‘å€‘å­¸åˆ°äº†ä»€éº¼

**ç¬¬ä¸€éƒ¨åˆ†ï¼šèªçŸ¥é©å‘½**

æˆ‘å€‘æ‰“ç ´äº† AI ç·¨ç¢¼å·¥å…·çš„ç¥ç§˜é¢ç´—ã€‚åŸä¾†ï¼Œæ‰€æœ‰é€™äº›ã€Œç¥å¥‡ã€çš„å·¥å…·éƒ½æ˜¯ã€Œ300 è¡Œç¨‹å¼ç¢¼åœ¨è¿´åœˆä¸­é‹è¡Œ LLMã€ã€‚Context Window ä¸æ˜¯ç„¡é™çš„å°è©±è¨˜æ†¶ï¼Œè€Œæ˜¯æœ‰é™çš„è¨˜æ†¶é«”é™£åˆ—ã€‚ä¸åŒçš„ LLM æœ‰ä¸åŒçš„ç‰¹æ€§ï¼Œé©åˆä¸åŒçš„ä»»å‹™ã€‚

**ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒæŠ€èƒ½**

æˆ‘å€‘å­¸æœƒäº†æ¨è«–è¿´åœˆçš„é‹ä½œæ–¹å¼â€”â€”é€™æ˜¯ coding agent çš„å¿ƒè‡Ÿã€‚äº”å¤§æ ¸å¿ƒå·¥å…·ï¼ˆReadã€Listã€Bashã€Editã€Searchï¼‰è®“ agent èƒ½æ„ŸçŸ¥å’Œæ“ä½œç¨‹å¼ç¢¼ã€‚MCP æä¾›äº†å‹•æ…‹å·¥å…·æ“´å±•çš„èƒ½åŠ›ï¼Œè®“æˆ‘å€‘ä¸å¿…ç‚ºæ¯å€‹æ–°åŠŸèƒ½ä¿®æ”¹æ ¸å¿ƒç¨‹å¼ç¢¼ã€‚

**ç¬¬ä¸‰éƒ¨åˆ†ï¼šé€²éšæ¨¡å¼**

Ralph Wiggum Loop å±•ç¤ºäº†å¦‚ä½•è®“ agent è‡ªä¸»è¿­ä»£ç›´åˆ°ä»»å‹™å®Œæˆã€‚æˆ‘å€‘å­¸æœƒäº†å¦‚ä½•è¨­è¨ˆæ”¶æ–‚æ¢ä»¶ã€å¦‚ä½•åˆ©ç”¨ Git ä½œç‚ºè¨˜æ†¶å±¤ã€å¦‚ä½•è™•ç†ã€Œå¡ä½ã€çš„æƒ…æ³ã€‚å®˜æ–¹ Plugin èˆ‡åŸå§‹å¯¦ç¾çš„æ¬Šè¡¡è®“æˆ‘å€‘ç†è§£äº†å®‰å…¨æ€§èˆ‡éˆæ´»æ€§çš„å–æ¨ã€‚

**ç¬¬å››éƒ¨åˆ†ï¼šå¯¦æˆ°æ‡‰ç”¨**

æˆæœ¬ç¶“æ¿Ÿå­¸å¹«åŠ©æˆ‘å€‘åšå‡ºæ­£ç¢ºçš„æ±ºç­–â€”â€”ä»€éº¼æ™‚å€™ç”¨ Ralph Loopï¼Œä»€éº¼æ™‚å€™ä¸ç”¨ã€‚ä¼æ¥­ç´šæ¨¡å¼å±•ç¤ºäº†å¦‚ä½•åœ¨å¤§è¦æ¨¡ç’°å¢ƒä¸­éƒ¨ç½²é€™äº›æŠ€è¡“ã€‚æœ€å¾Œï¼Œæˆ‘å€‘å±•æœ›äº†æœªä¾†â€”â€”Subagentsã€KTLO è‡ªå‹•åŒ–ã€Human-on-the-Loopã€‚

### 12.7.2 æœ€é‡è¦çš„æ´å¯Ÿ

å¦‚æœè¦å¾é€™æœ¬æ›¸ä¸­åªè¨˜ä½ä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯ï¼š

> **The tech industry's conveyor belt continues to move forward.**
>
> æŠ€è¡“ç”¢æ¥­çš„å‚³é€å¸¶æŒçºŒå‰é€²ã€‚åœ¨ 2026 å¹´ï¼Œç†è§£é€™äº›åŸºç¤åŸç†çš„é–‹ç™¼è€…ï¼Œå°‡èƒ½é§•é¦­è€Œéè¢«å‹•æ¥å— AI å·¥å…·çš„æ¼”é€²ã€‚

é€™ä¸æ˜¯å¨è„…ï¼Œè€Œæ˜¯æ©Ÿæœƒã€‚é‚£äº›ç†è§£ Context æœ¬è³ªçš„é–‹ç™¼è€…ï¼Œèƒ½æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ä»»ä½• AI å·¥å…·ã€‚é‚£äº›æŒæ¡æ¨è«–è¿´åœˆçš„é–‹ç™¼è€…ï¼Œèƒ½å¿«é€Ÿé©æ‡‰æ–°å·¥å…·çš„å‡ºç¾ã€‚é‚£äº›å»ºç«‹äº† PROMPT.md æ¨¡æ¿åº«çš„é–‹ç™¼è€…ï¼Œèƒ½å°‡ç¶“é©—è½‰åŒ–ç‚ºå¯é‡è¤‡ä½¿ç”¨çš„è³‡ç”¢ã€‚

### 12.7.3 å¾æ¶ˆè²»è€…åˆ°ç”Ÿç”¢è€…

é€™æœ¬æ›¸çš„ç›®æ¨™æ˜¯å°‡ä½ å¾ AI å·¥å…·çš„è¢«å‹•æ¶ˆè²»è€…ï¼Œè½‰è®Šç‚ºèƒ½å¤ ç†è§£ã€å»ºæ§‹ã€ç”šè‡³å‰µæ–°çš„ç”Ÿç”¢è€…ã€‚

**æ¶ˆè²»è€…æ€ç¶­**ï¼š
- ã€Œé€™å€‹ AI å·¥å…·å¥½ç¥å¥‡ï¼ã€
- ã€Œå®ƒæ€éº¼åšåˆ°çš„ï¼Ÿã€
- ã€Œä¸‹ä¸€å€‹æ›´å¥½çš„å·¥å…·æ˜¯ä»€éº¼ï¼Ÿã€

**ç”Ÿç”¢è€…æ€ç¶­**ï¼š
- ã€Œé€™åªæ˜¯æ¨è«–è¿´åœˆåŠ å·¥å…·èª¿ç”¨ã€‚ã€
- ã€Œæˆ‘å¯ä»¥å»ºæ§‹è‡ªå·±çš„ç‰ˆæœ¬ã€‚ã€
- ã€Œæˆ‘å¯ä»¥å„ªåŒ–é€™å€‹æµç¨‹ã€‚ã€

ç•¶ä½ çœ‹åˆ°ä¸€å€‹æ–°çš„ AI ç·¨ç¢¼å·¥å…·æ™‚ï¼Œä½ ç¾åœ¨æ‡‰è©²èƒ½å¤ å•ï¼š
- å®ƒçš„ Harness Prompt è¨­è¨ˆå¾—å¦‚ä½•ï¼Ÿ
- å®ƒä½¿ç”¨ä»€éº¼æ¨£çš„å·¥å…·ï¼Ÿ
- å®ƒçš„æ”¶æ–‚æ¢ä»¶æ˜¯ä»€éº¼ï¼Ÿ
- å®ƒå¦‚ä½•è™•ç† Context æº¢å‡ºï¼Ÿ

é€™äº›å•é¡Œçš„ç­”æ¡ˆï¼Œæ±ºå®šäº†å·¥å…·çš„èƒ½åŠ›é‚Šç•Œã€‚

### 12.7.4 Go Forward and Build

æŠ€è¡“æœƒæŒçºŒæ¼”é€²ã€‚ä»Šå¤©æˆ‘å€‘è«‡è«–çš„ Claude Sonnet å¯èƒ½æœƒè¢«æ›´å¼·å¤§çš„æ¨¡å‹å–ä»£ã€‚200K Context Window å¯èƒ½æœƒè®Šæˆ 2Mã€‚æ–°çš„æ¶æ§‹å¯èƒ½æœƒå‡ºç¾ã€‚

ä½†åŸºç¤åŸç†ä¸æœƒæ”¹è®Šï¼š
- Token ä»ç„¶æ˜¯åŸºæœ¬å–®ä½
- Context ä»ç„¶æ˜¯æœ‰é™è³‡æº
- æ¨è«–è¿´åœˆä»ç„¶æ˜¯æ ¸å¿ƒæ©Ÿåˆ¶
- å¯æ©Ÿå™¨é©—è­‰ä»ç„¶æ˜¯è‡ªå‹•åŒ–çš„å‰æ

ä½ å·²ç¶“æŒæ¡äº†é€™äº›åŸºç¤ã€‚å‰©ä¸‹çš„ï¼Œå°±æ˜¯å¯¦è¸ã€‚

**Go forward and build.**

å¾ä¸€å€‹å°å°ˆæ¡ˆé–‹å§‹ã€‚é¸æ“‡ä¸€å€‹å¯æ©Ÿå™¨é©—è­‰çš„ä»»å‹™ã€‚å¯«ä¸€å€‹ PROMPT.mdã€‚é‹è¡Œ Ralph Loopã€‚è§€å¯Ÿçµæœã€‚è¿­ä»£æ”¹é€²ã€‚

ç„¶å¾Œï¼Œåˆ†äº«ä½ çš„ç¶“é©—ã€‚

æŠ€è¡“ç¤¾ç¾¤çš„é€²æ­¥ï¼Œä¾†è‡ªæ¯ä¸€å€‹äººçš„è²¢ç»ã€‚ä½ çš„ PROMPT.md æ¨¡æ¿ã€ä½ çš„å„ªåŒ–æŠ€å·§ã€ä½ è¸©éçš„å‘å’Œæ‰¾åˆ°çš„è§£æ±ºæ–¹æ¡ˆâ€”â€”é€™äº›éƒ½æ˜¯å¯¶è²´çš„çŸ¥è­˜ã€‚

æ­¡è¿ä¾†åˆ° AI æ™‚ä»£çš„é–‹ç™¼è€…ä¸–ç•Œã€‚

---

## 12.8 æœ¬ç« å°çµ

æœ¬ç« ä½œç‚ºå…¨æ›¸çš„çµå°¾ï¼Œæˆ‘å€‘å±•æœ›äº† AI ç·¨ç¢¼å·¥å…·çš„æœªä¾†ï¼š

**Context æº¢å‡ºçš„è§£æ±ºæ–¹æ¡ˆ**ï¼š
- æ›´å¤§çš„ Context ä¸æ˜¯ç­”æ¡ˆ
- Subagents æ¶æ§‹æ˜¯æ­£ç¢ºæ–¹å‘
- åˆ†è€Œæ²»ä¹‹ï¼Œè€Œéç¡¬æ’

**KTLO è‡ªå‹•åŒ–**ï¼š
- Roomba å¤¢æƒ³çš„é¡˜æ™¯
- æŒçºŒç›£æ§ã€è‡ªå‹•ä¿®å¾©
- æ¼¸é€²å¼ä¿¡ä»»æ¨¡å‹

**äººæ©Ÿå”ä½œæ¨¡å¼**ï¼š
- Human-in-the-Loop vs Human-on-the-Loop
- å¾å¯©æ‰¹åˆ°ç›£ç£çš„è½‰è®Š
- ä¿¡ä»»æ˜¯æ¼¸é€²ç´¯ç©çš„

**æœªä¾†æŠ€è¡“åœ°åœ–**ï¼š
- 2025-2027 çš„é æ¸¬
- é–‹ç™¼è€…è§’è‰²çš„æ¼”è®Š
- æŒçºŒå­¸ç¿’çš„è·¯å¾‘

**æœ€çµ‚æ´å¯Ÿ**ï¼š
- å¾æ¶ˆè²»è€…åˆ°ç”Ÿç”¢è€…
- åŸºç¤åŸç†ä¸æœƒæ”¹è®Š
- Go Forward and Build

---

## ç·´ç¿’é¡Œ

### ç·´ç¿’ 12.1ï¼šSubagent è¨­è¨ˆ

è¨­è¨ˆä¸€å€‹ Subagent ç³»çµ±ä¾†è™•ç†ã€Œé‡æ§‹ä¸€å€‹ 50 è¬è¡Œçš„ Python å°ˆæ¡ˆã€ä»»å‹™ã€‚

**è¦æ±‚**ï¼š
1. å®šç¾©ä¸» Agent çš„è·è²¬
2. è¦åŠƒ Subagent çš„é¡å‹å’Œå°ˆæ¥­
3. è¨­è¨ˆ Subagent ä¹‹é–“çš„é€šè¨Šå”è­°
4. è€ƒæ…®å¦‚ä½•è™•ç†è·¨æ¨¡çµ„ä¾è³´

### ç·´ç¿’ 12.2ï¼šä¿¡ä»»æ¨¡å‹

è¨­è¨ˆä¸€å€‹ä¿¡ä»»ç®¡ç†ç³»çµ±ï¼Œè¿½è¹¤ AI Agent åœ¨ä¸åŒä»»å‹™é¡å‹ä¸Šçš„è¡¨ç¾ã€‚

**è¦æ±‚**ï¼š
1. å®šç¾©ä¿¡ä»»ç­‰ç´šå’Œæ™‰å‡æ¢ä»¶
2. è¨­è¨ˆçµ±è¨ˆè¿½è¹¤æ©Ÿåˆ¶
3. è™•ç†ä¿¡ä»»é™ç´šï¼ˆç•¶å‡ºç¾å¤±æ•—æ™‚ï¼‰
4. è€ƒæ…®ä»»å‹™è¤‡é›œåº¦çš„å½±éŸ¿

### ç·´ç¿’ 12.3ï¼šå­¸ç¿’è¨ˆåŠƒ

åˆ¶å®šä½ å€‹äººçš„ 6 å€‹æœˆ AI ç·¨ç¢¼æŠ€èƒ½å­¸ç¿’è¨ˆåŠƒã€‚

**è¦æ±‚**ï¼š
1. è©•ä¼°ä½ ç›®å‰çš„èƒ½åŠ›æ°´å¹³
2. è¨­å®šå…·é«”ã€å¯è¡¡é‡çš„ç›®æ¨™
3. é¸æ“‡è¦æ·±å…¥å­¸ç¿’çš„é ˜åŸŸ
4. è¦åŠƒæ¯é€±çš„å­¸ç¿’æ™‚é–“åˆ†é…

---

## å»¶ä¼¸é–±è®€

1. **Multi-Agent ç³»çµ±**
   - "Multi-Agent Systems: A Modern Approach" by Wooldridge (2009)
   - "Autonomous Agents and Multi-Agent Systems" journal

2. **AI å®‰å…¨èˆ‡å°é½Š**
   - "Constitutional AI" by Anthropic (2022)
   - "AI Alignment Research Overview" by MIRI

3. **æœªä¾†è¶¨å‹¢**
   - "State of AI Report" (annual)
   - "AI Index Report" by Stanford HAI (annual)
   - "Emerging Technology Hype Cycle" by Gartner

4. **å“²å­¸èˆ‡å€«ç†**
   - "Life 3.0" by Max Tegmark (2017)
   - "Human Compatible" by Stuart Russell (2019)

---

## å…¨æ›¸ç¸½çµ

æ­å–œä½ å®Œæˆäº†é€™æœ¬æ›¸çš„æ—…ç¨‹ï¼

åœ¨éå»çš„ 12 ç« ä¸­ï¼Œæˆ‘å€‘ä¸€èµ·ï¼š

1. **æ­é–‹ç¥ç§˜é¢ç´—**ï¼šç†è§£ AI ç·¨ç¢¼å·¥å…·çš„æœ¬è³ª
2. **æŒæ¡æ ¸å¿ƒæ¦‚å¿µ**ï¼šContext Windowã€Tokenã€æ¨è«–è¿´åœˆ
3. **å­¸ç¿’å¯¦ç”¨æŠ€èƒ½**ï¼šäº”å¤§å·¥å…·ã€MCPã€PROMPT.md è¨­è¨ˆ
4. **æ¢ç´¢é€²éšæ¨¡å¼**ï¼šRalph Loopã€æ”¶æ–‚æ¢ä»¶ã€æˆæœ¬å„ªåŒ–
5. **å±•æœ›æœªä¾†**ï¼šSubagentsã€KTLO è‡ªå‹•åŒ–ã€Human-on-the-Loop

è¨˜ä½ï¼Œé€™ä¸æ˜¯çµæŸï¼Œè€Œæ˜¯é–‹å§‹ã€‚æŠ€è¡“æœƒæŒçºŒæ¼”é€²ï¼Œä½†ä½ å·²ç¶“æŒæ¡äº†æœ€é‡è¦çš„åŸºç¤ã€‚

**Go forward and build.**

---

## é™„éŒ„

### A. è©å½™è¡¨

| è¡“èª | è‹±æ–‡ | å®šç¾© |
|------|------|------|
| Context Window | Context Window | LLM èƒ½è™•ç†çš„æœ€å¤§ Token åºåˆ—é•·åº¦ |
| Token | Token | æ–‡å­—çš„æœ€å°è™•ç†å–®ä½ |
| æ¨è«–è¿´åœˆ | Inference Loop | Agent çš„æ ¸å¿ƒé‹è¡Œæ©Ÿåˆ¶ |
| Ralph Loop | Ralph Wiggum Loop | è‡ªä¸»è¿­ä»£ç›´åˆ°æ”¶æ–‚çš„æ¨¡å¼ |
| MCP | Model Context Protocol | å‹•æ…‹å·¥å…·æ“´å±•å”è­° |
| KTLO | Keep The Lights On | ç¶­è­·ç³»çµ±é‹ä½œçš„æ—¥å¸¸ä»»å‹™ |
| Subagent | Subagent | å°ˆé–€è™•ç†å­ä»»å‹™çš„ç¨ç«‹ Agent |
| HITL | Human-in-the-Loop | äººåœ¨è¿´åœˆä¸­ï¼ˆæ¯æ­¥å¯©æ‰¹ï¼‰ |
| HOTL | Human-on-the-Loop | äººåœ¨è¿´åœˆä¸Šï¼ˆç›£ç£å¼ï¼‰ |

### B. ç¨‹å¼ç¢¼ç¯„ä¾‹ç´¢å¼•

| ç« ç¯€ | ç¯„ä¾‹ | èªè¨€ |
|------|------|------|
| 4 | æ¨è«–è¿´åœˆå¯¦ç¾ | Go |
| 5 | äº”å¤§æ ¸å¿ƒå·¥å…· | Go |
| 6 | MCP ä¼ºæœå™¨ | Go |
| 7 | Ralph Loop å¯¦ç¾ | Go |
| 8 | Stop Hook æ©Ÿåˆ¶ | Go |
| 9 | A/B æ¸¬è©¦æ¡†æ¶ | Go |
| 10 | æˆæœ¬ç›£æ§å™¨ | Go |
| 11 | å¤œé–“å·¥å» ç³»çµ± | Go |
| 12 | Subagent å”èª¿å™¨ | Go |

### C. PROMPT.md æ¨¡æ¿é€ŸæŸ¥

1. **Bug ä¿®å¾©**ï¼šchapter-09, section-9.6.1
2. **åŠŸèƒ½å¯¦ä½œ**ï¼šchapter-09, section-9.6.2
3. **ç¨‹å¼ç¢¼é‡æ§‹**ï¼šchapter-09, section-9.6.3
4. **æ¸¬è©¦æ’°å¯«**ï¼šchapter-09, section-9.6.4
5. **æ–‡ä»¶ç”Ÿæˆ**ï¼šchapter-09, section-9.6.5
6. **æ•ˆèƒ½å„ªåŒ–**ï¼šchapter-09, section-9.6.6

### D. å¸¸è¦‹å•é¡Œ

**Q: Ralph Loop æœƒå–ä»£é–‹ç™¼è€…å—ï¼Ÿ**

A: ä¸æœƒã€‚Ralph Loop é©åˆå¯æ©Ÿå™¨é©—è­‰çš„é‡è¤‡æ€§ä»»å‹™ã€‚å‰µæ„å·¥ä½œã€æ¶æ§‹è¨­è¨ˆã€éœ€æ±‚åˆ†æä»ç„¶éœ€è¦äººé¡ã€‚

**Q: æˆ‘æ‡‰è©²å…ˆå­¸å“ªå€‹ AI ç·¨ç¢¼å·¥å…·ï¼Ÿ**

A: ä»»ä½•ä¸»æµå·¥å…·éƒ½å¯ä»¥é–‹å§‹ã€‚é‡è¦çš„æ˜¯ç†è§£åº•å±¤åŸç†ï¼Œè€Œéä¾è³´ç‰¹å®šå·¥å…·ã€‚

**Q: å¦‚ä½•èªªæœåœ˜éšŠæ¡ç”¨é€™äº›æŠ€è¡“ï¼Ÿ**

A: å¾å°è¦æ¨¡ã€ä½é¢¨éšªçš„ä»»å‹™é–‹å§‹ã€‚ç”¨æ•¸æ“šï¼ˆæˆæœ¬ç¯€çœã€æ™‚é–“ç¯€çœï¼‰èªªè©±ã€‚

---

**æ„Ÿè¬é–±è®€ï¼**

> ã€Œä½ çš„åŒäº‹æœƒå–ä»£ä½ çš„å·¥ä½œï¼Œä¸æ˜¯ AIã€‚æŠ•è³‡æ–¼ç†è§£é€™äº›åŸºç¤åŸç†ï¼Œæ˜¯è·æ¶¯ç™¼å±•çš„æœ€ä½³ä¿éšªã€‚ã€
> â€” Geoffrey Huntley

---

*Context Engineering: AI æ™‚ä»£çš„é–‹ç™¼è€…ç”Ÿå­˜æŒ‡å—*
*å®Œ*
