# RAG in Action: 打造精準的企業級 AI 搜尋系統
## 從零構建可持續優化的知識檢索引擎

> 一本 Manning "in Action" 風格的企業級 RAG 系統開發實戰指南

---

## 書籍資訊

**書名（中文）：** RAG in Action: 打造精準的企業級 AI 搜尋系統
**副標題：** 從零構建可持續優化的知識檢索引擎
**風格定位：** Manning "in Action" 系列
**目標讀者：** 後端工程師、資料科學家、技術主管、AI 應用開發者

---

## 本書特色

- **專案驅動學習**：貫穿全書的核心專案「AskBot」——企業客服知識庫 AI 助理
- **漸進式深入**：從關鍵字搜尋 → 語義搜尋 → RAG → 精準優化 → 自我學習
- **生產級代碼**：所有範例都可直接部署到生產環境
- **徹底解決痛點**：專注解決「搜尋不準」這個核心問題
- **可量化改進**：建立評估框架，科學地追蹤每次優化的效果

---

## 核心專案：AskBot

**專案目標：** 為一家擁有 5000+ 份技術文件的 SaaS 公司，打造一個能精準回答客戶問題的 AI 助理。

**專案演進路徑：**
```
基礎版本 → 語義搜尋版本 → RAG 系統 → 精準優化版本 → 自我學習版本
(關鍵字搜尋)  (Embedding)    (檢索+生成)  (Re-Ranking)   (使用者回饋)
```

**最終產出物：**
- 完整的 RAG 系統原始碼（Python + FastAPI）
- Docker Compose 部署設定檔
- 評估測試集與自動化測試腳本
- 監控儀表板（追蹤精準度指標）
- 使用者回饋學習機制

---

## 全書架構

### 第一部：基礎建設（第 1-3 章）
**從傳統搜尋到語義理解**

- [ ] **第 1 章：傳統資訊檢索的極限——為何關鍵字搜尋不夠用？**
  - 實作 BM25 關鍵字搜尋引擎
  - 揭露「詞彙鴻溝」問題
  - TF-IDF 與 BM25 數學原理

- [ ] **第 2 章：語義搜尋的誕生——Embedding 如何理解「意思」？**
  - Sentence Transformers 實作
  - Embedding 視覺化工具
  - 向量資料庫（Qdrant）部署

- [ ] **第 3 章：RAG 的最小可行版本——5 行程式碼實現檢索增強生成**
  - 端到端 RAG Pipeline
  - Prompt Engineering 基礎
  - 來源追蹤與可信度

### 第二部：精準度工程（第 4-7 章）
**徹底解決「搜不準」的問題**

- [ ] **第 4 章：Chunking 策略——切割文件的藝術與科學**
  - 5 種 Chunking 策略實驗
  - 固定大小 vs 語義切割
  - Chunking 決策樹

- [ ] **第 5 章：Embedding 模型選型——不是越大越好**
  - 10 個模型的標準化評估
  - 精準度、速度、成本三角權衡
  - 模型評估儀表板

- [ ] **第 6 章：Re-Ranking——二階段檢索的威力**
  - Cross-Encoder Re-Ranker 實作
  - 二階段檢索架構設計
  - 成本效益量化分析

- [ ] **第 7 章：Hybrid Search——融合關鍵字與語義的最佳實踐**
  - BM25 + Vector Search 混合檢索
  - 分數融合與正規化
  - Alpha 參數系統化調優

### 第三部：生產級系統（第 8-10 章）
**從原型到可部署的企業方案**

- [ ] **第 8 章：Prompt Engineering for RAG——讓 LLM 產生更可靠的答案**
  - 5 種 Prompt 範本設計
  - Prompt A/B 測試框架
  - 幻覺檢測與減少

- [ ] **第 9 章：監控與可觀測性——你無法改進你無法衡量的東西**
  - RAG 關鍵指標定義
  - Grafana 監控儀表板
  - 效能與成本告警

- [ ] **第 10 章：部署架構——從單機到分散式**
  - 高可用架構設計
  - 快取策略（Redis）
  - Kubernetes 部署與 HPA

### 第四部：持續優化（第 11-13 章）
**打造會自我學習的 AI 搜尋系統**

- [ ] **第 11 章：使用者回饋收集——讓系統越用越聰明**
  - 多層級回饋機制
  - 回饋標註 UI 設計
  - 回饋驅動的改進流程

- [ ] **第 12 章：自動化評估與 A/B 測試——科學化的系統優化**
  - 標準化測試集格式
  - 多維度自動化評估
  - 統計顯著性檢驗

- [ ] **第 13 章：持續學習 Pipeline——讓系統自動進化**
  - 自動重訓練流程（Airflow）
  - 灰度發布機制
  - 模型版本控制

---

## 專案結構

```
rag-in-action/
├── README.md                    # 本文件
├── manuscript/                 # 書稿內容
│   └── chapters/              # 各章節內容
│       ├── preface.md         # 前言
│       ├── chapter-01.md      # 第 1 章
│       ├── chapter-02.md      # 第 2 章
│       ├── ...
│       └── chapter-13.md      # 第 13 章
├── code-examples/             # 完整可運行的程式碼範例
│   ├── chapter-01/            # BM25 搜尋引擎
│   ├── chapter-02/            # Embedding 與向量資料庫
│   ├── chapter-03/            # RAG Pipeline
│   ├── chapter-04/            # Chunking 策略
│   ├── chapter-05/            # Embedding 模型評估
│   ├── chapter-06/            # Re-Ranking Pipeline
│   ├── chapter-07/            # Hybrid Search
│   ├── chapter-08/            # Prompt 範本庫
│   ├── chapter-09/            # 監控系統
│   ├── chapter-10/            # 部署設定
│   ├── chapter-11/            # 回饋收集系統
│   ├── chapter-12/            # 評估框架
│   └── chapter-13/            # 持續學習 Pipeline
├── diagrams/                  # 技術圖表與架構圖
├── resources/                 # 補充資源
│   └── test-sets/            # 評估測試資料集
└── planning/                  # 寫作計畫與進度追蹤
```

---

## 當前進度

### 總計進度
- **已完成**: 0 章
- **內容產出**: 0 KB
- **程式碼**: 0 行
- **完成度**: 0% (0/13 章)

### 待完成章節
- [ ] 第 1-3 章（基礎建設篇）
- [ ] 第 4-7 章（精準度工程篇）
- [ ] 第 8-10 章（生產級系統篇）
- [ ] 第 11-13 章（持續優化篇）

---

## 目標讀者

**你是：**
- **後端工程師**，想為產品加入 AI 搜尋能力
- **資料科學家**，需要將 RAG 研究落地到生產環境
- **技術主管**，評估 RAG 技術可行性與投資報酬率
- **AI 應用開發者**，想深入理解如何優化檢索精準度

**你不需要：**
- 深厚的機器學習背景（但要懂 Python）
- 昂貴的 GPU 資源（我們從 CPU 友善的方案開始）
- 完美的資料集（我們會教你處理真實世界的髒資料）

---

## 技術棧

- **語言**: Python 3.9+
- **Web 框架**: FastAPI
- **Embedding**: Sentence Transformers
- **向量資料庫**: Qdrant
- **LLM**: Claude API
- **快取**: Redis
- **監控**: Prometheus, Grafana
- **部署**: Docker, Kubernetes
- **工作流程編排**: Airflow
- **測試**: pytest

---

## 預期成果

### 讀者完成本書後將能夠：
- 從零構建生產級 RAG 系統
- 量化評估與優化檢索精準度
- 部署到 Kubernetes 並建立監控體系
- 整合使用者回饋，建立持續學習流程

### 關鍵技術能力：
- 理解 RAG 的完整架構與最佳實踐
- 掌握 Chunking、Re-Ranking、Hybrid Search 等優化技術
- 建立自動化評估框架（Precision@K、MRR、幻覺檢測）
- 設計可擴展的企業級 AI 搜尋系統

---

## 寫作時程

| 階段 | 時間 | 產出 |
|------|------|------|
| 第一階段：基礎建設篇 | Month 1-2 | 第 1-3 章 |
| 第二階段：精準度工程篇 | Month 2-3 | 第 4-7 章 |
| 第三階段：生產級系統篇 | Month 3-4 | 第 8-10 章 |
| 第四階段：持續優化篇 | Month 4-5 | 第 11-13 章 |
| 第五階段：校對與出版 | Month 5-6 | 全書校對 |

---

## 授權

本書內容為出版前的草稿，版權所有。未經授權，請勿複製或傳播。

---

**最後更新：2026-01-17**
