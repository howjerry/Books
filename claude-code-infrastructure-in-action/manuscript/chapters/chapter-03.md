# ç¬¬ 3 ç« ï¼šçªç ´ä¸Šä¸‹æ–‡é™åˆ¶çš„æ¨¡çµ„åŒ–ç­–ç•¥

> **æœ¬ç« ç›®æ¨™**
> åœ¨æœ¬ç« çµæŸæ™‚ï¼Œä½ å°‡èƒ½å¤ ç®¡ç† 50+ æŠ€èƒ½çš„å¤§å‹æŠ€èƒ½åº«ï¼Œé€šéåˆ†å±¤æ¶æ§‹å’Œå‹•æ…‹è¼‰å…¥ç­–ç•¥ï¼Œåœ¨ Claude çš„ 200K tokens ä¸Šä¸‹æ–‡é™åˆ¶å…§æœ€å¤§åŒ–é–‹ç™¼æ•ˆç‡ã€‚

## 3.1 å•é¡Œï¼šç•¶æŠ€èƒ½åº«æˆé•·åˆ° 50+ æŠ€èƒ½æ™‚

å…­å€‹æœˆå¾Œï¼ŒSarah çš„åœ˜éšŠå·²ç¶“å»ºç«‹äº†ä¸€å€‹ä»¤äººå°è±¡æ·±åˆ»çš„æŠ€èƒ½åº«ï¼š

```
.claude/skills/
â”œâ”€â”€ backend-dev-guidelines/      # 12 å€‹è³‡æºæª”æ¡ˆ
â”œâ”€â”€ frontend-dev-guidelines/     # 10 å€‹è³‡æºæª”æ¡ˆ
â”œâ”€â”€ database-design/             # 8 å€‹è³‡æºæª”æ¡ˆ
â”œâ”€â”€ api-security/                # 15 å€‹è³‡æºæª”æ¡ˆ
â”œâ”€â”€ performance-tuning/          # 12 å€‹è³‡æºæª”æ¡ˆ
â”œâ”€â”€ microservices-patterns/      # 20 å€‹è³‡æºæª”æ¡ˆ
â”œâ”€â”€ devops-practices/            # 18 å€‹è³‡æºæª”æ¡ˆ
â”œâ”€â”€ testing-strategies/          # 14 å€‹è³‡æºæª”æ¡ˆ
... (é‚„æœ‰ 45 å€‹æŠ€èƒ½)
```

**ç¸½è¨ˆ**ï¼š53 å€‹æŠ€èƒ½ï¼Œ612 å€‹è³‡æºæª”æ¡ˆï¼Œç´„ 250,000 è¡Œå…§å®¹ã€‚

**ä¸‹åˆ 3:00** - æ€§èƒ½å•é¡Œé–‹å§‹å‡ºç¾

Mikeï¼ˆDevOps å·¥ç¨‹å¸«ï¼‰æ³¨æ„åˆ° Claude Code çš„å›æ‡‰è®Šæ…¢äº†ï¼š

```
ä½¿ç”¨è€…æç¤º: "å¹«æˆ‘å¯¦ä½œä¸€å€‹æ–°çš„ API endpoint"

è¼‰å…¥æŠ€èƒ½:
- backend-dev-guidelines (è¼‰å…¥ä¸­...)
- api-security (è¼‰å…¥ä¸­...)
- database-design (è¼‰å…¥ä¸­...)
- testing-strategies (è¼‰å…¥ä¸­...)
- performance-tuning (è¼‰å…¥ä¸­...)
...

ç­‰å¾…æ™‚é–“: 8-12 ç§’
Claude å›æ‡‰: "æŠ±æ­‰ï¼Œä¸Šä¸‹æ–‡å·²æ¥è¿‘é™åˆ¶..."
```

**å•é¡Œåˆ†æ**ï¼š

1. **ä¸Šä¸‹æ–‡çˆ†ç‚¸** â€¹1â€º
   - æ¯å€‹æŠ€èƒ½å¹³å‡ 5,000 tokens
   - åŒæ™‚æ¿€æ´» 10 å€‹æŠ€èƒ½ = 50,000 tokens
   - åŠ ä¸Šå°è©±æ­·å² = è¶…é 200K tokens é™åˆ¶

2. **ç„¡å·®åˆ¥è¼‰å…¥** â€¹2â€º
   - ç³»çµ±ä¸çŸ¥é“å“ªäº›æŠ€èƒ½æ˜¯ã€Œå¿…é ˆã€çš„
   - æ‰€æœ‰ç›¸é—œæŠ€èƒ½éƒ½è¢«è¼‰å…¥
   - å¤§é‡ç„¡é—œå…§å®¹ä½”ç”¨ä¸Šä¸‹æ–‡

3. **ç¼ºä¹å„ªå…ˆç´š** â€¹3â€º
   - åŸºç¤æŠ€èƒ½å’Œé€²éšæŠ€èƒ½æ··åœ¨ä¸€èµ·
   - ç„¡æ³•å€åˆ†ã€Œæ ¸å¿ƒã€vsã€Œè£œå……ã€çŸ¥è­˜

4. **ä¾è³´é—œä¿‚æ··äº‚** â€¹4â€º
   - æŠ€èƒ½ A å¼•ç”¨æŠ€èƒ½ B çš„å…§å®¹
   - å¾ªç’°ä¾è³´å°è‡´é‡è¤‡è¼‰å…¥
   - ç„¡æ³•è¿½è¹¤æŠ€èƒ½é–“çš„é—œä¿‚

---

## 3.2 è§£æ±ºæ–¹æ¡ˆï¼šåˆ†å±¤æŠ€èƒ½æ¶æ§‹

### 3.2.1 ä¸‰å±¤æŠ€èƒ½æ¨¡å‹

```mermaid
graph TB
    subgraph "Layer 1: åŸºç¤å±¤ (Foundation)"
        A[coding-standards]
        B[typescript-basics]
        C[git-workflow]
    end

    subgraph "Layer 2: å°ˆæ¥­å±¤ (Domain)"
        D[backend-dev-guidelines]
        E[frontend-dev-guidelines]
        F[database-design]
    end

    subgraph "Layer 3: é€²éšå±¤ (Advanced)"
        G[microservices-patterns]
        H[performance-tuning]
        I[security-hardening]
    end

    A --> D
    A --> E
    B --> D
    B --> E
    D --> G
    E --> G
    F --> H

    style A fill:#c8e6c9
    style B fill:#c8e6c9
    style C fill:#c8e6c9
    style D fill:#fff3e0
    style E fill:#fff3e0
    style F fill:#fff3e0
    style G fill:#ffcdd2
    style H fill:#ffcdd2
    style I fill:#ffcdd2
```

**Layer 1ï¼šåŸºç¤å±¤ï¼ˆFoundationï¼‰** â€¹1â€º
- **ç‰¹å¾µ**ï¼šåœ˜éšŠé€šç”¨è¦ç¯„ï¼Œé©ç”¨æ–¼æ‰€æœ‰å°ˆæ¡ˆ
- **å¤§å°**ï¼šæ¯å€‹æŠ€èƒ½ < 300 è¡Œ
- **ç¯„ä¾‹**ï¼šç¨‹å¼ç¢¼é¢¨æ ¼ã€Git å·¥ä½œæµã€å‘½åè¦ç¯„
- **è¼‰å…¥ç­–ç•¥**ï¼šé è¨­ç¸½æ˜¯è¼‰å…¥ï¼ˆä½æˆæœ¬ï¼‰

**Layer 2ï¼šå°ˆæ¥­å±¤ï¼ˆDomainï¼‰** â€¹2â€º
- **ç‰¹å¾µ**ï¼šç‰¹å®šé ˜åŸŸçš„æ·±å…¥çŸ¥è­˜
- **å¤§å°**ï¼šæ¯å€‹æŠ€èƒ½ 400-500 è¡Œ + è³‡æºæª”æ¡ˆ
- **ç¯„ä¾‹**ï¼šå¾Œç«¯é–‹ç™¼ã€å‰ç«¯é–‹ç™¼ã€è³‡æ–™åº«è¨­è¨ˆ
- **è¼‰å…¥ç­–ç•¥**ï¼šæ ¹æ“šä¸Šä¸‹æ–‡æŒ‰éœ€è¼‰å…¥

**Layer 3ï¼šé€²éšå±¤ï¼ˆAdvancedï¼‰** â€¹3â€º
- **ç‰¹å¾µ**ï¼šè¤‡é›œå ´æ™¯çš„å°ˆå®¶ç´šæŒ‡å°
- **å¤§å°**ï¼šæ¯å€‹æŠ€èƒ½ 300-400 è¡Œ + å¤§é‡è³‡æºæª”æ¡ˆ
- **ç¯„ä¾‹**ï¼šå¾®æœå‹™æ¨¡å¼ã€æ•ˆèƒ½èª¿å„ªã€å®‰å…¨å¼·åŒ–
- **è¼‰å…¥ç­–ç•¥**ï¼šåƒ…åœ¨æ˜ç¢ºéœ€è¦æ™‚è¼‰å…¥

---

### 3.2.2 æŠ€èƒ½å…ƒè³‡æ–™æ“´å±•

æ›´æ–° `metadata.json` ä»¥æ”¯æ´åˆ†å±¤ï¼š

```json
{
  "name": "backend-dev-guidelines",
  "version": "2.0.0",
  "layer": "domain",
  "priority": "high",
  "contextBudget": {
    "main": 2000,
    "resources": 8000,
    "total": 10000
  },
  "dependencies": {
    "required": [
      "coding-standards",
      "typescript-basics"
    ],
    "optional": [
      "api-security",
      "performance-tuning"
    ]
  },
  "loadingStrategy": "on-demand",
  "tags": ["backend", "api", "typescript"]
}
```

**æ–°å¢æ¬„ä½èªªæ˜**ï¼š

â€¹1â€º **layer**ï¼šæŠ€èƒ½æ‰€å±¬å±¤ç´šï¼ˆfoundation / domain / advancedï¼‰

â€¹2â€º **contextBudget**ï¼šè©²æŠ€èƒ½çš„ token é ç®—
- `main`ï¼šä¸»æª”æ¡ˆ tokens
- `resources`ï¼šæ‰€æœ‰è³‡æºæª”æ¡ˆ tokens
- `total`ï¼šç¸½è¨ˆ

â€¹3â€º **dependencies**ï¼šä¾è³´é—œä¿‚
- `required`ï¼šå¿…é ˆåŒæ™‚è¼‰å…¥çš„åŸºç¤æŠ€èƒ½
- `optional`ï¼šå¯é¸çš„è£œå……æŠ€èƒ½

â€¹4â€º **loadingStrategy**ï¼šè¼‰å…¥ç­–ç•¥
- `always`ï¼šç¸½æ˜¯è¼‰å…¥ï¼ˆåŸºç¤å±¤ï¼‰
- `on-demand`ï¼šæŒ‰éœ€è¼‰å…¥ï¼ˆå°ˆæ¥­å±¤ã€é€²éšå±¤ï¼‰
- `explicit`ï¼šåƒ…åœ¨æ˜ç¢ºè«‹æ±‚æ™‚è¼‰å…¥

---

## 3.3 å¯¦ä½œæŠ€èƒ½ç®¡ç†å™¨

### 3.3.1 æŠ€èƒ½ç®¡ç†å™¨æ ¸å¿ƒé‚è¼¯

**`.claude/hooks/skill-manager.ts`**:

```typescript
import * as fs from 'fs';
import * as path from 'path';

interface SkillMetadata {
  name: string;
  version: string;
  layer: 'foundation' | 'domain' | 'advanced';
  priority: 'critical' | 'high' | 'medium' | 'low';
  contextBudget: {
    main: number;
    resources: number;
    total: number;
  };
  dependencies: {
    required: string[];
    optional: string[];
  };
  loadingStrategy: 'always' | 'on-demand' | 'explicit';
  tags: string[];
}

interface ContextBudget {
  total: number;
  used: number;
  reserved: number;
  available: number;
}

export class SkillManager {
  private skillsPath: string;
  private loadedSkills: Map<string, SkillMetadata> = new Map();
  private contextBudget: ContextBudget;

  constructor(projectRoot: string, maxTokens: number = 200000) {
    this.skillsPath = path.join(projectRoot, '.claude', 'skills');
    this.contextBudget = {
      total: maxTokens,
      used: 0,
      reserved: 50000, // ä¿ç•™çµ¦å°è©±æ­·å²å’Œå…¶ä»–ç”¨é€”
      available: maxTokens - 50000
    };
  }

  /**
   * è¼‰å…¥æŠ€èƒ½å…ƒè³‡æ–™
   */
  private loadMetadata(skillName: string): SkillMetadata | null {
    const metadataPath = path.join(
      this.skillsPath,
      skillName,
      'metadata.json'
    );

    if (!fs.existsSync(metadataPath)) {
      return null;
    }

    try {
      const content = fs.readFileSync(metadataPath, 'utf-8');
      return JSON.parse(content) as SkillMetadata;
    } catch (error) {
      console.error(`ç„¡æ³•è¼‰å…¥æŠ€èƒ½å…ƒè³‡æ–™: ${skillName}`, error);
      return null;
    }
  }

  /**
   * è¨ˆç®—æŠ€èƒ½çµ„åˆçš„ç¸½ token æˆæœ¬
   */
  private calculateCost(skills: string[]): number {
    let totalCost = 0;

    for (const skillName of skills) {
      const metadata = this.loadMetadata(skillName);
      if (metadata) {
        totalCost += metadata.contextBudget.total;

        // åŠ ä¸Šå¿…éœ€ä¾è³´çš„æˆæœ¬
        for (const dep of metadata.dependencies.required) {
          if (!skills.includes(dep)) {
            const depMetadata = this.loadMetadata(dep);
            if (depMetadata) {
              totalCost += depMetadata.contextBudget.total;
            }
          }
        }
      }
    }

    return totalCost;
  }

  /**
   * æ™ºèƒ½é¸æ“‡æŠ€èƒ½
   * æ ¹æ“šä¸Šä¸‹æ–‡é ç®—å’Œå„ªå…ˆç´šé¸æ“‡æœ€ä½³çš„æŠ€èƒ½çµ„åˆ
   */
  selectSkills(
    candidateSkills: string[],
    maxBudget?: number
  ): string[] {
    const budget = maxBudget || this.contextBudget.available;
    const selected: string[] = [];
    let currentCost = 0;

    // ç¬¬ä¸€æ­¥ï¼šè¼‰å…¥æ‰€æœ‰å…ƒè³‡æ–™ä¸¦æ’åº
    const skillsWithMetadata = candidateSkills
      .map(name => ({
        name,
        metadata: this.loadMetadata(name)
      }))
      .filter(s => s.metadata !== null)
      .sort((a, b) => {
        // æŒ‰å±¤ç´šå’Œå„ªå…ˆç´šæ’åº
        const layerPriority = { foundation: 3, domain: 2, advanced: 1 };
        const priorityValue = { critical: 4, high: 3, medium: 2, low: 1 };

        const layerDiff =
          layerPriority[b.metadata!.layer] - layerPriority[a.metadata!.layer];
        if (layerDiff !== 0) return layerDiff;

        return (
          priorityValue[b.metadata!.priority] -
          priorityValue[a.metadata!.priority]
        );
      });

    // ç¬¬äºŒæ­¥ï¼šå„ªå…ˆè¼‰å…¥åŸºç¤å±¤æŠ€èƒ½
    for (const { name, metadata } of skillsWithMetadata) {
      if (metadata!.layer === 'foundation') {
        selected.push(name);
        currentCost += metadata!.contextBudget.total;
      }
    }

    // ç¬¬ä¸‰æ­¥ï¼šè¼‰å…¥é«˜å„ªå…ˆç´šçš„å°ˆæ¥­å±¤æŠ€èƒ½
    for (const { name, metadata } of skillsWithMetadata) {
      if (
        metadata!.layer === 'domain' &&
        currentCost + metadata!.contextBudget.total <= budget
      ) {
        // æª¢æŸ¥ä¾è³´
        const deps = this.resolveDependencies(name, selected);
        const depsCost = deps.reduce((sum, depName) => {
          const depMeta = this.loadMetadata(depName);
          return sum + (depMeta?.contextBudget.total || 0);
        }, 0);

        if (currentCost + metadata!.contextBudget.total + depsCost <= budget) {
          selected.push(name);
          selected.push(...deps);
          currentCost += metadata!.contextBudget.total + depsCost;
        }
      }
    }

    // ç¬¬å››æ­¥ï¼šå¦‚æœé‚„æœ‰é ç®—ï¼Œè¼‰å…¥é€²éšå±¤æŠ€èƒ½
    for (const { name, metadata } of skillsWithMetadata) {
      if (
        metadata!.layer === 'advanced' &&
        currentCost + metadata!.contextBudget.total <= budget
      ) {
        selected.push(name);
        currentCost += metadata!.contextBudget.total;
      }
    }

    // å»é‡
    return [...new Set(selected)];
  }

  /**
   * è§£æä¾è³´é—œä¿‚
   */
  private resolveDependencies(
    skillName: string,
    alreadySelected: string[]
  ): string[] {
    const metadata = this.loadMetadata(skillName);
    if (!metadata) return [];

    const deps: string[] = [];

    for (const depName of metadata.dependencies.required) {
      if (!alreadySelected.includes(depName) && !deps.includes(depName)) {
        deps.push(depName);
        // éè¿´è§£æä¾è³´çš„ä¾è³´
        const nestedDeps = this.resolveDependencies(depName, [
          ...alreadySelected,
          ...deps
        ]);
        deps.push(...nestedDeps);
      }
    }

    return deps;
  }

  /**
   * ç”Ÿæˆè¼‰å…¥å»ºè­°
   */
  generateLoadingPlan(candidateSkills: string[]): {
    toLoad: string[];
    skipped: string[];
    reason: string;
    estimatedTokens: number;
  } {
    const toLoad = this.selectSkills(candidateSkills);
    const skipped = candidateSkills.filter(s => !toLoad.includes(s));
    const estimatedTokens = this.calculateCost(toLoad);

    return {
      toLoad,
      skipped,
      reason:
        skipped.length > 0
          ? `å·²è·³é ${skipped.length} å€‹ä½å„ªå…ˆç´šæŠ€èƒ½ä»¥ç¯€çœä¸Šä¸‹æ–‡`
          : 'æ‰€æœ‰å€™é¸æŠ€èƒ½éƒ½å·²åŒ…å«',
      estimatedTokens
    };
  }

  /**
   * å–å¾—æŠ€èƒ½æ‘˜è¦ï¼ˆç”¨æ–¼é¡¯ç¤ºï¼‰
   */
  getSkillSummary(skillName: string): string {
    const metadata = this.loadMetadata(skillName);
    if (!metadata) return `${skillName} (ç„¡æ³•è¼‰å…¥å…ƒè³‡æ–™)`;

    const costKB = (metadata.contextBudget.total / 1000).toFixed(1);
    return `${skillName} [${metadata.layer}] (~${costKB}K tokens)`;
  }
}
```

**ç¨‹å¼ç¢¼èªªæ˜**ï¼š

â€¹1â€º **ä¸Šä¸‹æ–‡é ç®—ç®¡ç†**
- ç¸½é ç®—ï¼š200K tokens
- ä¿ç•™ï¼š50K tokensï¼ˆçµ¦å°è©±æ­·å²ï¼‰
- å¯ç”¨ï¼š150K tokensï¼ˆçµ¦æŠ€èƒ½ï¼‰

â€¹2â€º **æ™ºèƒ½é¸æ“‡æ¼”ç®—æ³•**
1. å„ªå…ˆè¼‰å…¥åŸºç¤å±¤æŠ€èƒ½ï¼ˆå¿…éœ€ï¼‰
2. æŒ‰å„ªå…ˆç´šè¼‰å…¥å°ˆæ¥­å±¤æŠ€èƒ½
3. å‰©é¤˜é ç®—è¼‰å…¥é€²éšå±¤æŠ€èƒ½
4. è‡ªå‹•è§£æä¾è³´é—œä¿‚

â€¹3â€º **ä¾è³´é—œä¿‚è§£æ**
- éè¿´è§£æ `required` ä¾è³´
- é¿å…é‡è¤‡è¼‰å…¥
- è¨ˆç®—ä¾è³´çš„ç¸½æˆæœ¬

â€¹4â€º **è¼‰å…¥è¨ˆç•«ç”Ÿæˆ**
- æ±ºå®šè¼‰å…¥å“ªäº›æŠ€èƒ½
- è¨˜éŒ„è·³éçš„æŠ€èƒ½åŠåŸå› 
- ä¼°ç®—ç¸½ token ä½¿ç”¨é‡

---

## 3.4 æ›´æ–° Hook ä»¥ä½¿ç”¨æŠ€èƒ½ç®¡ç†å™¨

### 3.4.1 æ•´åˆåˆ° skill-activation-prompt

**`.claude/hooks/skill-activation-prompt.ts`**ï¼ˆæ›´æ–°ç‰ˆï¼‰:

```typescript
import { RuleEngine } from './rule-engine';
import { SkillManager } from './skill-manager';
import * as fs from 'fs';

try {
  const input = fs.readFileSync(0, 'utf-8');
  const data = JSON.parse(input);

  const userPrompt: string = data.prompt || '';
  const workingDir: string = data.workingDirectory || process.cwd();
  const recentFiles: string[] = data.recentFiles || [];

  if (!userPrompt.trim()) {
    process.exit(0);
  }

  const projectRoot = process.env.CLAUDE_PROJECT_DIR || workingDir;

  // åˆå§‹åŒ–è¦å‰‡å¼•æ“å’ŒæŠ€èƒ½ç®¡ç†å™¨
  const ruleEngine = new RuleEngine(projectRoot);
  const skillManager = new SkillManager(projectRoot);

  // åŒ¹é…å€™é¸æŠ€èƒ½
  const skillsByPrompt = ruleEngine.matchByPrompt(userPrompt);
  const skillsByFiles = recentFiles
    .flatMap(f => ruleEngine.matchByPath(f))
    .filter((skill, index, self) => self.indexOf(skill) === index);

  const candidateSkills = [...new Set([...skillsByPrompt, ...skillsByFiles])];

  if (candidateSkills.length === 0) {
    process.exit(0);
  }

  // ä½¿ç”¨æŠ€èƒ½ç®¡ç†å™¨ç”Ÿæˆè¼‰å…¥è¨ˆç•«
  const plan = skillManager.generateLoadingPlan(candidateSkills);

  // é¡¯ç¤ºå»ºè­°
  console.log('\nğŸ’¡ æ ¹æ“šä½ çš„æç¤ºå’Œä¸Šä¸‹æ–‡ï¼Œå»ºè­°è¼‰å…¥ä»¥ä¸‹æŠ€èƒ½ï¼š\n');

  plan.toLoad.forEach((skill, index) => {
    const summary = skillManager.getSkillSummary(skill);
    console.log(`${index + 1}. ${summary}`);
  });

  console.log(`\nğŸ“Š é ä¼°ä½¿ç”¨: ${(plan.estimatedTokens / 1000).toFixed(1)}K tokens`);

  if (plan.skipped.length > 0) {
    console.log(`\nâš ï¸  å·²è·³é ${plan.skipped.length} å€‹æŠ€èƒ½:`);
    plan.skipped.forEach(skill => {
      console.log(`   - ${skill}`);
    });
    console.log(`   åŸå› : ${plan.reason}`);
  }

  console.log('\né€™äº›æŠ€èƒ½å°‡å¹«åŠ© Claude æä¾›ç²¾æº–çš„æŒ‡å°ã€‚\n');

  process.exit(0);
} catch (error) {
  console.error('è™•ç†æç¤ºæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
  process.exit(1);
}
```

---

## 3.5 æŠ€èƒ½ä¾è³´é—œä¿‚ç®¡ç†

### 3.5.1 å®šç¾©ä¾è³´é—œä¿‚

**åŸºç¤æŠ€èƒ½ä¸æ‡‰è©²ä¾è³´ä»»ä½•å…¶ä»–æŠ€èƒ½**ï¼š

```json
// coding-standards/metadata.json
{
  "name": "coding-standards",
  "layer": "foundation",
  "dependencies": {
    "required": [],
    "optional": []
  }
}
```

**å°ˆæ¥­æŠ€èƒ½ä¾è³´åŸºç¤æŠ€èƒ½**ï¼š

```json
// backend-dev-guidelines/metadata.json
{
  "name": "backend-dev-guidelines",
  "layer": "domain",
  "dependencies": {
    "required": [
      "coding-standards",
      "typescript-basics"
    ],
    "optional": [
      "testing-strategies"
    ]
  }
}
```

**é€²éšæŠ€èƒ½ä¾è³´å°ˆæ¥­æŠ€èƒ½**ï¼š

```json
// microservices-patterns/metadata.json
{
  "name": "microservices-patterns",
  "layer": "advanced",
  "dependencies": {
    "required": [
      "backend-dev-guidelines",
      "api-design"
    ],
    "optional": [
      "performance-tuning",
      "observability"
    ]
  }
}
```

### 3.5.2 æª¢æ¸¬å¾ªç’°ä¾è³´

å»ºç«‹å·¥å…·æª¢æ¸¬å¾ªç’°ä¾è³´ï¼š

**`.claude/tools/check-dependencies.ts`**:

```typescript
import * as fs from 'fs';
import * as path from 'path';

interface SkillMetadata {
  name: string;
  dependencies: {
    required: string[];
    optional: string[];
  };
}

class DependencyChecker {
  private skillsPath: string;
  private visitedSkills: Set<string> = new Set();
  private recursionStack: Set<string> = new Set();

  constructor(projectRoot: string) {
    this.skillsPath = path.join(projectRoot, '.claude', 'skills');
  }

  /**
   * æª¢æŸ¥å¾ªç’°ä¾è³´
   */
  checkCyclicDependencies(): {
    hasCycle: boolean;
    cycles: string[][];
  } {
    const allSkills = fs.readdirSync(this.skillsPath);
    const cycles: string[][] = [];

    for (const skillName of allSkills) {
      this.visitedSkills.clear();
      this.recursionStack.clear();

      const cycle = this.detectCycle(skillName, []);
      if (cycle.length > 0) {
        cycles.push(cycle);
      }
    }

    return {
      hasCycle: cycles.length > 0,
      cycles
    };
  }

  private detectCycle(skillName: string, path: string[]): string[] {
    if (this.recursionStack.has(skillName)) {
      // æ‰¾åˆ°å¾ªç’°
      const cycleStart = path.indexOf(skillName);
      return path.slice(cycleStart).concat(skillName);
    }

    if (this.visitedSkills.has(skillName)) {
      return [];
    }

    this.visitedSkills.add(skillName);
    this.recursionStack.add(skillName);

    const metadata = this.loadMetadata(skillName);
    if (metadata) {
      for (const dep of metadata.dependencies.required) {
        const cycle = this.detectCycle(dep, [...path, skillName]);
        if (cycle.length > 0) {
          return cycle;
        }
      }
    }

    this.recursionStack.delete(skillName);
    return [];
  }

  private loadMetadata(skillName: string): SkillMetadata | null {
    const metadataPath = path.join(
      this.skillsPath,
      skillName,
      'metadata.json'
    );

    if (!fs.existsSync(metadataPath)) {
      return null;
    }

    try {
      const content = fs.readFileSync(metadataPath, 'utf-8');
      return JSON.parse(content) as SkillMetadata;
    } catch (error) {
      return null;
    }
  }
}

// åŸ·è¡Œæª¢æŸ¥
const projectRoot = process.env.CLAUDE_PROJECT_DIR || process.cwd();
const checker = new DependencyChecker(projectRoot);
const result = checker.checkCyclicDependencies();

if (result.hasCycle) {
  console.error('âŒ æª¢æ¸¬åˆ°å¾ªç’°ä¾è³´ï¼\n');
  result.cycles.forEach((cycle, index) => {
    console.error(`å¾ªç’° ${index + 1}: ${cycle.join(' â†’ ')}`);
  });
  process.exit(1);
} else {
  console.log('âœ… æœªæª¢æ¸¬åˆ°å¾ªç’°ä¾è³´');
  process.exit(0);
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š

```bash
# åœ¨ CI/CD ä¸­é‹è¡Œ
node -r ts-node/register .claude/tools/check-dependencies.ts
```

---

## 3.6 å‹•æ…‹è¼‰å…¥ç­–ç•¥

### 3.6.1 ä¸‰ç¨®è¼‰å…¥æ¨¡å¼

**æ¨¡å¼ 1ï¼šé è¼‰å…¥ï¼ˆAlways Loadï¼‰**

é©ç”¨æ–¼åŸºç¤å±¤æŠ€èƒ½ï¼š

```typescript
// åœ¨ skill-rules.json ä¸­é…ç½®
{
  "coding-standards": {
    "loadingStrategy": "always",
    "layer": "foundation"
  }
}
```

**æ¨¡å¼ 2ï¼šæŒ‰éœ€è¼‰å…¥ï¼ˆOn-Demandï¼‰**

é©ç”¨æ–¼å°ˆæ¥­å±¤æŠ€èƒ½ï¼š

```typescript
{
  "backend-dev-guidelines": {
    "loadingStrategy": "on-demand",
    "layer": "domain",
    "triggers": {
      "pathPatterns": ["src/api/**/*.ts"],
      "keywords": ["controller", "service"]
    }
  }
}
```

**æ¨¡å¼ 3ï¼šæ˜ç¢ºè«‹æ±‚ï¼ˆExplicitï¼‰**

é©ç”¨æ–¼é€²éšå±¤æŠ€èƒ½ï¼š

```typescript
{
  "microservices-patterns": {
    "loadingStrategy": "explicit",
    "layer": "advanced",
    "activationCommand": "/skill:microservices-patterns"
  }
}
```

### 3.6.2 è³‡æºæª”æ¡ˆæ‡¶è¼‰å…¥

ä¸è¦ä¸€æ¬¡è¼‰å…¥æŠ€èƒ½çš„æ‰€æœ‰è³‡æºæª”æ¡ˆï¼Œè€Œæ˜¯ï¼š

**åœ¨ä¸» SKILL.md ä¸­æä¾›ç´¢å¼•**ï¼š

```markdown
## è©³ç´°è³‡æº

ç•¶ä½ éœ€è¦æ·±å…¥äº†è§£ç‰¹å®šä¸»é¡Œæ™‚ï¼Œè«‹è¼‰å…¥ç›¸æ‡‰çš„è³‡æºï¼š

| ä¸»é¡Œ | è³‡æºæª”æ¡ˆ | Token æˆæœ¬ |
|------|---------|-----------|
| æ§åˆ¶å™¨è¨­è¨ˆ | resources/01-controller.md | ~1.5K |
| æœå‹™å±¤è¨­è¨ˆ | resources/02-service.md | ~1.8K |
| éŒ¯èª¤è™•ç† | resources/04-error.md | ~1.2K |

è«‹å‘Šè¨´æˆ‘ä½ éœ€è¦å“ªå€‹ä¸»é¡Œçš„è©³ç´°æŒ‡å°ã€‚
```

**Claude çš„è¡Œç‚º**ï¼š

```
ä½¿ç”¨è€…: "å¦‚ä½•è¨­è¨ˆæ§åˆ¶å™¨ï¼Ÿ"

Claude æª¢æŸ¥ä¸» SKILL.md çš„ç´¢å¼•
â†’ ç™¼ç¾éœ€è¦ resources/01-controller.md
â†’ åƒ…è¼‰å…¥è©²è³‡æºï¼ˆç¯€çœ 10K+ tokensï¼‰
â†’ æä¾›è©³ç´°æŒ‡å°
```

---

## 3.7 æŠ€èƒ½çµ„åˆæ¨¡å¼

### 3.7.1 é å®šç¾©æŠ€èƒ½çµ„åˆ

ç‚ºå¸¸è¦‹å·¥ä½œæµå»ºç«‹æŠ€èƒ½çµ„åˆï¼š

**`.claude/skills/skill-bundles.json`**:

```json
{
  "bundles": {
    "æ–°åŠŸèƒ½é–‹ç™¼": {
      "description": "é–‹ç™¼æ–° API åŠŸèƒ½çš„å®Œæ•´æŠ€èƒ½çµ„åˆ",
      "skills": [
        "coding-standards",
        "backend-dev-guidelines",
        "database-design",
        "testing-strategies"
      ],
      "estimatedTokens": 25000
    },
    "æ•ˆèƒ½å„ªåŒ–": {
      "description": "ç³»çµ±æ•ˆèƒ½èª¿å„ª",
      "skills": [
        "performance-tuning",
        "database-optimization",
        "caching-strategies",
        "profiling-tools"
      ],
      "estimatedTokens": 32000
    },
    "å®‰å…¨å¯©æŸ¥": {
      "description": "å®‰å…¨æ€§å¯©æŸ¥èˆ‡å¼·åŒ–",
      "skills": [
        "security-best-practices",
        "api-security",
        "authentication-patterns",
        "owasp-top-10"
      ],
      "estimatedTokens": 28000
    }
  }
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š

```bash
# ä½¿ç”¨è€…è¼¸å…¥
"/bundle:æ–°åŠŸèƒ½é–‹ç™¼"

# Claude è‡ªå‹•è¼‰å…¥è©²çµ„åˆçš„æ‰€æœ‰æŠ€èƒ½
```

### 3.7.2 æ™ºèƒ½çµ„åˆæ¨è–¦

æ ¹æ“šæç¤ºå…§å®¹æ¨è–¦æŠ€èƒ½çµ„åˆï¼š

```typescript
class BundleRecommender {
  recommendBundle(prompt: string): string | null {
    const keywords = {
      æ–°åŠŸèƒ½é–‹ç™¼: ['æ–°åŠŸèƒ½', 'API', 'endpoint', 'é–‹ç™¼'],
      æ•ˆèƒ½å„ªåŒ–: ['æ…¢', 'æ•ˆèƒ½', 'å„ªåŒ–', 'é€Ÿåº¦', 'performance'],
      å®‰å…¨å¯©æŸ¥: ['å®‰å…¨', 'æ¼æ´', 'èªè­‰', 'security', 'vulnerability']
    };

    for (const [bundleName, words] of Object.entries(keywords)) {
      if (words.some(word => prompt.toLowerCase().includes(word))) {
        return bundleName;
      }
    }

    return null;
  }
}
```

---

## 3.8 ä¸Šä¸‹æ–‡é ç®—å¯è¦–åŒ–

### 3.8.1 å»ºç«‹ç›£æ§å·¥å…·

**`.claude/tools/context-monitor.ts`**:

```typescript
export class ContextMonitor {
  private maxTokens: number;
  private currentUsage: Map<string, number> = new Map();

  constructor(maxTokens: number = 200000) {
    this.maxTokens = maxTokens;
  }

  /**
   * è¨˜éŒ„æŠ€èƒ½ä½¿ç”¨
   */
  recordSkillUsage(skillName: string, tokens: number): void {
    this.currentUsage.set(skillName, tokens);
  }

  /**
   * ç”Ÿæˆä½¿ç”¨å ±å‘Š
   */
  generateReport(): string {
    const totalUsed = Array.from(this.currentUsage.values()).reduce(
      (sum, tokens) => sum + tokens,
      0
    );
    const percentage = ((totalUsed / this.maxTokens) * 100).toFixed(1);

    let report = '\nğŸ“Š ä¸Šä¸‹æ–‡ä½¿ç”¨å ±å‘Š\n';
    report += '='.repeat(50) + '\n\n';
    report += `ç¸½å®¹é‡: ${(this.maxTokens / 1000).toFixed(0)}K tokens\n`;
    report += `å·²ä½¿ç”¨: ${(totalUsed / 1000).toFixed(1)}K tokens (${percentage}%)\n`;
    report += `å‰©é¤˜: ${((this.maxTokens - totalUsed) / 1000).toFixed(1)}K tokens\n\n`;

    // ä½¿ç”¨é€²åº¦æ¢
    const barLength = 40;
    const filledLength = Math.round((totalUsed / this.maxTokens) * barLength);
    const bar = 'â–ˆ'.repeat(filledLength) + 'â–‘'.repeat(barLength - filledLength);
    report += `[${bar}] ${percentage}%\n\n`;

    report += 'æŠ€èƒ½ä½¿ç”¨æ˜ç´°:\n';
    const sortedSkills = Array.from(this.currentUsage.entries())
      .sort((a, b) => b[1] - a[1]);

    sortedSkills.forEach(([skill, tokens]) => {
      const skillPercentage = ((tokens / totalUsed) * 100).toFixed(1);
      report += `  â€¢ ${skill}: ${(tokens / 1000).toFixed(1)}K (${skillPercentage}%)\n`;
    });

    return report;
  }

  /**
   * æª¢æŸ¥æ˜¯å¦è¶…å‡ºé ç®—
   */
  isOverBudget(): boolean {
    const totalUsed = Array.from(this.currentUsage.values()).reduce(
      (sum, tokens) => sum + tokens,
      0
    );
    return totalUsed > this.maxTokens * 0.9; // è¶…é 90% è¦–ç‚ºé ç®—ä¸è¶³
  }

  /**
   * å»ºè­°é‡‹æ”¾çš„æŠ€èƒ½
   */
  suggestUnload(): string[] {
    const sortedSkills = Array.from(this.currentUsage.entries())
      .sort((a, b) => a[1] - b[1]); // æŒ‰ä½¿ç”¨é‡å¾å°åˆ°å¤§æ’åº

    // å»ºè­°ç§»é™¤ä½¿ç”¨é‡æœ€å°çš„æŠ€èƒ½
    return sortedSkills.slice(0, 3).map(([skill]) => skill);
  }
}
```

**ä½¿ç”¨ç¯„ä¾‹**ï¼š

```typescript
const monitor = new ContextMonitor();

monitor.recordSkillUsage('coding-standards', 2000);
monitor.recordSkillUsage('backend-dev-guidelines', 12000);
monitor.recordSkillUsage('database-design', 8000);

console.log(monitor.generateReport());

if (monitor.isOverBudget()) {
  console.warn('âš ï¸  ä¸Šä¸‹æ–‡é ç®—ä¸è¶³ï¼Œå»ºè­°é‡‹æ”¾æŠ€èƒ½ï¼š');
  monitor.suggestUnload().forEach(skill => {
    console.warn(`  - ${skill}`);
  });
}
```

**è¼¸å‡º**ï¼š

```
ğŸ“Š ä¸Šä¸‹æ–‡ä½¿ç”¨å ±å‘Š
==================================================

ç¸½å®¹é‡: 200K tokens
å·²ä½¿ç”¨: 22.0K tokens (11.0%)
å‰©é¤˜: 178.0K tokens

[â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 11.0%

æŠ€èƒ½ä½¿ç”¨æ˜ç´°:
  â€¢ backend-dev-guidelines: 12.0K (54.5%)
  â€¢ database-design: 8.0K (36.4%)
  â€¢ coding-standards: 2.0K (9.1%)
```

---

## 3.9 å¯¦æˆ°æ¡ˆä¾‹ï¼šé‡æ§‹ 50+ æŠ€èƒ½åº«

è®“æˆ‘å€‘æ‡‰ç”¨æ‰€å­¸çš„ç­–ç•¥ï¼Œé‡æ§‹ Sarah åœ˜éšŠçš„æŠ€èƒ½åº«ã€‚

### 3.9.1 Beforeï¼šæ··äº‚çš„æŠ€èƒ½åº«

```
.claude/skills/
â”œâ”€â”€ backend-stuff.md (2,500 è¡Œ)
â”œâ”€â”€ frontend-things.md (2,200 è¡Œ)
â”œâ”€â”€ db-notes.md (1,800 è¡Œ)
â”œâ”€â”€ security-tips.md (3,000 è¡Œ)
... (50 å€‹æœªåˆ†é¡çš„æª”æ¡ˆ)
```

**å•é¡Œ**ï¼š
- ç„¡åˆ†å±¤
- ç„¡ä¾è³´ç®¡ç†
- ç„¡ä¸Šä¸‹æ–‡é ç®—æ§åˆ¶
- åŒæ™‚è¼‰å…¥æ‰€æœ‰æŠ€èƒ½ = 150K+ tokens

### 3.9.2 Afterï¼šåˆ†å±¤çš„æŠ€èƒ½åº«

```
.claude/skills/
â”œâ”€â”€ 00-foundation/          # åŸºç¤å±¤ (ç¸½è¨ˆ ~8K tokens)
â”‚   â”œâ”€â”€ coding-standards/
â”‚   â”œâ”€â”€ typescript-basics/
â”‚   â””â”€â”€ git-workflow/
â”œâ”€â”€ 01-domain/              # å°ˆæ¥­å±¤ (æŒ‰éœ€è¼‰å…¥)
â”‚   â”œâ”€â”€ backend-dev-guidelines/
â”‚   â”œâ”€â”€ frontend-dev-guidelines/
â”‚   â”œâ”€â”€ database-design/
â”‚   â””â”€â”€ api-design/
â”œâ”€â”€ 02-advanced/            # é€²éšå±¤ (æ˜ç¢ºè¼‰å…¥)
â”‚   â”œâ”€â”€ microservices-patterns/
â”‚   â”œâ”€â”€ performance-tuning/
â”‚   â””â”€â”€ security-hardening/
â””â”€â”€ skill-bundles.json      # é å®šç¾©çµ„åˆ
```

**æ”¹å–„**ï¼š
- æ¸…æ™°çš„ä¸‰å±¤çµæ§‹
- æ˜ç¢ºçš„ä¾è³´é—œä¿‚
- é ç®—æ§åˆ¶ï¼šåŸºç¤å±¤ 8K + å°ˆæ¥­å±¤ 20K = 28K tokensï¼ˆç›¸æ¯” 150K æ¸›å°‘ 81%ï¼‰
- è¼‰å…¥é€Ÿåº¦æå‡ 5 å€

### 3.9.3 æ•ˆç›Šå°æ¯”

| æŒ‡æ¨™ | Before | After | æ”¹å–„ |
|------|--------|-------|------|
| **å¹³å‡è¼‰å…¥ tokens** | 150K | 28K | -81% |
| **è¼‰å…¥æ™‚é–“** | 8-12 ç§’ | 1.5-2 ç§’ | -83% |
| **å¯ç”¨ä¸Šä¸‹æ–‡** | 50K | 172K | +244% |
| **æŠ€èƒ½åˆ©ç”¨ç‡** | 40% | 92% | +130% |
| **ç¶­è­·æˆæœ¬** | é«˜ï¼ˆæª”æ¡ˆæ··äº‚ï¼‰ | ä½ï¼ˆåˆ†å±¤æ¸…æ™°ï¼‰ | é¡¯è‘—é™ä½ |

---

## 3.10 æœ€ä½³å¯¦è¸ç¸½çµ

### 3.10.1 æŠ€èƒ½åº«è¨­è¨ˆåŸå‰‡

1. **åˆ†å±¤åŸå‰‡** â€¹1â€º
   - åŸºç¤å±¤ï¼š< 10K tokensï¼ˆç¸½æ˜¯è¼‰å…¥ï¼‰
   - å°ˆæ¥­å±¤ï¼šæ¯å€‹æŠ€èƒ½ < 15K tokensï¼ˆæŒ‰éœ€è¼‰å…¥ï¼‰
   - é€²éšå±¤ï¼šæ¯å€‹æŠ€èƒ½ < 20K tokensï¼ˆæ˜ç¢ºè¼‰å…¥ï¼‰

2. **ä¾è³´ç®¡ç†** â€¹2â€º
   - åŸºç¤æŠ€èƒ½ä¸ä¾è³´å…¶ä»–æŠ€èƒ½
   - å°ˆæ¥­æŠ€èƒ½åªä¾è³´åŸºç¤æŠ€èƒ½
   - é¿å…å¾ªç’°ä¾è³´

3. **ä¸Šä¸‹æ–‡é ç®—** â€¹3â€º
   - ç¸½é ç®—ï¼š200K tokens
   - ä¿ç•™ï¼š50K tokensï¼ˆå°è©±æ­·å²ï¼‰
   - å¯ç”¨ï¼š150K tokens
   - ç›®æ¨™ä½¿ç”¨ï¼š< 30K tokensï¼ˆçµ¦æŠ€èƒ½ï¼‰

4. **è¼‰å…¥ç­–ç•¥** â€¹4â€º
   - åŸºç¤å±¤ï¼šalways
   - å°ˆæ¥­å±¤ï¼šon-demand
   - é€²éšå±¤ï¼šexplicit

### 3.10.2 å¸¸è¦‹é™·é˜±

| é™·é˜± | å¾Œæœ | è§£æ±ºæ–¹æ¡ˆ |
|------|------|---------|
| **éåº¦ç´°åˆ†** | æŠ€èƒ½æ•¸é‡çˆ†ç‚¸ï¼Œç®¡ç†å›°é›£ | æ¯å€‹æŠ€èƒ½è‡³å°‘åŒ…å« 5-10 å€‹ä¸»é¡Œ |
| **ç¼ºä¹åˆ†å±¤** | ç„¡æ³•å„ªå…ˆè¼‰å…¥é‡è¦æŠ€èƒ½ | ä½¿ç”¨ä¸‰å±¤æ¨¡å‹ |
| **å¾ªç’°ä¾è³´** | ç„¡é™è¼‰å…¥è¿´åœˆ | ä½¿ç”¨ä¾è³´æª¢æŸ¥å·¥å…· |
| **ç„¡é ç®—æ§åˆ¶** | ä¸Šä¸‹æ–‡æº¢å‡º | å¯¦ä½œ SkillManager |
| **ç¼ºä¹ç›£æ§** | ä¸çŸ¥é“å“ªäº›æŠ€èƒ½ä½”ç”¨æœ€å¤š | ä½¿ç”¨ ContextMonitor |

---

## 3.11 ç« ç¯€ç¸½çµ

æ­å–œï¼ä½ å·²ç¶“æŒæ¡äº†å¤§å‹æŠ€èƒ½åº«çš„ç®¡ç†ç­–ç•¥ã€‚

### ä½ å»ºç«‹äº†ä»€éº¼

âœ… **åˆ†å±¤æŠ€èƒ½æ¶æ§‹**
   - åŸºç¤å±¤ï¼ˆ8K tokensï¼‰
   - å°ˆæ¥­å±¤ï¼ˆ20-30K tokensï¼‰
   - é€²éšå±¤ï¼ˆæ˜ç¢ºè¼‰å…¥ï¼‰

âœ… **æŠ€èƒ½ç®¡ç†å™¨ï¼ˆSkillManagerï¼‰**
   - æ™ºèƒ½é¸æ“‡æ¼”ç®—æ³•
   - ä¾è³´é—œä¿‚è§£æ
   - ä¸Šä¸‹æ–‡é ç®—æ§åˆ¶

âœ… **ä¾è³´ç®¡ç†å·¥å…·**
   - å¾ªç’°ä¾è³´æª¢æ¸¬
   - ä¾è³´é—œä¿‚å¯è¦–åŒ–

âœ… **è¼‰å…¥ç­–ç•¥ç³»çµ±**
   - Always / On-Demand / Explicit
   - æŠ€èƒ½çµ„åˆï¼ˆBundlesï¼‰
   - æ‡¶è¼‰å…¥è³‡æºæª”æ¡ˆ

âœ… **ç›£æ§èˆ‡å¯è¦–åŒ–**
   - ä¸Šä¸‹æ–‡ä½¿ç”¨å ±å‘Š
   - é ç®—è¶…æ”¯è­¦å‘Š
   - é‡‹æ”¾å»ºè­°

### æ ¸å¿ƒæ¦‚å¿µå›é¡§

1. **åˆ†å±¤æ¶æ§‹**
   Foundation â†’ Domain â†’ Advanced

2. **ä¸Šä¸‹æ–‡é ç®—**
   200K total - 50K reserved = 150K available

3. **æ™ºèƒ½è¼‰å…¥**
   å„ªå…ˆç´š + ä¾è³´ + é ç®— = æœ€ä½³çµ„åˆ

4. **æ‡¶è¼‰å…¥**
   åªè¼‰å…¥éœ€è¦çš„è³‡æºæª”æ¡ˆ

### å¯¦éš›æ‡‰ç”¨åƒ¹å€¼

- ğŸ¯ **Token ä½¿ç”¨æ¸›å°‘ 81%**ï¼ˆ150K â†’ 28Kï¼‰
- âš¡ **è¼‰å…¥é€Ÿåº¦æå‡ 5 å€**ï¼ˆ8ç§’ â†’ 1.5ç§’ï¼‰
- ğŸ“Š **å¯ç”¨ä¸Šä¸‹æ–‡å¢åŠ  244%**ï¼ˆ50K â†’ 172Kï¼‰
- ğŸ›¡ï¸ **æŠ€èƒ½åˆ©ç”¨ç‡æå‡ 130%**ï¼ˆ40% â†’ 92%ï¼‰

### æª¢æŸ¥æ¸…å–®

- [ ] æŠ€èƒ½åº«å·²åˆ†ç‚ºä¸‰å±¤
- [ ] æ¯å€‹æŠ€èƒ½æœ‰ metadata.json
- [ ] å®šç¾©äº†ä¾è³´é—œä¿‚
- [ ] å¯¦ä½œäº† SkillManager
- [ ] è¨­å®šäº† contextBudget
- [ ] é‹è¡Œäº†å¾ªç’°ä¾è³´æª¢æ¸¬
- [ ] å»ºç«‹äº†æŠ€èƒ½çµ„åˆ
- [ ] æ¸¬è©¦äº†å‹•æ…‹è¼‰å…¥

---

## 3.12 ä¸‹ä¸€ç« é å‘Š

åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘å€‘å­¸æœƒäº†ç®¡ç†å¤§å‹æŠ€èƒ½åº«ã€‚ä½†æŠ€èƒ½åªæ˜¯çŸ¥è­˜çš„ä¸€éƒ¨åˆ†ï¼Œå®Œæ•´çš„çŸ¥è­˜ç®¡ç†é‚„éœ€è¦ï¼š

**ç¬¬ 4 ç« ï¼šçŸ¥è­˜ç®¡ç†çš„ä¸‰æª”æ¡ˆæ¨¡å¼**

æˆ‘å€‘å°‡æ¢è¨ï¼š
- dev-docs ç³»çµ±ï¼š[task]-plan.md + [task]-context.md + [task]-tasks.md
- å¦‚ä½•è™•ç†ä¸Šä¸‹æ–‡é‡ç½®å•é¡Œ
- é•·æœŸè¨˜æ†¶ vs. çŸ­æœŸè¨˜æ†¶
- çŸ¥è­˜çš„æŒä¹…åŒ–ç­–ç•¥
- åœ˜éšŠçŸ¥è­˜å…±äº«æ¨¡å¼

**æ ¸å¿ƒå°ˆæ¡ˆ**ï¼šç‚º 6 å€‹æœˆçš„å¾®æœå‹™é‡æ§‹å°ˆæ¡ˆå»ºç«‹å®Œæ•´çš„ dev-docs ç³»çµ±ï¼ŒåŒ…å«ï¼š
- 15 å€‹ task-plan æª”æ¡ˆ
- é—œéµæ±ºç­–è¨˜éŒ„
- é€²åº¦è¿½è¹¤ç³»çµ±

æº–å‚™å¥½äº†å—ï¼Ÿè®“æˆ‘å€‘ç¹¼çºŒï¼

---

**ä½ å·²ç¶“å®Œæˆäº†ç¬¬ 3 ç« ï¼** ğŸ‰

ä½ ç¾åœ¨æŒæ¡äº†çªç ´ä¸Šä¸‹æ–‡é™åˆ¶çš„å®Œæ•´ç­–ç•¥ã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘å€‘å°‡å­¸ç¿’å¦‚ä½•ç®¡ç†é•·æœŸå°ˆæ¡ˆçš„çŸ¥è­˜ï¼Œè™•ç†ä¸Šä¸‹æ–‡é‡ç½®å•é¡Œã€‚
