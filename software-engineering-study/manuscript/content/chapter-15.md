# 第15章　品質的概念

> 「品質不是測試出來的，而是設計和建構出來的。測試只是驗證品質是否存在。」

---

## 15.1 什麼是軟體品質？

### 15.1.1 品質的定義

**軟體品質**：軟體滿足明確和隱含需求的程度。

品質有多個面向：

| 面向 | 說明 | 例子 |
|------|------|------|
| **功能性** | 做對的事 | 功能符合需求 |
| **可靠性** | 持續正確運作 | 不會當機 |
| **效能** | 快速回應 | 回應時間 < 200ms |
| **易用性** | 容易使用 | 使用者滿意度高 |
| **可維護性** | 容易修改 | 修復 bug 快 |
| **可移植性** | 可以移植 | 跨平台運行 |

### 15.1.2 ISO 25010 品質模型

```
┌─────────────────────────────────────────────────────────────┐
│                      軟體產品品質                            │
├─────────┬─────────┬─────────┬─────────┬─────────┬─────────┤
│功能適合性│效能效率 │相容性   │易用性   │可靠性   │安全性   │
├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│可維護性 │可移植性 │         │         │         │         │
└─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘
```

**八個特性**：

| 特性 | 子特性 |
|------|--------|
| 功能適合性 | 完整性、正確性、適當性 |
| 效能效率 | 時間行為、資源使用、容量 |
| 相容性 | 共存性、互通性 |
| 易用性 | 可識別性、可學習性、可操作性 |
| 可靠性 | 成熟度、可用性、容錯性、可恢復性 |
| 安全性 | 保密性、完整性、不可否認性 |
| 可維護性 | 模組化、可重用性、可分析性、可修改性、可測試性 |
| 可移植性 | 適應性、可安裝性、可替換性 |

### 15.1.3 品質的兩個視角

| 視角 | 關注點 | 度量 |
|------|--------|------|
| **外部品質** | 使用者看到的 | 功能、效能、易用性 |
| **內部品質** | 開發者看到的 | 程式碼品質、可維護性 |

**關係**：內部品質影響外部品質。技術債會導致外部品質下降。

---

## 15.2 品質成本

### 15.2.1 品質成本模型

```
┌─────────────────────────────────────────────────────────────┐
│                       品質成本                               │
├─────────────────────────────┬───────────────────────────────┤
│         符合成本             │         不符合成本            │
│   (做對的事的成本)           │   (做錯的事的成本)            │
├──────────────┬──────────────┼──────────────┬────────────────┤
│   預防成本   │   評估成本   │   內部失敗   │   外部失敗     │
│              │              │              │                │
│ • 培訓      │ • 測試      │ • 重工      │ • 客訴        │
│ • 流程改善  │ • 審查      │ • 廢棄      │ • 退貨        │
│ • 工具      │ • 稽核      │ • 偵錯      │ • 賠償        │
│ • 規劃      │ • 檢驗      │ • 重測      │ • 信譽損失    │
└──────────────┴──────────────┴──────────────┴────────────────┘
```

### 15.2.2 品質成本的權衡

| 投資更多在預防 | 結果 |
|--------------|------|
| 培訓、流程、工具 | 減少缺陷 |
| 減少缺陷 | 減少失敗成本 |
| 整體成本 | 下降 |

**經驗法則**：
- 預防成本 : 評估成本 : 失敗成本 = 1 : 3 : 10
- 越早發現問題，修復成本越低

### 15.2.3 技術債

**技術債（Technical Debt）**：為了短期速度而犧牲長期品質的決策。

| 類型 | 說明 | 例子 |
|------|------|------|
| **有意債務** | 知道在借債 | 「先趕上線，之後再重構」 |
| **無意債務** | 不知道在借債 | 經驗不足的設計 |
| **利息** | 債務的代價 | 開發變慢、bug 增加 |

**管理技術債**：
1. 讓債務可見（追蹤）
2. 定期償還（分配時間重構）
3. 避免累積過多

---

## 15.3 品質屬性

### 15.3.1 可靠性（Reliability）

**定義**：軟體在指定條件下、指定時間內正確運作的機率。

**度量**：

| 指標 | 定義 | 計算 |
|------|------|------|
| MTBF | 平均故障間隔時間 | 總運行時間 / 故障次數 |
| MTTR | 平均修復時間 | 總修復時間 / 故障次數 |
| 可用性 | 正常運行時間比例 | MTBF / (MTBF + MTTR) |

**可用性等級**：

| 等級 | 可用性 | 每年停機時間 |
|------|--------|-------------|
| 99% | 兩個九 | 3.65 天 |
| 99.9% | 三個九 | 8.76 小時 |
| 99.99% | 四個九 | 52.6 分鐘 |
| 99.999% | 五個九 | 5.26 分鐘 |

### 15.3.2 效能（Performance）

**度量**：

| 指標 | 說明 |
|------|------|
| 回應時間 | 請求到回應的時間 |
| 吞吐量 | 單位時間處理的請求數 |
| 延遲 | 資料傳輸的延遲 |
| 資源使用 | CPU、記憶體、I/O |

**效能目標範例**：
- P50 < 100ms（中位數）
- P99 < 500ms（99 百分位）
- 吞吐量 > 1000 RPS

### 15.3.3 安全性（Security）

**CIA 三角**：

| 屬性 | 說明 | 威脅 |
|------|------|------|
| **機密性** | 只有授權者能存取 | 資料洩露 |
| **完整性** | 資料不被篡改 | 資料竄改 |
| **可用性** | 需要時可以存取 | DoS 攻擊 |

### 15.3.4 可維護性（Maintainability）

**度量**：

| 指標 | 說明 |
|------|------|
| 可分析性 | 診斷問題的難易度 |
| 可修改性 | 修改的難易度 |
| 可測試性 | 測試的難易度 |
| 程式碼複雜度 | Cyclomatic Complexity |

---

## 15.4 品質度量

### 15.4.1 度量的目的

| 目的 | 說明 |
|------|------|
| **評估** | 現在的品質如何？ |
| **預測** | 未來會怎樣？ |
| **改善** | 哪裡需要改善？ |
| **控制** | 是否達到目標？ |

### 15.4.2 常見度量

**產品度量**：

| 度量 | 說明 | 工具 |
|------|------|------|
| 程式碼行數 | 規模 | cloc |
| Cyclomatic Complexity | 複雜度 | SonarQube |
| 重複率 | 重複程式碼比例 | SonarQube |
| 測試覆蓋率 | 被測試的程式碼比例 | Coverage tools |
| 缺陷密度 | 缺陷數 / KLOC | Bug tracker |

**流程度量**：

| 度量 | 說明 |
|------|------|
| 交付週期 | 從需求到上線的時間 |
| 變更失敗率 | 導致問題的變更比例 |
| 修復時間 | 發現到修復的時間 |
| 部署頻率 | 部署到生產的頻率 |

### 15.4.3 GQM（Goal-Question-Metric）

結構化的度量定義方法：

```
Goal（目標）
    │
    ▼
Question（問題）
    │
    ▼
Metric（度量）
```

**範例**：

| 層次 | 內容 |
|------|------|
| Goal | 提高程式碼品質 |
| Question | 程式碼複雜度如何？ |
| Metric | Cyclomatic Complexity |
| Question | 有多少重複程式碼？ |
| Metric | 重複率 |

---

## 15.5 品質保證 vs. 品質控制

### 15.5.1 定義

| 概念 | 英文 | 焦點 | 時機 |
|------|------|------|------|
| 品質保證 | Quality Assurance | 流程 | 預防 |
| 品質控制 | Quality Control | 產品 | 偵測 |

### 15.5.2 QA 活動

| 活動 | 說明 |
|------|------|
| 流程定義 | 建立開發流程 |
| 標準 | 編碼標準、文件標準 |
| 審計 | 確認流程被遵循 |
| 培訓 | 提升團隊能力 |
| 持續改善 | 回顧和改善流程 |

### 15.5.3 QC 活動

| 活動 | 說明 |
|------|------|
| 測試 | 驗證產品行為 |
| 審查 | 檢查工作產出 |
| 檢驗 | 確認符合標準 |
| 缺陷追蹤 | 追蹤和管理缺陷 |

---

## 15.6 品質文化

### 15.6.1 品質是團隊責任

品質不是 QA 的責任，是**整個團隊**的責任。

| 角色 | 品質責任 |
|------|----------|
| 開發者 | 寫高品質程式碼、寫測試 |
| 測試者 | 驗證品質、提供回饋 |
| PM | 平衡品質和時程 |
| 架構師 | 設計可維護的架構 |
| 管理者 | 提供資源、建立文化 |

### 15.6.2 建立品質文化

| 實踐 | 說明 |
|------|------|
| 定義完成 | 「完成」包含品質標準 |
| 自動化 | 自動測試、CI/CD |
| 可見性 | 品質儀表板 |
| 回顧 | 定期討論品質問題 |
| 賦權 | 團隊可以為品質做決策 |

### 15.6.3 「停止生產線」文化

來自豐田的概念：發現問題時，任何人都可以停止生產線。

**在軟體開發中**：
- 發現嚴重 bug，可以暫停開發
- 品質問題優先於新功能
- 不帶著問題繼續前進

---

## 15.7 本章總結

### 核心概念

| 概念 | 一句話解釋 |
|------|-----------|
| 軟體品質 | 滿足明確和隱含需求的程度 |
| 品質成本 | 預防 + 評估 + 失敗成本 |
| 技術債 | 為了短期速度犧牲長期品質 |
| QA vs QC | 流程 vs 產品，預防 vs 偵測 |
| 品質文化 | 品質是整個團隊的責任 |

### 品質度量速查表

| 類型 | 度量 |
|------|------|
| 可靠性 | MTBF, MTTR, 可用性 |
| 效能 | 回應時間, 吞吐量 |
| 可維護性 | 複雜度, 重複率, 覆蓋率 |
| 缺陷 | 缺陷密度, 修復時間 |

### 下一章預告

品質概念理解後，如何實踐？下一章我們將學習「審查的推薦方法」——Code Review 如何做得有效？

---

## 延伸思考

1. 你的團隊如何度量品質？有哪些指標？

2. 你的團隊有技術債嗎？如何管理？

3. 品質是誰的責任？你的團隊是如何分工的？

---

*下一章：第16章　審查（Review）的推薦方法*
