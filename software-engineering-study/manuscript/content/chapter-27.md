# 第27章　軟體支援策略

> 「軟體開發不是交付的那一刻結束，而是支援的開始。」

---

## 27.1 軟體支援的重要性

### 27.1.1 支援的生命週期

```
┌──────────────────────────────────────────────────────────────┐
│                    軟體生命週期                               │
│                                                              │
│   開發         上線          維護                退役         │
│    │            │             │                  │           │
│    ▼            ▼             ▼                  ▼           │
│  ┌────┐      ┌────┐      ┌──────────────────┐  ┌────┐       │
│  │開發│─────►│上線│─────►│      支援        │─►│退役│       │
│  └────┘      └────┘      └──────────────────┘  └────┘       │
│    │            │             │                  │           │
│  ~20%        瞬間           ~80%              瞬間           │
│  資源                       資源                             │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**事實**：軟體生命週期中，80% 的成本在維護階段。

### 27.1.2 支援的類型

| 類型 | 說明 | 範例 |
|------|------|------|
| **修正維護** | 修復 Bug | 修復登入錯誤 |
| **適應維護** | 適應環境變化 | 升級到新 OS |
| **完善維護** | 增加功能 | 新增報表功能 |
| **預防維護** | 預防問題 | 重構、效能優化 |

### 27.1.3 維護成本分佈

| 類型 | 比例 |
|------|------|
| 完善維護 | ~50% |
| 適應維護 | ~25% |
| 修正維護 | ~20% |
| 預防維護 | ~5% |

---

## 27.2 支援策略

### 27.2.1 服務層級協議（SLA）

| 要素 | 說明 |
|------|------|
| **可用性** | 系統正常運行的比例 |
| **回應時間** | 收到問題到開始處理 |
| **解決時間** | 從開始處理到解決 |
| **支援時間** | 什麼時候提供支援 |

**可用性計算**：

| 可用性 | 年停機時間 |
|--------|-----------|
| 99% | 3.65 天 |
| 99.9% | 8.76 小時 |
| 99.99% | 52.56 分鐘 |
| 99.999% | 5.26 分鐘 |

### 27.2.2 問題優先級

| 優先級 | 定義 | 回應時間 | 解決時間 |
|--------|------|----------|----------|
| P0/Critical | 系統無法使用 | 15 分鐘 | 4 小時 |
| P1/High | 重要功能無法使用 | 1 小時 | 1 天 |
| P2/Medium | 功能受限 | 4 小時 | 1 週 |
| P3/Low | 小問題 | 1 天 | 下次發布 |

### 27.2.3 支援流程

```
┌──────────────────────────────────────────────────────────────┐
│                      支援流程                                 │
│                                                              │
│  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐ │
│  │  報告  │─►│  分類  │─►│  調查  │─►│  解決  │─►│  關閉  │ │
│  │        │  │        │  │        │  │        │  │        │ │
│  └────────┘  └────────┘  └────────┘  └────────┘  └────────┘ │
│                                                              │
│      │           │           │           │           │       │
│      ▼           ▼           ▼           ▼           ▼       │
│   收到問題    判斷優先    找出原因    實施修復    驗證關閉     │
│   記錄資訊    分派處理    提出方案    測試部署    客戶確認     │
└──────────────────────────────────────────────────────────────┘
```

---

## 27.3 技術債管理

### 27.3.1 什麼是技術債？

**技術債（Technical Debt）**：為了短期快速交付而犧牲長期品質所累積的問題。

| 有意識 | 無意識 |
|--------|--------|
| 「先這樣，之後再改」 | 不知道更好的做法 |
| 故意的權衡 | 無心的錯誤 |

### 27.3.2 技術債的影響

```
┌──────────────────────────────────────────────────────────────┐
│                   技術債的惡性循環                            │
│                                                              │
│        ┌───────────────────────────────────────┐            │
│        │                                       │            │
│        ▼                                       │            │
│   ┌─────────┐     ┌─────────┐     ┌─────────┐ │            │
│   │  趕時間  │────►│ 留技術債 │────►│ 維護困難 │─┘            │
│   └─────────┘     └─────────┘     └─────────┘              │
│        ▲                               │                    │
│        │                               │                    │
│        │          ┌─────────┐          │                    │
│        └──────────│ 開發更慢 │◄─────────┘                    │
│                   └─────────┘                               │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### 27.3.3 技術債管理策略

| 策略 | 說明 |
|------|------|
| **識別** | 記錄已知的技術債 |
| **量化** | 評估償還成本和影響 |
| **優先** | 根據影響排序 |
| **償還** | 分配時間處理 |
| **預防** | 減少新增技術債 |

**建議比例**：每個 Sprint 分配 10-20% 時間償還技術債。

---

## 27.4 監控與告警

### 27.4.1 監控層次

| 層次 | 監控什麼 | 工具 |
|------|----------|------|
| **基礎設施** | CPU、記憶體、磁碟 | Prometheus |
| **應用** | 錯誤率、延遲 | APM |
| **業務** | 訂單數、轉換率 | Analytics |

### 27.4.2 關鍵指標

| 類型 | 指標 |
|------|------|
| **RED** | Rate, Error, Duration |
| **USE** | Utilization, Saturation, Errors |
| **Golden Signals** | Latency, Traffic, Errors, Saturation |

### 27.4.3 告警原則

| 原則 | 說明 |
|------|------|
| **可行動** | 告警必須需要人工介入 |
| **有意義** | 告警代表真正的問題 |
| **不過多** | 避免告警疲勞 |
| **分層級** | 區分緊急和重要 |

---

## 27.5 文件與知識管理

### 27.5.1 文件類型

| 類型 | 內容 | 讀者 |
|------|------|------|
| **用戶手冊** | 如何使用 | 用戶 |
| **操作手冊** | 如何運維 | 運維 |
| **開發文件** | 如何開發 | 開發者 |
| **故障手冊** | 如何處理問題 | 支援 |

### 27.5.2 Runbook

**Runbook**：處理特定問題的標準操作程序。

```markdown
# 處理服務 OOM

## 症狀
- 服務無回應
- 記憶體使用 > 90%
- 日誌出現 OOM 錯誤

## 診斷
1. 檢查記憶體使用：`kubectl top pods`
2. 檢查日誌：`kubectl logs <pod>`

## 處理
1. 重啟服務：`kubectl rollout restart deployment/<name>`
2. 如果持續發生，調整記憶體限制

## 根因分析
- 記錄發生時間和情況
- 開 Issue 追蹤
```

### 27.5.3 知識庫

| 內容 | 用途 |
|------|------|
| **FAQ** | 常見問題解答 |
| **已知問題** | 已知但未修復的問題 |
| **解決方案** | 問題的解決紀錄 |
| **經驗學習** | 事件後的總結 |

---

## 27.6 產品生命週期規劃

### 27.6.1 生命週期階段

```
┌──────────────────────────────────────────────────────────────┐
│                    產品生命週期                               │
│                                                              │
│   ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐│
│   │ 開發   │─►│ 成長   │─►│ 成熟   │─►│ 衰退   │─►│ 退役   ││
│   └────────┘  └────────┘  └────────┘  └────────┘  └────────┘│
│                                                              │
│       │           │           │           │           │      │
│       ▼           ▼           ▼           ▼           ▼      │
│    新功能      快速迭代    穩定維護    最小維護    停止支援   │
│    驗證市場    擴展功能    優化效能    安全更新    資料遷移   │
└──────────────────────────────────────────────────────────────┘
```

### 27.6.2 退役規劃

| 階段 | 活動 |
|------|------|
| **宣布** | 通知用戶退役計畫 |
| **過渡** | 提供遷移路徑 |
| **支援** | 有限支援期 |
| **關閉** | 停止服務 |
| **存檔** | 保留資料和程式碼 |

### 27.6.3 版本策略

| 策略 | 說明 |
|------|------|
| **滾動發布** | 只支援最新版 |
| **LTS** | 長期支援特定版本 |
| **N-1** | 支援當前和前一版本 |

---

## 27.7 本章總結

### 核心概念

| 概念 | 一句話解釋 |
|------|-----------|
| SLA | 服務品質承諾 |
| 技術債 | 短期權衡累積的問題 |
| Runbook | 標準操作程序 |
| 告警 | 需要人工介入的通知 |

### 支援策略 Checklist

| 項目 | 問題 |
|------|------|
| SLA | 有定義 SLA 嗎？ |
| 優先級 | 有問題優先級嗎？ |
| 流程 | 有支援流程嗎？ |
| 監控 | 有監控系統嗎？ |
| 告警 | 告警有意義嗎？ |
| 文件 | 有操作文件嗎？ |
| 知識庫 | 有累積知識嗎？ |

### 下一章預告

Part 4（專案管理）完成！接下來進入 Part 5（前沿議題），我們將學習「軟體流程改善」。

---

## 延伸思考

1. 你的專案有 SLA 嗎？有達成嗎？

2. 你的技術債有多少？有計畫償還嗎？

3. 你有 Runbook 嗎？問題發生時有標準處理嗎？

---

*Part 4 完成！下一章：第28章　軟體流程改善*
