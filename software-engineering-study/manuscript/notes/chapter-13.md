# 第13章　行動裝置上的軟體設計 — 學習筆記

> **狀態**：✅ 已完成
> **閱讀日期**：2025-12-27
> **教材位置**：[content/chapter-13.md](../content/chapter-13.md)

---

## 章前預測（5 分鐘）

### 這章應該回答什麼問題？

1. 行動裝置有什麼特殊限制？
2. 行動 UI 設計有哪些原則？
3. 原生 vs. 跨平台怎麼選？
4. 如何處理離線和網路不穩？

### 我現在的理解是什麼？

閱讀前，我的理解：
- 行動就是把桌面版縮小
- 跨平台比原生好（省錢）
- 離線支援很複雜，能不做就不做

### 我遇過哪些相關痛點？

1. **按鈕太小**：使用者抱怨點不到
2. **網路斷線就壞**：沒有離線處理
3. **啟動太慢**：冷啟動 5-6 秒

---

## 本章一句話

> **行動裝置不是縮小版桌面，而是不同的使用情境。設計時要考慮：觸控、小螢幕、網路不穩、電池有限。離線優先是關鍵架構決策。**

---

## 3 個關鍵概念

### 概念 1：觸控優先設計

**書中定義**：

觸控目標最小尺寸：
- iOS：44 × 44 pt
- Android：48 × 48 dp

常用按鈕放在拇指可及範圍（螢幕下方）。

**我的理解**：

這解釋了為什麼有些 App 用起來「卡卡的」——按鈕太小、位置不對。

**實際應用**：

```
✅ 好的設計
┌─────────────────────┐
│                     │
│    內容區域          │
│    （可以較小）       │
│                     │
│                     │
│                     │
├─────────────────────┤
│  ┌────┐  ┌────┐    │ ← 大按鈕（48dp+）
│  │確定│  │取消│    │ ← 在拇指可及範圍
│  └────┘  └────┘    │
└─────────────────────┘
```

**經驗法則**：
- 按鈕至少 48dp
- 間距至少 8dp
- 常用操作放底部

---

### 概念 2：離線優先架構

**書中定義**：

離線優先 = 本地資料庫為主，網路可用時同步。

架構：
1. UI 讀寫本地 DB
2. Sync Manager 處理同步
3. 衝突解決策略

**我的理解**：

以前我的做法：「有網路就用，沒網路就顯示錯誤。」

離線優先的做法：「先存本地，有網路再同步。」

**好處**：
- 網路不穩也能用
- 回應更快（不等網路）
- 電池更省（批次同步）

**實作考量**：

| 考量 | 做法 |
|------|------|
| 本地儲存 | SQLite, Realm, IndexedDB |
| 同步策略 | 全量 vs 增量 |
| 衝突解決 | 最後寫入勝、合併、手動解決 |
| 佇列 | 離線操作放入佇列 |

**簡單實作**：

```javascript
// 離線優先的 API 呼叫
async function fetchData() {
  // 1. 先讀本地
  const cached = await localDB.get('data');
  if (cached) {
    updateUI(cached);
  }

  // 2. 有網路就同步
  if (navigator.onLine) {
    try {
      const fresh = await api.fetch();
      await localDB.set('data', fresh);
      updateUI(fresh);
    } catch (e) {
      // 網路失敗，用快取
    }
  }
}
```

---

### 概念 3：應用類型選擇

**書中定義**：

| 類型 | 適用 |
|------|------|
| 原生 | 效能要求高、硬體存取多 |
| Web | 資訊展示、快速迭代 |
| 混合 | 跨平台、中等效能需求 |

**我的理解**：

沒有「最好」的選擇，要看情境。

**決策框架**：

```
效能要求高？
├─ 是 → 原生
└─ 否 → 繼續

需要大量硬體存取？
├─ 是 → 原生或混合
└─ 否 → 繼續

需要跨平台？
├─ 是 → 混合或 Web
└─ 否 → 原生

團隊技能？
├─ Web 技術強 → React Native / Web
├─ 原生技術強 → 原生
└─ Dart / Flutter 經驗 → Flutter
```

**2024 年趨勢**：
- Flutter 越來越成熟
- React Native 仍然主流
- PWA 適合簡單應用

---

## 原則、方法、護欄

### 行動設計原則速查表

| 原則 | 問題 | 解法 |
|------|------|------|
| 觸控優先 | 按鈕夠大嗎？ | ≥ 48dp，間距 ≥ 8dp |
| 內容優先 | 資訊太多嗎？ | 簡化、漸進式揭露 |
| 離線優先 | 斷網能用嗎？ | 本地儲存、背景同步 |
| 效能優先 | 啟動快嗎？ | 延遲載入、快取 |
| 電池優先 | 耗電嗎？ | 減少背景、批次處理 |

---

### 護欄（Guardrail）

| 危險信號 | 可能的問題 | 修正方式 |
|----------|-----------|----------|
| 按鈕太小 | 觸控目標不足 | 放大到 48dp+ |
| 斷網就壞 | 沒有離線處理 | 離線優先架構 |
| 啟動 > 3 秒 | 初始化太重 | 延遲載入 |
| 快速耗電 | 背景任務太多 | 批次處理 |
| 弱網卡死 | 沒有超時處理 | 超時 + 重試 |

---

## 1 個決策點

### 決策情境

**原生 vs. 跨平台：怎麼選？**

### 選項對比

| 面向 | 原生 | 跨平台（Flutter/RN） |
|------|------|----------------------|
| 效能 | 最佳 | 接近原生 |
| 開發成本 | 高（兩套） | 低（一套） |
| 維護成本 | 高 | 低 |
| 硬體存取 | 完整 | 大部分 |
| UI 一致性 | 平台原生 | 可能不一致 |
| 團隊要求 | iOS + Android 技能 | 一種技能 |

### 決策準則

**選原生**：
- 效能敏感（遊戲、視訊）
- 需要深度硬體存取
- 預算充足
- 已有原生團隊

**選跨平台**：
- 預算有限
- 需要快速上市
- 功能相對標準
- 團隊熟悉 Web 技術

**經驗法則**：
> 「先問效能需求，再問團隊技能，最後問預算。」

---

## 1 個反模式（Anti-pattern）

### 反模式名稱

**「桌面思維」症候群**

### 錯誤做法

把桌面版直接「塞進」手機：
- 按鈕很小（桌面滑鼠可以，觸控不行）
- 資訊量和桌面一樣多
- 沒有考慮單手操作
- 假設網路穩定

### 後果

1. **難以操作**：點不到、誤觸
2. **資訊過載**：看不完、找不到
3. **體驗差**：覺得「手機版很爛」
4. **離線壞掉**：一斷網就不能用

### 正確做法

1. **重新設計**：不是縮小，是重新思考
2. **減少資訊**：只保留核心
3. **觸控優化**：大按鈕、簡單手勢
4. **離線考量**：假設網路會斷

**檢驗標準**：
> 「這個操作可以單手、站著、走路時完成嗎？」

---

## 可落地 Checklist（至少 5 條）

行動應用設計時用這份清單：

- [x] **觸控目標**：按鈕 ≥ 48dp？間距 ≥ 8dp？
- [x] **拇指可及**：常用功能在螢幕下方嗎？
- [x] **離線支援**：斷網時顯示什麼？能做什麼？
- [x] **啟動時間**：冷啟動 < 3 秒？
- [x] **網路處理**：弱網有處理嗎？有重試嗎？
- [x] **電池**：有不必要的背景任務嗎？
- [x] **中斷恢復**：來電後能恢復狀態嗎？

---

## 章後練習

### 練習：評估一個 App 的行動設計

> 目標：用本章原則評估一個 App

**評估結果**（以某電商 App 為例）：

| 原則 | 評估 | 改善建議 |
|------|------|----------|
| 觸控目標 | ⚠️ 部分按鈕太小 | 放大結帳按鈕 |
| 拇指可及 | ✅ 底部 Tab 導航 | - |
| 離線支援 | ❌ 斷網就空白 | 快取商品資料 |
| 啟動時間 | ⚠️ 約 4 秒 | 延遲載入廣告 |
| 網路處理 | ⚠️ 弱網會卡 | 加超時和重試 |

**優先改善**：
1. 離線快取（改善最大）
2. 啟動時間優化
3. 弱網處理

---

## 延伸思考

### 你的 App 支援離線嗎？應該嗎？

**我的思考**：

看應用類型：

| 類型 | 需要離線？ | 原因 |
|------|-----------|------|
| 新聞閱讀 | ✅ 是 | 捷運沒網路也要看 |
| 銀行轉帳 | ❌ 否 | 必須即時確認 |
| 待辦事項 | ✅ 是 | 隨時要記錄 |
| 即時通訊 | ⚠️ 部分 | 可以寫，發送等網路 |
| 導航 | ✅ 是 | 開車時網路不穩 |

**我的策略**：
- 讀取操作：盡量支援離線（快取）
- 寫入操作：佇列 + 背景同步
- 即時操作：顯示「需要網路」

### 你的團隊如何選擇原生 vs. 跨平台？

**我的經驗**：

實際決策因素：

1. **團隊技能**（最重要）
   - 有 iOS/Android 工程師 → 可以考慮原生
   - 只有 Web 工程師 → 跨平台

2. **時程壓力**
   - 要快 → 跨平台
   - 可以慢 → 看效能需求

3. **效能需求**
   - 遊戲、視訊 → 原生
   - 一般應用 → 跨平台夠了

---

## 完成確認

- [x] 完成章前預測
- [x] 讀完本章
- [x] 填寫本章一句話
- [x] 填寫 3 個關鍵概念
- [x] 填寫原則、方法、護欄
- [x] 填寫 1 個決策點
- [x] 填寫 1 個反模式
- [x] 填寫 Checklist
- [x] 完成章後練習
- [x] 完成延伸思考

**完成日期**：2025-12-27
