# 第8章　需求建模的推薦方法 — 學習筆記

> **狀態**：✅ 已完成
> **閱讀日期**：2025-12-27
> **教材位置**：[content/chapter-08.md](../content/chapter-08.md)

---

## 章前預測（5 分鐘）

### 這章應該回答什麼問題？

1. 什麼時候需要建模？什麼時候不需要？
2. 有哪些建模方法？各自適合什麼場景？
3. 如何選擇適當的建模方法？
4. 敏捷中如何進行建模？

### 我現在的理解是什麼？

閱讀前，我的理解：
- UML 很複雜，很少人完整使用
- 畫圖是額外工作，會拖慢進度
- 只有大型專案才需要建模

### 我遇過哪些相關痛點？

1. **過度建模**：花很多時間畫圖，但沒人看
2. **模型過時**：畫完就沒更新，和實際系統不符
3. **選錯工具**：用複雜的 UML 工具，學習成本高

---

## 本章一句話

> **模型是用來溝通的，不是用來裝飾文件的。只做必要的模型，選擇最能幫助理解的建模方法。**

---

## 3 個關鍵概念

### 概念 1：模型的目的是溝通

**書中定義**：

模型的價值：
- **溝通**：用圖形比文字更容易理解
- **分析**：發現遺漏、矛盾、複雜度
- **驗證**：確認理解是否正確
- **設計導引**：從需求推導設計

**我的理解**：

以前我把建模當成「文件工作」，其實建模是**溝通工具**。

**檢驗標準**：
- 這個圖有幫助理解嗎？
- 有人會看這個圖嗎？
- 不畫這個圖，用什麼方式溝通？

**實際應用**：
- 複雜流程 → 活動圖（比文字清楚）
- 資料關係 → ER 圖（比描述清楚）
- 簡單 CRUD → 不需要圖

---

### 概念 2：根據目的和受眾選擇建模方法

**書中定義**：

| 目的 | 推薦方法 |
|------|----------|
| 展示系統功能範圍 | 使用案例圖 |
| 展示業務流程 | 活動圖 |
| 展示資料結構 | ER 圖、類別圖 |
| 展示物件狀態變化 | 狀態圖 |
| 展示互動順序 | 序列圖 |

| 受眾 | 推薦方法 |
|------|----------|
| 業務人員 | 使用案例圖、活動圖 |
| 開發者 | 類別圖、序列圖 |
| 測試人員 | 使用案例、狀態圖 |

**我的理解**：

以前我的錯誤是「畫一張圖給所有人看」。

正確做法是：
1. **先問受眾是誰**：給誰看的？
2. **再問目的是什麼**：要傳達什麼？
3. **最後選方法**：用最適合的圖

**例子**：
- 給 PM 解釋功能 → 使用案例圖
- 給開發者說明流程 → 序列圖
- 給 DBA 說明資料 → ER 圖

---

### 概念 3：敏捷中的建模原則

**書中定義**：

敏捷建模原則：
1. **夠用就好**：不需要完整的 UML
2. **白板優先**：先在白板上畫
3. **對話為主**：模型是對話工具
4. **及時建模**：需要時才做

**我的理解**：

敏捷不是「不建模」，而是「聰明地建模」。

| 傳統建模 | 敏捷建模 |
|----------|----------|
| 預先完成 | 需要時做 |
| 正式工具 | 白板草圖 |
| 完整文件 | 夠用就好 |
| 獨立活動 | 和開發整合 |

**實踐**：
- **模型風暴**：5-10 分鐘快速討論
- **CRC 卡片**：用卡片探索類別責任
- **即興建模**：需要時才畫
- **草圖**：手繪非正式圖表

**工具選擇**：
- 即時討論 → 白板、便利貼
- 需要分享 → draw.io、Miro
- 需要版本控制 → PlantUML、Mermaid

---

## 原則、方法、護欄

### 建模方法速查表

| 方法 | 目的 | 元素 | 適用時機 |
|------|------|------|----------|
| 使用案例圖 | 系統功能邊界 | 參與者、使用案例、關聯 | 專案初期、溝通範圍 |
| 活動圖 | 業務流程 | 活動、決策、泳道 | 複雜流程、跨角色 |
| ER 圖 | 資料結構 | 實體、屬性、關係 | 資料庫設計 |
| 類別圖 | OOP 設計 | 類別、屬性、方法、關係 | 詳細設計 |
| 狀態圖 | 狀態變化 | 狀態、轉換、事件 | 生命週期複雜的物件 |
| 序列圖 | 互動順序 | 物件、訊息、生命線 | API 設計、流程說明 |

---

### 護欄（Guardrail）

| 危險信號 | 可能原因 | 修正方式 |
|----------|----------|----------|
| 沒人看圖 | 目的不明確 | 問「這張圖幫助誰理解什麼？」 |
| 圖和系統不符 | 沒有維護 | 用文字轉圖工具、減少圖的數量 |
| 畫圖花太多時間 | 過度建模 | 白板草圖、夠用就好 |
| 選錯圖的類型 | 不了解受眾 | 先問「給誰看？要說明什麼？」 |
| 圖太複雜看不懂 | 一張圖做太多事 | 分層、多張圖 |

---

## 1 個決策點

### 決策情境

**這個需求需要建模嗎？用什麼方法？**

### 決策流程

```
需要建模嗎？
│
├─ 簡單直觀 → 不需要
│
├─ 需要溝通 → 繼續
│   │
│   ├─ 給誰看？
│   │   ├─ 業務人員 → 使用案例圖、活動圖
│   │   ├─ 開發者 → 序列圖、類別圖
│   │   └─ DBA → ER 圖
│   │
│   └─ 說明什麼？
│       ├─ 功能範圍 → 使用案例圖
│       ├─ 業務流程 → 活動圖
│       ├─ 資料關係 → ER 圖
│       ├─ 狀態變化 → 狀態圖
│       └─ 互動順序 → 序列圖
│
└─ 需要正式文件嗎？
    ├─ 是 → UML 工具或文字轉圖
    └─ 否 → 白板草圖
```

---

## 1 個反模式（Anti-pattern）

### 反模式名稱

**「建模聖殿」症候群**（Modeling Cathedral）

### 錯誤做法

花大量時間建立完美的 UML 模型：
- 用昂貴的 UML 工具
- 所有圖都要完整規範
- 專門的建模團隊
- 模型必須簽核後才能開發

### 後果

1. **建模變成瓶頸**：等模型完成才能開發
2. **模型和實作脫節**：模型太理想，實作不一樣
3. **浪費時間**：很多模型沒人用
4. **抗拒變更**：改模型太麻煩，乾脆不改

### 正確做法

1. **白板優先**：能用白板就用白板
2. **夠用就好**：不需要完整 UML
3. **版本控制**：用 PlantUML/Mermaid，和程式碼一起版控
4. **及時建模**：需要時才做，需要什麼做什麼
5. **快速迭代**：模型隨需求演進

---

## 可落地 Checklist（至少 5 條）

決定是否建模時，用這份清單：

- [x] **目的明確**：這張圖要幫助誰理解什麼？
- [x] **受眾適合**：圖的複雜度適合受眾嗎？
- [x] **夠用就好**：只做需要的，不多做
- [x] **可維護**：用容易更新的工具（白板/PlantUML）
- [x] **有人負責**：有人負責維護這張圖嗎？
- [x] **有生命週期**：什麼時候可以刪掉這張圖？

---

## 章後練習

### 練習：選擇適當的建模方法

> 情境：要向新進開發者說明「訂單」的生命週期

**分析**：
- **受眾**：開發者
- **目的**：理解訂單的狀態變化
- **複雜度**：訂單有多個狀態，需要清楚顯示

**選擇**：狀態圖

**草圖**：

```
[建立] --付款成功--> [已付款] --出貨--> [已出貨] --送達--> [已完成]
                         |                |
                         v                v
                     [已取消] <---------取消
```

**工具選擇**：
- 即時說明 → 白板
- 放入文件 → Mermaid（可版控）

---

## 延伸思考

### 你的團隊建模的主要痛點是什麼？

**我的思考**：

主要痛點：

1. **模型過時**（最大問題）
   - 解法：用文字轉圖（Mermaid/PlantUML）
   - 放在程式碼旁邊，一起版控
   - 減少模型數量，只維護必要的

2. **工具學習成本高**
   - 解法：先用白板
   - 需要正式文件再轉成工具

3. **不知道要畫什麼**
   - 解法：先問目的和受眾
   - 用速查表選擇方法

### 如何確保模型不會過時？

**我的策略**：

1. **減少模型數量**
   - 只做必要的模型
   - 刪掉不維護的模型

2. **放在程式碼旁邊**
   - 用 Mermaid/PlantUML
   - 和程式碼一起版控
   - 改程式碼時順便更新

3. **定義生命週期**
   - 這個模型什麼時候可以刪？
   - 設定過期提醒

4. **責任明確**
   - 誰負責這個模型？
   - 沒人負責就刪掉

---

## 完成確認

- [x] 完成章前預測
- [x] 讀完本章
- [x] 填寫本章一句話
- [x] 填寫 3 個關鍵概念
- [x] 填寫原則、方法、護欄
- [x] 填寫 1 個決策點
- [x] 填寫 1 個反模式
- [x] 填寫 Checklist
- [x] 完成章後練習
- [x] 完成延伸思考

**完成日期**：2025-12-27
