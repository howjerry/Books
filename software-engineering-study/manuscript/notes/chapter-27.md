# 第27章　軟體支援策略 — 學習筆記

> **狀態**：✅ 已完成
> **閱讀日期**：2025-12-27
> **教材位置**：[content/chapter-27.md](../content/chapter-27.md)

---

## 章前預測（5 分鐘）

### 這章應該回答什麼問題？

1. 軟體上線後需要什麼支援？
2. 如何定義服務層級？
3. 如何管理技術債？
4. 如何規劃產品生命週期？

### 我現在的理解是什麼？

閱讀前，我的理解：
- 支援 = 修 Bug
- 上線就結束了
- 技術債以後再說

### 我遇過哪些相關痛點？

1. **上線後沒人管**：開發完就解散
2. **技術債累積**：越來越難維護
3. **問題處理混亂**：不知道誰該處理

---

## 本章一句話

> **軟體 80% 的成本在維護階段。定義清楚的 SLA 和問題優先級，建立支援流程，管理技術債，準備好 Runbook，規劃產品生命週期直到退役。**

---

## 3 個關鍵概念

### 概念 1：80% 成本在維護

**書中定義**：

軟體生命週期中，維護階段佔 80% 的成本。

| 維護類型 | 比例 | 說明 |
|----------|------|------|
| 完善維護 | 50% | 加新功能 |
| 適應維護 | 25% | 適應環境 |
| 修正維護 | 20% | 修 Bug |
| 預防維護 | 5% | 重構、優化 |

**我的理解**：

這改變了我對「專案結束」的認知。

**以前**：上線就結束了
**現在**：上線只是開始

**意義**：
- 設計時要考慮可維護性
- 需要規劃維護資源
- 技術債會放大維護成本

**經驗法則**：
> 「寫程式碼時，想想維護它的人。」

---

### 概念 2：SLA 和問題優先級

**書中定義**：

| 優先級 | 回應 | 解決 | 範例 |
|--------|------|------|------|
| P0 | 15 分 | 4 小時 | 系統無法使用 |
| P1 | 1 小時 | 1 天 | 重要功能壞了 |
| P2 | 4 小時 | 1 週 | 功能受限 |
| P3 | 1 天 | 下次發布 | 小問題 |

**我的理解**：

有優先級才能正確分配資源。

**沒有優先級的問題**：
- 所有問題都「緊急」
- 真正緊急的被埋沒
- 團隊疲於奔命

**建立優先級的好處**：
- 知道什麼該先處理
- 設定合理期待
- 資源分配更合理

**經驗法則**：
> 「不是每個問題都是 P0，如果都是 P0，就等於沒有 P0。」

---

### 概念 3：Runbook

**書中定義**：

處理特定問題的標準操作程序。

| 內容 | 說明 |
|------|------|
| 症狀 | 問題表現 |
| 診斷 | 如何確認問題 |
| 處理 | 步驟化的解決方法 |
| 後續 | 根因分析、預防 |

**我的理解**：

Runbook 的價值：
- 新人也能處理
- 凌晨三點也能處理
- 處理一致、可追蹤

**範例**：

```
# 服務回應慢

## 症狀
- API 回應時間 > 2 秒
- 告警觸發

## 診斷
1. 檢查 CPU/Memory
2. 檢查資料庫連線
3. 檢查相依服務

## 處理
- 如果 CPU 高：擴容
- 如果 DB 慢：檢查慢查詢
- 如果相依服務慢：聯繫該服務

## 後續
- 記錄事件
- 開 Issue 追蹤
```

**經驗法則**：
> 「處理過一次的問題，就該有 Runbook。」

---

## 原則、方法、護欄

### 支援能力建設

| 能力 | 做什麼 | 工具 |
|------|--------|------|
| 監控 | 知道系統狀態 | Prometheus |
| 告警 | 知道有問題 | PagerDuty |
| 日誌 | 知道發生什麼 | ELK |
| 追蹤 | 知道誰在處理 | Jira |
| 知識 | 知道怎麼處理 | Runbook |

---

### 護欄（Guardrail）

| 危險信號 | 可能的問題 | 修正方式 |
|----------|-----------|----------|
| 沒有 SLA | 期待不清 | 定義 SLA |
| 所有問題都 P0 | 優先級失效 | 嚴格分類 |
| 沒有 Runbook | 依賴個人 | 建立 Runbook |
| 技術債累積 | 維護越來越難 | 分配時間償還 |
| 告警太多 | 告警疲勞 | 減少無效告警 |

---

## 1 個決策點

### 決策情境

**技術債該什麼時候還？**

### 選項對比

| 選項 | 優點 | 缺點 |
|------|------|------|
| 現在還 | 避免累積 | 影響功能開發 |
| 以後還 | 先交付功能 | 越積越多 |
| 專門 Sprint | 集中處理 | 功能停滯 |
| 持續還 | 平衡 | 需要紀律 |

### 決策準則

| 情境 | 建議 |
|------|------|
| 技術債影響開發速度 | 優先處理 |
| 技術債有安全風險 | 立即處理 |
| 技術債影響小 | 排隊處理 |
| 功能優先 | 持續分配 10-20% |

**我的策略**：
- 每個 Sprint 分配 20% 時間處理技術債
- 高影響的優先處理
- 記錄所有技術債

**經驗法則**：
> 「技術債像信用卡，不還會有利息。」

---

## 1 個反模式（Anti-pattern）

### 反模式名稱

**「交付就解散」症候群**

### 錯誤做法

專案上線後，團隊就解散：
- 「專案結束了」
- 「維護？那是運維的事」
- 「有問題找當初寫的人」

### 後果

1. **知識流失**：沒人知道怎麼改
2. **問題處理慢**：找不到對的人
3. **品質下降**：沒人負責
4. **技術債累積**：沒人還

### 正確做法

**規劃維護資源**：

| 面向 | 做法 |
|------|------|
| 團隊 | 保留部分開發者 |
| 知識 | 文件化、Runbook |
| 流程 | 支援流程、輪班 |
| 預算 | 預留維護預算 |

**檢驗標準**：
> 「上線一年後，誰負責這個系統？」

---

## 可落地 Checklist（至少 5 條）

支援策略檢查：

- [x] **SLA**：定義了服務層級嗎？
- [x] **優先級**：有問題分類嗎？
- [x] **流程**：有支援流程嗎？
- [x] **監控**：有監控系統嗎？
- [x] **告警**：告警有意義嗎？
- [x] **Runbook**：有操作手冊嗎？
- [x] **知識庫**：有累積知識嗎？
- [x] **技術債**：有追蹤和償還計畫嗎？

---

## 章後練習

### 練習：規劃你的支援策略

> 目標：為你的專案建立支援策略

**SLA 定義**：

| 指標 | 目標 |
|------|------|
| 可用性 | 99.9% |
| P0 回應 | < 15 分鐘 |
| P0 解決 | < 4 小時 |
| P1 解決 | < 1 天 |

**問題優先級定義**：

| 優先級 | 定義 | 範例 |
|--------|------|------|
| P0 | 服務無法使用 | 網站打不開 |
| P1 | 核心功能無法使用 | 無法下單 |
| P2 | 功能受限 | 報表跑不出來 |
| P3 | 小問題 | 排版跑掉 |

**待建立的 Runbook**：

1. 服務無回應
2. 資料庫連線滿
3. API 回應慢
4. 磁碟空間不足
5. 安全事件處理

---

## 延伸思考

### 開發者需要輪值 On-call 嗎？

**我的看法**：

需要，但要有配套。

**好處**：
- 更在意程式碼品質
- 了解實際運行狀況
- 責任感

**配套**：
- 合理的輪值頻率
- 有補償（時間或金錢）
- 有 Runbook
- 有升級機制

**經驗法則**：
> 「寫程式碼的人，也該處理它造成的問題。」

### 如何讓團隊重視可維護性？

**我的策略**：

1. **讓維護成本可見**
   - 追蹤維護時間
   - 報告技術債影響

2. **輪值 On-call**
   - 自己處理自己製造的問題
   - 產生改善動機

3. **設計審查**
   - 審查可維護性
   - 不只看功能

4. **量化**
   - 追蹤維護 Bug 數
   - 追蹤修復時間

---

## Part 4 完成回顧

### 完成章節

| 章節 | 主題 |
|------|------|
| 24 | 專案管理的概念 |
| 25 | 可行且有用的軟體計畫 |
| 26 | 風險管理 |
| 27 | 軟體支援策略 |

### 核心收穫

1. **鐵三角**：範圍、時間、成本相互制約
2. **估算**：使用適當方法，加入緩衝
3. **風險管理**：識別、評估、應對、監控
4. **支援**：80% 成本在維護，需要規劃

---

## 完成確認

- [x] 完成章前預測
- [x] 讀完本章
- [x] 填寫本章一句話
- [x] 填寫 3 個關鍵概念
- [x] 填寫原則、方法、護欄
- [x] 填寫 1 個決策點
- [x] 填寫 1 個反模式
- [x] 填寫 Checklist
- [x] 完成章後練習
- [x] 完成延伸思考

**完成日期**：2025-12-27
