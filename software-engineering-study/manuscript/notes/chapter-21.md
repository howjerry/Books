# 第21章　軟體測試——行動裝置與特定領域的測試 — 學習筆記

> **狀態**：✅ 已完成
> **閱讀日期**：2025-12-27
> **教材位置**：[content/chapter-21.md](../content/chapter-21.md)

---

## 章前預測（5 分鐘）

### 這章應該回答什麼問題？

1. 行動測試有什麼特殊考量？
2. 如何選擇測試哪些裝置？
3. 效能測試怎麼做？
4. 不同領域有什麼特殊需求？

### 我現在的理解是什麼？

閱讀前，我的理解：
- 行動測試就是在手機上點點看
- 測幾台熱門手機就夠了
- 效能測試 = 量回應時間

### 我遇過哪些相關痛點？

1. **某些裝置壞掉**：開發者手機 OK，用戶手機出問題
2. **網路問題沒測**：弱網環境 App 當掉
3. **效能基準不清**：不知道多快算夠快

---

## 本章一句話

> **不同領域有不同的測試重點。行動測試要考慮裝置多樣性和網路變化；Web 要考慮跨瀏覽器和可及性；效能測試要有明確的指標和基準。**

---

## 3 個關鍵概念

### 概念 1：裝置覆蓋策略

**書中定義**：

不可能測所有裝置，需要策略性選擇：
- 市佔率高的
- 不同螢幕尺寸
- 不同 OS 版本
- 不同製造商

**我的理解**：

這解決了「要測幾台？」的問題。

**我的策略**：

| 維度 | 選擇 |
|------|------|
| OS | iOS 最新 + 前一版；Android 最新 + 前兩版 |
| 螢幕 | 小、中、大各一 |
| 製造商 | Apple、Samsung、小米/Pixel |
| 等級 | 高、中、低階各一 |

**結果**：約 8-10 台裝置覆蓋大多數情況。

**經驗法則**：
> 「覆蓋 80% 市佔率的裝置，就能發現 80% 的問題。」

---

### 概念 2：效能測試類型

**書中定義**：

| 類型 | 目的 |
|------|------|
| 負載測試 | 驗證正常負載 |
| 壓力測試 | 找出極限 |
| 耐久測試 | 長期穩定性 |
| 尖峰測試 | 突發流量 |

**我的理解**：

不同問題用不同測試：

| 問題 | 用什麼測試 |
|------|-----------|
| 「能撐住日常流量嗎？」 | 負載測試 |
| 「極限是多少？」 | 壓力測試 |
| 「跑久了會不會記憶體洩漏？」 | 耐久測試 |
| 「雙 11 撐得住嗎？」 | 尖峰測試 |

**效能測試流程**：

1. 定義指標（P99 延遲、吞吐量）
2. 設定基準（目標值）
3. 執行測試
4. 分析結果
5. 優化瓶頸
6. 重新測試

---

### 概念 3：可及性測試

**書中定義**：

確保所有人都能使用，包括：
- 視覺障礙
- 聽覺障礙
- 行動障礙
- 認知障礙

**我的理解**：

以前認為「可及性是額外的」，現在理解「可及性是基本的」。

**快速檢查**：

| 項目 | 檢查方式 |
|------|----------|
| 鍵盤操作 | 只用鍵盤能完成嗎？ |
| 顏色對比 | 顏色對比度夠嗎？ |
| 替代文字 | 圖片有 alt 嗎？ |
| 表單標籤 | 輸入框有 label 嗎？ |
| 焦點可見 | 能看到焦點在哪嗎？ |

**工具**：
- axe DevTools（瀏覽器插件）
- Lighthouse（Chrome 內建）
- VoiceOver（Mac）/ NVDA（Windows）

**經驗法則**：
> 「可及性好的網站，對所有人都好用。」

---

## 原則、方法、護欄

### 領域測試速查表

| 領域 | 重點 | 工具 |
|------|------|------|
| 行動 | 裝置覆蓋、網路情境 | Espresso, XCUITest |
| Web | 跨瀏覽器、可及性 | Selenium, Cypress |
| API | 功能、效能、安全 | Postman, k6 |
| 效能 | 負載、壓力、耐久 | JMeter, k6 |
| 安全 | SAST、DAST | OWASP ZAP, Snyk |

---

### 護欄（Guardrail）

| 危險信號 | 可能的問題 | 修正方式 |
|----------|-----------|----------|
| 只測開發者手機 | 裝置覆蓋不足 | 建立裝置矩陣 |
| 從不測弱網 | 網路問題沒發現 | 加弱網測試 |
| 沒有效能基準 | 不知道多快算夠 | 定義 SLO |
| 忽略可及性 | 部分用戶無法使用 | 加可及性檢查 |
| 效能測試只做一次 | 效能衰退沒發現 | 持續效能測試 |

---

## 1 個決策點

### 決策情境

**模擬器 vs. 真機測試？**

### 選項對比

| 選項 | 優點 | 缺點 |
|------|------|------|
| 模擬器 | 快、免費、方便 CI | 不完全真實 |
| 真機 | 最真實 | 慢、成本高、維護難 |
| 雲端裝置 | 種類多、免維護 | 成本 |

### 決策準則

| 情境 | 建議 |
|------|------|
| 日常開發 | 模擬器 |
| CI/CD | 模擬器 + 少量真機 |
| 發布前 | 真機或雲端 |
| 效能測試 | 真機 |
| 感應器功能 | 真機 |

**經驗法則**：
> 「開發用模擬器，發布前用真機。」

---

## 1 個反模式（Anti-pattern）

### 反模式名稱

**「開發者手機症候群」**

### 錯誤做法

只測試開發者自己的裝置：
- 開發者用最新 iPhone
- 開發者用好網路
- 開發者用高效能電腦

### 後果

1. **裝置問題沒發現**：舊手機、低階手機
2. **網路問題沒發現**：弱網、斷網
3. **效能問題沒發現**：低階裝置卡頓
4. **用戶抱怨**：「你們的 App 很爛」

### 正確做法

1. **建立裝置矩陣**
   - 覆蓋不同層級
   - 包含舊款裝置

2. **模擬真實情境**
   - 弱網測試
   - 低電量測試

3. **用數據決定**
   - 分析用戶裝置分佈
   - 優先測高佔比裝置

**檢驗標準**：
> 「我們測過用戶最常用的裝置嗎？」

---

## 可落地 Checklist（至少 5 條）

測試特定領域時檢查：

**行動測試**：
- [x] 覆蓋主流裝置？
- [x] 弱網測試？
- [x] 中斷測試（來電、切背景）？
- [x] 螢幕旋轉？

**Web 測試**：
- [x] 跨瀏覽器？
- [x] 響應式？
- [x] 可及性（鍵盤、對比、alt）？

**效能測試**：
- [x] 有明確指標？
- [x] 有基準值？
- [x] 有負載/壓力測試？

---

## 章後練習

### 練習：建立你的裝置測試矩陣

> 目標：設計行動測試的裝置矩陣

**我的產品用戶分析**：

| OS | 佔比 |
|----|------|
| iOS | 45% |
| Android | 55% |

| 螢幕尺寸 | 佔比 |
|---------|------|
| 小（< 5.5 吋） | 15% |
| 中（5.5-6.5 吋） | 60% |
| 大（> 6.5 吋） | 25% |

**我的裝置矩陣**：

| 優先級 | 裝置 | OS | 螢幕 | 等級 |
|--------|------|-----|------|------|
| P0 | iPhone 14 Pro | iOS 17 | 大 | 高 |
| P0 | Samsung S23 | Android 14 | 大 | 高 |
| P1 | iPhone SE | iOS 16 | 小 | 中 |
| P1 | Pixel 7 | Android 13 | 中 | 高 |
| P2 | iPhone 12 | iOS 15 | 中 | 中 |
| P2 | 小米 12 | Android 12 | 中 | 中 |
| P3 | Samsung A13 | Android 12 | 中 | 低 |

**測試策略**：
- P0：每次發布前必測
- P1：每週回歸測試
- P2：重大版本測試
- P3：抽測

---

## 延伸思考

### 如何在 CI 中做行動測試？

**我的策略**：

```yaml
# CI 配置
stages:
  - unit_test       # 單元測試（快）
  - emulator_test   # 模擬器 UI 測試
  - device_cloud    # 雲端真機（發布前）

emulator_test:
  - iOS 17 Simulator
  - Android 14 Emulator
  # 快速回饋

device_cloud:
  - Firebase Test Lab
  - 8 台裝置矩陣
  # 發布前完整測試
```

### 效能測試應該多頻繁？

**我的建議**：

| 類型 | 頻率 |
|------|------|
| 快速效能檢查 | 每次 PR |
| 完整負載測試 | 每週 |
| 壓力/耐久測試 | 發布前 |
| 基準比較 | 每月 |

**持續效能測試的好處**：
- 早期發現效能衰退
- 有歷史數據可比較
- 防止「慢慢變慢」

---

## 完成確認

- [x] 完成章前預測
- [x] 讀完本章
- [x] 填寫本章一句話
- [x] 填寫 3 個關鍵概念
- [x] 填寫原則、方法、護欄
- [x] 填寫 1 個決策點
- [x] 填寫 1 個反模式
- [x] 填寫 Checklist
- [x] 完成章後練習
- [x] 完成延伸思考

**完成日期**：2025-12-27
