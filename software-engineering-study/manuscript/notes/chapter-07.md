# 第7章　需求工程 — 學習筆記

> **狀態**：✅ 已完成
> **閱讀日期**：2025-12-27
> **教材位置**：[content/chapter-07.md](../content/chapter-07.md)

---

## 章前預測（5 分鐘）

### 這章應該回答什麼問題？

1. 什麼是需求？需求有哪些類型？
2. 需求工程的流程是什麼？
3. 如何發掘使用者真正的需求？
4. 如何處理需求變更和衝突？

### 我現在的理解是什麼？

閱讀前，我的理解：
- 需求就是使用者說要什麼
- 寫好需求文件就完成了
- 需求變更是萬惡之源

### 我遇過哪些相關痛點？

1. **使用者說不清楚**：「就是要那個功能，你懂的」
2. **做完才說不對**：「我當初的意思不是這樣」
3. **需求一直變**：剛做完又要改

---

## 本章一句話

> **需求工程不是「記錄使用者說的話」，而是「發現使用者真正需要什麼」。投資在需求階段的時間，是最划算的投資。**

---

## 3 個關鍵概念

### 概念 1：需求的三個層次

**書中定義**：

| 層次 | 關注點 | 例子 |
|------|--------|------|
| 業務需求 | 為什麼要這個系統？ | 提高客服效率 30% |
| 使用者需求 | 使用者要完成什麼任務？ | 客服人員可以搜尋歷史對話 |
| 系統需求 | 系統要提供什麼功能和限制？ | 搜尋結果在 2 秒內返回 |

**我的理解**：

這個分層解釋了為什麼「使用者說的」和「使用者需要的」往往不同。

使用者說的是**解決方案層級**（我要一個按鈕...），但他們真正需要的是**任務層級**（我要能快速找到資料），而背後的驅動力是**業務層級**（提高效率）。

**經驗對照**：
- 使用者說「我要一個匯出 Excel 的功能」
- 追問後發現「我需要把資料給主管看」
- 再追問「主管其實只需要看總數」
- 最終解法：加一個儀表板，不需要匯出

**檢驗方式**：對每個需求問「為什麼？」，直到到達業務層級。

---

### 概念 2：需求工程的五步流程

**書中定義**：

```
發掘 → 分析 → 協商 → 規範 → 管理
```

這是一個迭代的流程，不是一次性的。

**我的理解**：

以前我的做法是「開會 → 寫文件 → 開發」，跳過了幾個關鍵步驟：

| 步驟 | 我以前的做法 | 應該怎麼做 |
|------|-------------|-----------|
| 發掘 | 開會問一次 | 多種技術並用（訪談、觀察、原型） |
| 分析 | 直接照做 | 分類、建模、識別衝突和遺漏 |
| 協商 | 誰聲音大聽誰的 | 以使用者價值為中心，用數據說話 |
| 規範 | 寫很長的文件 | 使用者故事 + 驗收標準 |
| 管理 | 沒有追蹤 | 追溯矩陣、變更控制 |

**最重要的改變**：發掘不是「問使用者要什麼」，而是「理解使用者真正需要什麼」。

---

### 概念 3：使用者故事與驗收標準

**書中定義**：

使用者故事：
```
作為 [角色]
我想要 [功能]
以便 [價值]
```

驗收標準：
```
Given [情境]
When [行動]
Then [結果]
```

**我的理解**：

使用者故事的價值不在於格式，而在於它強迫你思考：
1. **誰**需要這個（角色）
2. 需要**什麼**（功能）
3. **為什麼**需要（價值）

驗收標準的價值在於它是**可測試的**——可以直接轉換成測試案例。

**例子**：

使用者故事：
```
作為客服人員
我想要搜尋歷史對話記錄
以便快速找到客戶過去的問題
```

驗收標準：
```
Given 我已登入系統
When 我輸入客戶電話號碼 0912345678 並按搜尋
Then 顯示該客戶過去 90 天的所有對話記錄，按時間倒序排列
```

**INVEST 原則**提醒我故事要夠小、獨立、有價值。

---

## 原則、方法、護欄

### 原則速查表

| 原則 | 適用情境 | 一句話 |
|------|----------|--------|
| 需求分層 | 理解需求時 | 業務 → 使用者 → 系統 |
| 多方發掘 | 收集需求時 | 訪談、觀察、原型並用 |
| 驗證優先 | 開發前 | 越早發現問題越便宜 |
| 擁抱變更 | 需求變動時 | 變更正常，但要有流程管理 |
| 追溯性 | 整個專案 | 需求 ↔ 設計 ↔ 程式碼 ↔ 測試 |

---

### 方法速查表

| 方法 | 步驟 | 產物 |
|------|------|------|
| 利害關係人分析 | 識別 → 分類 → 理解 → 策略 | 利害關係人矩陣 |
| 使用案例 | 定義參與者 → 主要流程 → 替代流程 | 使用案例文件 |
| 使用者故事 | 角色 + 功能 + 價值 | 故事卡片 |
| 使用者故事映射 | 活動 → 故事 → 分層 → 發布規劃 | 故事地圖 |
| 需求審查 | 完整性 + 一致性 + 可行性 + 可測試性 | 審查報告 |

---

### 護欄（Guardrail）

| 危險信號 | 違反的原則 | 修正方式 |
|----------|-----------|----------|
| 「使用者說要這樣做」 | 發掘不足 | 追問「為什麼？」 |
| 做完才發現不對 | 驗證不足 | 原型、早期 Demo |
| 需求文件沒人看 | 形式主義 | 使用者故事、對話為主 |
| 改需求就生氣 | 對抗變更 | 擁抱變更、有流程管理 |
| 找不到需求來源 | 缺乏追溯 | 追溯矩陣 |
| 利害關係人衝突 | 協商不足 | 以業務價值為中心協商 |

---

## 1 個決策點

### 決策情境

**使用者故事 vs. 傳統需求規格書：什麼時候用哪個？**

### 選項對比

| 選項 | 情境 | 優點 | 缺點 |
|------|------|------|------|
| 使用者故事 | 敏捷、頻繁回饋、小團隊 | 輕量、以對話為主 | 可能不夠詳細 |
| 傳統規格書 | 合約、合規、大型專案 | 詳細、正式 | 耗時、可能過時 |

### 決策準則

**使用使用者故事**：
- 敏捷開發流程
- 可以頻繁和使用者溝通
- 團隊規模小
- 需求會持續演進

**使用傳統規格書**：
- 合約要求正式文件
- 合規要求追溯
- 外包開發
- 使用者很難接觸

**混合模式**：
- 用使用者故事做日常開發
- 在需要時產出正式文件（發布前、審計時）

---

## 1 個反模式（Anti-pattern）

### 反模式名稱

**「瀑布偽裝」症候群**（Waterfall in Disguise）

### 錯誤做法

在開發前花大量時間寫詳細需求文件，號稱敏捷但實際上：
- 需求文件定稿後才開發
- 變更需求需要簽核
- 使用者很少參與開發過程
- 最後才 Demo

### 後果

1. **需求過時**：寫完需求，市場已經變了
2. **浪費時間**：大量時間在文件上，不在價值上
3. **虛假敏捷**：有 Sprint 的形式，沒有敏捷的精神
4. **責任推卸**：「需求沒寫，我怎麼知道？」

### 正確做法

1. **持續發掘**：每個 Sprint 都有需求精煉
2. **對話為主**：使用者故事是對話的提示，不是完整規格
3. **頻繁驗證**：每個 Sprint 都有 Demo
4. **擁抱變更**：變更是學習的結果，不是失敗

---

## 可落地 Checklist（至少 5 條）

發掘和分析需求時，用這份清單：

- [x] **理解層次**：這是業務需求、使用者需求、還是系統需求？
- [x] **追問 Why**：為什麼需要這個？背後的目標是什麼？
- [x] **識別角色**：誰會使用這個功能？
- [x] **定義完成**：怎麼知道做對了？驗收標準是什麼？
- [x] **考慮例外**：如果 X 情況發生，怎麼處理？
- [x] **可測試**：可以寫出測試案例嗎？
- [x] **有追溯**：這個需求可以追溯到業務目標嗎？

---

## 章後練習

### 練習：將一個需求轉換為使用者故事和驗收標準

> 原始需求：「系統要有匯出報表功能」

**轉換過程**：

1. **追問 Why**：為什麼要匯出報表？
   - 「因為主管要看每月業績」

2. **追問更深**：主管需要看什麼資訊？
   - 「每個業務員的銷售額和達成率」

3. **識別角色**：誰會用這個功能？
   - 業務主管

**使用者故事**：
```
作為業務主管
我想要查看每月業績報表
以便追蹤團隊的銷售達成狀況
```

**驗收標準**：
```
Given 我是業務主管且已登入系統
When 我選擇「2025年1月」並點擊「產生報表」
Then 顯示該月份所有業務員的銷售額和達成率
And 可以按銷售額排序
And 可以匯出為 PDF 或 Excel
```

**學習**：原始需求是「解決方案」（匯出報表），經過追問才發現真正需求是「追蹤業績」。

---

## 延伸思考

### 在你的經驗中，需求問題的主要來源是什麼？

**我的思考**：

回顧過去的專案，需求問題的來源：

1. **發掘不足**（40%）
   - 只問了一個人
   - 只開了一次會
   - 沒有觀察實際工作流程

2. **驗證不足**（30%）
   - 做完才 Demo
   - 沒有原型
   - 沒有早期回饋

3. **變更管理不足**（20%）
   - 變更沒有評估影響
   - 沒有記錄為什麼變更
   - 舊需求和新需求混在一起

4. **溝通不足**（10%）
   - 開發者和使用者不直接溝通
   - 透過多層傳話

**改善方向**：投資更多時間在發掘和驗證，會省下更多的修改時間。

### 如何處理「使用者說不清楚需求」的情況？

**我的策略**：

1. **不要問「你要什麼」**
   - 改問「你現在怎麼做這件事？」
   - 「你遇到最大的困難是什麼？」
   - 「如果有魔法，你希望什麼改變？」

2. **觀察而非訪談**
   - 看他們實際工作
   - 記錄他們的 workaround

3. **用原型對話**
   - 畫個草圖問「是這樣嗎？」
   - 比抽象討論有效 100 倍

4. **舉具體例子**
   - 「上週那個客訴，你是怎麼處理的？」
   - 從具體例子抽象出需求

---

## 完成確認

- [x] 完成章前預測
- [x] 讀完本章
- [x] 填寫本章一句話
- [x] 填寫 3 個關鍵概念
- [x] 填寫原則、方法、護欄
- [x] 填寫 1 個決策點
- [x] 填寫 1 個反模式
- [x] 填寫 Checklist
- [x] 完成章後練習
- [x] 完成延伸思考

**完成日期**：2025-12-27
