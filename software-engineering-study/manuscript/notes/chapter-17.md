# 第17章　軟體品質保證 — 學習筆記

> **狀態**：✅ 已完成
> **閱讀日期**：2025-12-27
> **教材位置**：[content/chapter-17.md](../content/chapter-17.md)

---

## 章前預測（5 分鐘）

### 這章應該回答什麼問題？

1. SQA 是什麼？和 QC、測試有什麼不同？
2. SQA 包含哪些活動？
3. 如何建立 SQA 流程？
4. 如何度量 SQA 的效果？

### 我現在的理解是什麼？

閱讀前，我的理解：
- SQA = 測試
- SQA 是 QA 團隊的事
- 品質保證 = 品質控制

### 我遇過哪些相關痛點？

1. **品質責任不清**：誰負責品質？
2. **流程有但沒人遵守**：形式化的流程
3. **問題重複發生**：沒有根因分析

---

## 本章一句話

> **SQA 是確保流程和產品符合品質標準的系統化活動。QA 預防問題，QC 偵測問題。SQA 的核心是 PDCA 持續改善循環。**

---

## 3 個關鍵概念

### 概念 1：QA vs QC

**書中定義**：

| 概念 | 焦點 | 目的 |
|------|------|------|
| QA（品質保證） | 流程 | 預防問題 |
| QC（品質控制） | 產品 | 偵測問題 |

**我的理解**：

以前混淆了 QA 和 QC。

**比喻**：
- **QA** = 確保生產線的機器設定正確（預防）
- **QC** = 檢查產出的產品有沒有瑕疵（偵測）

**實際對應**：

| QA 活動 | QC 活動 |
|---------|---------|
| 定義開發流程 | 執行測試 |
| 制定編碼標準 | 程式碼審查 |
| 培訓團隊 | 問題檢驗 |
| 流程稽核 | 驗收測試 |

**經驗法則**：
> 「QA 是建立系統讓問題不發生，QC 是找出已經發生的問題。」

---

### 概念 2：PDCA 循環

**書中定義**：

```
Plan（規劃）→ Do（執行）→ Check（檢查）→ Act（改善）
```

持續循環，不斷改善。

**我的理解**：

這是品質改善的基本框架，可以應用在各種情境。

**實際應用**：

| 階段 | 活動範例 |
|------|----------|
| **Plan** | 設定測試覆蓋率目標 80% |
| **Do** | 執行開發和測試 |
| **Check** | 檢查實際覆蓋率 65% |
| **Act** | 增加單元測試培訓、設定 CI 門檻 |

**關鍵理解**：
- 不是一次性的
- 每次循環都要有改善
- 小步快跑勝過大躍進

---

### 概念 3：根因分析

**書中定義**：

找出問題的真正原因，而不是表面症狀。

方法：
- 5 Why 分析法
- 魚骨圖（Ishikawa）

**我的理解**：

表面症狀 vs 根因的差別：

| 表面 | 根因 |
|------|------|
| 「測試沒覆蓋」 | 「沒有需求審查流程」 |
| 「程式碼有 bug」 | 「沒有 Code Review」 |
| 「上線出問題」 | 「沒有自動化部署」 |

**5 Why 範例**：

```
問題：生產環境發生錯誤

為什麼？→ 有個 bug 沒被發現
為什麼？→ 這個路徑沒有測試
為什麼？→ 沒有人要求測試這個路徑
為什麼？→ 沒有測試審查機制
為什麼？→ 認為「開發者自己會測」就夠了

根因：缺乏測試審查機制
對策：PR 必須附上測試覆蓋報告
```

**經驗法則**：
> 「問 5 次『為什麼』，通常能找到真正的問題。」

---

## 原則、方法、護欄

### SQA 活動速查表

| 活動 | 目的 | 頻率 |
|------|------|------|
| 流程定義 | 建立標準 | 專案開始 |
| 靜態分析 | 早期發現問題 | 每次 commit |
| 程式碼審查 | 知識分享、品質把關 | 每個 PR |
| 自動化測試 | 持續驗證 | 每次 commit |
| 流程稽核 | 確保遵循 | 每月 |
| 回顧會議 | 持續改善 | 每個 Sprint |

---

### 護欄（Guardrail）

| 危險信號 | 可能的問題 | 修正方式 |
|----------|-----------|----------|
| 流程有但沒人遵守 | 流程不實用 | 簡化流程 |
| 問題重複發生 | 沒有根因分析 | 5 Why 分析 |
| 只有 QC 沒有 QA | 只偵測不預防 | 建立預防機制 |
| 度量沒人看 | 度量無意義 | 選擇可行動的指標 |
| 品質責任不清 | 職責劃分問題 | 明確 RACI |

---

## 1 個決策點

### 決策情境

**要不要導入 CMMI？**

### 選項對比

| 面向 | 導入 CMMI | 不導入 |
|------|-----------|--------|
| 成本 | 高（顧問、培訓、稽核） | 低 |
| 時間 | 長（6-18 個月） | - |
| 效益 | 流程標準化、客戶信任 | - |
| 風險 | 官僚化、過度流程 | 沒有系統化 |

### 決策準則

| 情境 | 建議 |
|------|------|
| 需要政府標案 | 可能需要 CMMI |
| 大型企業客戶要求 | 可能需要 |
| 小型敏捷團隊 | 不需要 |
| 內部產品團隊 | 不需要 |

**經驗法則**：
> 「如果客戶不要求，先做好敏捷的品質實踐就夠了。」

**替代方案**：
- 採用敏捷品質實踐（TDD、CI/CD、Code Review）
- 參考 CMMI 原則但不正式認證

---

## 1 個反模式（Anti-pattern）

### 反模式名稱

**「流程警察」症候群**

### 錯誤做法

SQA 變成「抓違規的警察」：
- 專門找人沒遵守流程
- 發違規報告給管理層
- 團隊視 SQA 為敵人
- 流程變成形式主義

### 後果

1. **對立關係**：開發和 SQA 對立
2. **隱藏問題**：為了避免被抓，隱藏真實情況
3. **形式主義**：只做表面功夫
4. **失去信任**：沒有人相信 SQA 能幫忙

### 正確做法

SQA 是「教練」，不是「警察」：

| 警察做法 | 教練做法 |
|----------|----------|
| 「你違反流程」 | 「這個流程為什麼難遵守？」 |
| 「寫報告給主管」 | 「我們一起改善」 |
| 「這是規定」 | 「這樣做有什麼好處」 |
| 事後抓違規 | 事前協助 |

**檢驗標準**：
> 「團隊會主動找 SQA 討論問題嗎？」

---

## 可落地 Checklist（至少 5 條）

建立 SQA 時檢查：

- [x] **流程定義**：有清楚的開發流程嗎？
- [x] **標準制定**：有編碼標準嗎？
- [x] **自動化**：Lint、測試有自動化嗎？
- [x] **審查機制**：有 Code Review 嗎？
- [x] **問題追蹤**：有問題追蹤系統嗎？
- [x] **根因分析**：問題會做根因分析嗎？
- [x] **度量收集**：有品質指標嗎？
- [x] **回顧改善**：有定期回顧嗎？

---

## 章後練習

### 練習：設計你的 SQA 活動

> 目標：為你的團隊設計 SQA 活動

**我的設計**：

| 活動 | 目的 | 頻率 | 負責 | 工具 |
|------|------|------|------|------|
| 靜態分析 | 早期發現問題 | 每次 commit | 自動化 | ESLint + SonarQube |
| Code Review | 品質把關 + 知識分享 | 每個 PR | 開發者 | GitHub PR |
| 單元測試 | 驗證邏輯 | 每次 commit | 自動化 | Jest |
| 整合測試 | 驗證整合 | 每日 | 自動化 | Cypress |
| Sprint Retro | 持續改善 | 每兩週 | 全團隊 | Miro |
| 問題回顧 | 根因分析 | 重大問題後 | 相關人員 | 5 Why |

**度量儀表板**：

| 指標 | 目標 | 現況 |
|------|------|------|
| 測試覆蓋率 | > 80% | 65% |
| Code Review 時間 | < 24 小時 | 48 小時 |
| 上線後 bug | < 5/月 | 12/月 |
| 程式碼複雜度 | < 10 | 8 |

**改善計畫**：
1. 提高測試覆蓋率：增加單元測試培訓
2. 加快 Review：設定 24 小時 SLA
3. 減少上線 bug：增加 E2E 測試

---

## 延伸思考

### 敏捷團隊需要 SQA 嗎？

**我的思考**：

敏捷不是沒有流程，而是流程更輕量。

**敏捷中的 SQA**：

| 傳統 SQA | 敏捷版本 |
|----------|----------|
| 正式文件審查 | PR Review |
| 專門 QA 團隊 | 全團隊負責 |
| 階段性稽核 | 持續整合 |
| 大量文件 | 可工作的軟體 |
| 最後測試 | TDD |

**結論**：
> 「敏捷需要 SQA 的精神（預防、持續改善），但形式可以更輕量。」

### 如何讓團隊接受 SQA？

**我的策略**：

1. **從痛點出發**
   - 「上次那個 bug 花了多少時間修？」
   - 「如果有 X，就不會發生了」

2. **小步引入**
   - 先自動化最痛的部分
   - 有成效再擴大

3. **讓團隊參與設計**
   - 不是 SQA 制定，團隊執行
   - 而是團隊一起設計流程

4. **展示效益**
   - 用數據說話
   - 「這個月 bug 減少了 50%」

---

## 完成確認

- [x] 完成章前預測
- [x] 讀完本章
- [x] 填寫本章一句話
- [x] 填寫 3 個關鍵概念
- [x] 填寫原則、方法、護欄
- [x] 填寫 1 個決策點
- [x] 填寫 1 個反模式
- [x] 填寫 Checklist
- [x] 完成章後練習
- [x] 完成延伸思考

**完成日期**：2025-12-27
