# 第15章　品質的概念 — 學習筆記

> **狀態**：✅ 已完成
> **閱讀日期**：2025-12-27
> **教材位置**：[content/chapter-15.md](../content/chapter-15.md)

---

## 章前預測（5 分鐘）

### 這章應該回答什麼問題？

1. 什麼是軟體品質？有哪些面向？
2. 品質成本是什麼？如何權衡？
3. 如何度量品質？
4. QA 和 QC 有什麼不同？

### 我現在的理解是什麼？

閱讀前，我的理解：
- 品質 = 沒有 bug
- 品質是 QA 的責任
- 測試越多，品質越好

### 我遇過哪些相關痛點？

1. **品質和速度的衝突**：趕上線 vs. 做好
2. **技術債累積**：越來越難改
3. **品質責任不清**：出問題互相推

---

## 本章一句話

> **品質不是測試出來的，而是設計和建構出來的。品質是整個團隊的責任，需要從預防著手，而非只靠偵測。**

---

## 3 個關鍵概念

### 概念 1：品質成本模型

**書中定義**：

品質成本 = 符合成本 + 不符合成本

| 類型 | 內容 |
|------|------|
| 預防成本 | 培訓、流程、工具 |
| 評估成本 | 測試、審查、稽核 |
| 內部失敗 | 重工、廢棄、偵錯 |
| 外部失敗 | 客訴、賠償、信譽損失 |

**我的理解**：

這個模型解釋了為什麼「趕上線」往往更貴。

**比例關係**：
- 預防成本 : 評估成本 : 失敗成本 ≈ 1 : 3 : 10
- 投資 1 元在預防，可以省 10 元的失敗成本

**實際例子**：

| 投資 | 成本 | 節省 |
|------|------|------|
| Code Review | 30 分鐘 | 避免上線後 4 小時 debug |
| 單元測試 | 寫 1 小時 | 避免整合問題 2 小時 |
| 設計審查 | 2 小時 | 避免重構 2 天 |

---

### 概念 2：技術債

**書中定義**：

技術債 = 為了短期速度犧牲長期品質的決策。

類型：
- 有意債務：知道在借債
- 無意債務：不知道在借債
- 利息：債務的代價

**我的理解**：

技術債不是壞事，但需要**管理**。

**債務矩陣**：

|  | 有意 | 無意 |
|--|------|------|
| **謹慎** | 「我們知道這裡有問題，之後會修」 | 「現在回頭看，當初應該這樣做」 |
| **魯莽** | 「沒時間做好」 | 「什麼是設計模式？」 |

**管理策略**：
1. **可見化**：追蹤技術債（用 Issue、標籤）
2. **定期償還**：每個 Sprint 分配 10-20% 時間
3. **利息監控**：當利息太高時，優先償還

---

### 概念 3：品質是團隊責任

**書中定義**：

品質不是 QA 的責任，是整個團隊的責任。

| 角色 | 責任 |
|------|------|
| 開發者 | 寫高品質程式碼、寫測試 |
| 測試者 | 驗證品質、提供回饋 |
| PM | 平衡品質和時程 |

**我的理解**：

以前的想法：「我寫完了，QA 去測」。
正確的想法：「品質是我的責任，QA 幫忙驗證」。

**「品質內建」的實踐**：

| 實踐 | 責任者 |
|------|--------|
| 寫單元測試 | 開發者 |
| Code Review | 開發者互相 |
| 自動化測試 | 開發者 + QA |
| 效能測試 | 開發者 + QA |
| 安全檢查 | 開發者 + 安全團隊 |

**Definition of Done 包含品質**：
- 單元測試通過
- Code Review 通過
- 自動化測試通過
- 文件更新
- 無已知 bug

---

## 原則、方法、護欄

### 品質度量速查表

| 類型 | 度量 | 工具 |
|------|------|------|
| 可靠性 | MTBF, 可用性 | 監控系統 |
| 效能 | P99 延遲, 吞吐量 | APM 工具 |
| 可維護性 | 複雜度, 重複率 | SonarQube |
| 測試 | 覆蓋率 | Coverage tools |
| 缺陷 | 缺陷密度, MTTR | Bug tracker |

---

### 護欄（Guardrail）

| 危險信號 | 可能的問題 | 修正方式 |
|----------|-----------|----------|
| 「趕上線」變常態 | 技術債累積 | 平衡速度和品質 |
| 「QA 會測」心態 | 品質責任推卸 | 開發者寫測試 |
| 沒有度量 | 不知道品質狀況 | 建立基本指標 |
| 只看覆蓋率 | 測試品質差 | 關注測試有效性 |
| 技術債看不見 | 無法管理 | 追蹤和可見化 |

---

## 1 個決策點

### 決策情境

**如何平衡品質和速度？**

### 決策框架

```
情境判斷
│
├─ 核心功能？
│   └─ 是 → 不能妥協品質
│
├─ 可以之後修？
│   ├─ 是 → 可以承擔有意債務
│   └─ 否 → 現在就做好
│
├─ 債務成本？
│   ├─ 高 → 現在做好
│   └─ 低 → 可以延後
│
└─ 決定
    ├─ 做好 → 不借債
    └─ 先上線 → 記錄債務，計劃償還
```

### 經驗法則

| 情境 | 選擇 |
|------|------|
| 核心業務邏輯 | 不妥協 |
| 安全相關 | 不妥協 |
| UI 細節 | 可以迭代 |
| 實驗性功能 | 可以快速 |
| 技術債利息很高 | 先還債 |

---

## 1 個反模式（Anti-pattern）

### 反模式名稱

**「趕上線」常態化**

### 錯誤做法

每次都「先趕上線，之後再改」：
- 沒有測試
- 沒有 Review
- 沒有文件
- 「之後」永遠不會來

### 後果

1. **技術債爆炸**：越來越難改
2. **品質下降**：bug 越來越多
3. **速度變慢**：反而變慢
4. **團隊倦怠**：永遠在救火

### 正確做法

1. **不把「趕」當常態**
2. **每個 Sprint 留緩衝**
3. **技術債可見化**
4. **定期還債時間**
5. **品質是 DoD 的一部分**

**經驗法則**：
> 「如果每次都在趕，那是計畫的問題，不是執行的問題。」

---

## 可落地 Checklist（至少 5 條）

品質檢查清單：

- [x] **測試覆蓋**：關鍵路徑有測試嗎？
- [x] **Code Review**：有人 Review 過嗎？
- [x] **技術債追蹤**：有記錄技術債嗎？
- [x] **品質指標**：有監控品質指標嗎？
- [x] **DoD 清楚**：Definition of Done 包含品質嗎？
- [x] **還債計畫**：有計畫償還技術債嗎？

---

## 章後練習

### 練習：定義你的品質指標

> 目標：用 GQM 方法定義品質指標

**Goal（目標）**：提高系統可靠性

**Questions & Metrics**：

| 問題 | 度量 | 目標值 |
|------|------|--------|
| 系統多常故障？ | MTBF | > 30 天 |
| 故障多快修復？ | MTTR | < 1 小時 |
| 系統可用性？ | Availability | > 99.9% |
| 錯誤率？ | Error Rate | < 0.1% |

**Goal（目標）**：提高程式碼品質

**Questions & Metrics**：

| 問題 | 度量 | 目標值 |
|------|------|--------|
| 程式碼有多複雜？ | Cyclomatic Complexity | < 10 |
| 有多少重複？ | Duplication Rate | < 5% |
| 測試覆蓋率？ | Code Coverage | > 80% |
| 缺陷密度？ | Bugs per KLOC | < 1 |

---

## 延伸思考

### 你的團隊如何管理技術債？

**我的思考**：

目前的問題：
- 技術債看不見
- 沒有時間還債
- 越積越多

**改善計畫**：
1. **可見化**：用 GitHub Issues + 標籤追蹤
2. **定期還**：每個 Sprint 20% 時間
3. **優先級**：根據「利息」高低排序
4. **回顧**：每月檢視技術債狀況

### 品質和速度如何平衡？

**我的策略**：

1. **區分核心和非核心**
   - 核心功能：不妥協
   - 非核心：可以快速迭代

2. **自動化**
   - 自動測試 = 快速 + 品質
   - CI/CD = 快速部署

3. **小步快跑**
   - 小功能 + 頻繁發布
   - 快速回饋 + 快速修正

4. **技術債額度**
   - 設定「可接受的債務水平」
   - 超過就停下來還債

---

## 完成確認

- [x] 完成章前預測
- [x] 讀完本章
- [x] 填寫本章一句話
- [x] 填寫 3 個關鍵概念
- [x] 填寫原則、方法、護欄
- [x] 填寫 1 個決策點
- [x] 填寫 1 個反模式
- [x] 填寫 Checklist
- [x] 完成章後練習
- [x] 完成延伸思考

**完成日期**：2025-12-27
